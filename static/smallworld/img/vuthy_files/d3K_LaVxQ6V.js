if (self.CavalryLogger) { CavalryLogger.start_js(["4D0Tq"]); }

__d("Shaka",["Promise"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h=c('Promise'),i={};(function(j){var k,l=this;function m(lm,mm){var nm=lm.split("."),om=l;nm[0] in om||!om.execScript||om.execScript("var "+nm[0]);for(var pm;nm.length&&(pm=nm.shift());)nm.length||void 0===mm?om[pm]?om=om[pm]:om=om[pm]={}:om[pm]=mm;}function n(lm,mm){function nm(){}nm.prototype=mm.prototype;lm.lc=mm.prototype;lm.prototype=new nm();lm.prototype.constructor=lm;lm.jc=function(om,pm,qm){return mm.prototype[pm].apply(om,Array.prototype.slice.call(arguments,2));};}function o(){}function p(lm){var mm=console[lm];mm?mm.bind||(console[lm]=function(){mm.apply(console,arguments);}):console[lm]=function(){};}p("error");p("warn");p("info");p("log");p("debug");function q(lm){u[lm]={ja:t(),end:NaN};}function r(lm){if(lm=u[lm])lm.end=t();}function s(lm){return (lm=u[lm])&&lm.end?lm.end-lm.ja:NaN;}var t=j.performance&&j.performance.now?j.performance.now.bind(j.performance):Date.now,u={};function v(lm,mm,nm,om){this.id=lm;this.bandwidth=mm||0;this.lang=nm||"unknown";this.streamInfoID=om;this.active=false;}m("shaka.player.AudioTrack.compare",function(lm,mm){return lm.lang<mm.lang?-1:lm.lang>mm.lang?1:lm.bandwidth<mm.bandwidth?-1:lm.bandwidth>mm.bandwidth?1:0;});function w(){this.minBandwidth=this.maxBandwidth=this.maxWidth=this.minHeight=this.maxHeight=null;}w.prototype.clone=function(){var lm=new w();lm.maxHeight=this.maxHeight;lm.minHeight=this.minHeight;lm.maxWidth=this.maxWidth;lm.maxBandwidth=this.maxBandwidth;lm.minBandwidth=this.minBandwidth;return lm;};function x(){this.fontSize="100%";this.fontColor=aa;this.fontOpacity=ca;this.backgroundColor=ba;this.backgroundOpacity=ca;this.fontEdge=da;}m("shaka.player.TextStyle",x);function y(lm){var mm=[];mm.push("font-size: "+lm.fontSize);mm.push("color: "+z(lm.fontColor,lm.fontOpacity));mm.push("background-color: "+z(lm.backgroundColor,lm.backgroundOpacity));for(var nm=[],om=0;om<lm.fontEdge.length;++om){var pm=lm.fontEdge[om].slice(3,6);nm.push(z(lm.fontEdge[om].slice(0,3),lm.fontOpacity)+" "+pm.join("px ")+"px");}mm.push("text-shadow: "+nm.join(","));return mm.join("; ");}function z(lm,mm){return "rgba("+lm.concat(mm).join(",")+")";}var aa=[255,255,255],ba=[0,0,0];x.StandardColors={WHITE:aa,BLACK:ba,RED:[255,0,0],GREEN:[0,255,0],BLUE:[0,0,255],YELLOW:[255,255,0],MAGENTA:[255,0,255],CYAN:[0,255,255]};var ca=1;x.StandardOpacities={OPAQUE:ca,SEMI_HIGH:.75,SEMI_LOW:.25,TRANSPARENT:0};var da=[];x.EdgeStyles={NONE:da,RAISED:[[34,34,34,1,1,0],[34,34,34,2,2,0],[34,34,34,3,3,0]],DEPRESSED:[[204,204,204,1,1,0],[204,204,204,0,1,0],[34,34,34,-1,-1,0],[34,34,34,0,-1,0]],UNIFORM:[[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4]],DROP:[[34,34,34,2,2,3],[34,34,34,2,2,4],[34,34,34,2,2,5]]};function ea(lm,mm){this.id=lm;this.lang=mm||"unknown";this.enabled=this.active=false;}m("shaka.player.TextTrack.compare",function(lm,mm){return lm.lang<mm.lang?-1:lm.lang>mm.lang?1:0;});function fa(lm,mm,nm,om,pm,qm,rm){this.id=lm;this.bandwidth=mm||0;this.width=nm||0;this.height=om||0;this.streamInfoID=pm;this.fbQualityLabel=qm;this.fbQualityClass=rm;this.active=false;}function ga(lm,mm){var nm=lm.width*lm.height,om=mm.width*mm.height;return nm<om?-1:nm>om?1:lm.bandwidth<mm.bandwidth?-1:lm.bandwidth>mm.bandwidth?1:0;}m("shaka.player.VideoTrack.compare",ga);function ha(){var lm="CustomEvent" in j;if(lm)try{new CustomEvent("");}catch(mm){lm=false;}lm||(j.CustomEvent=ia);}m("shaka.polyfill.CustomEvent.install",ha);function ia(lm,mm){var nm=document.createEvent("CustomEvent"),om=mm||{bubbles:false,cancelable:false,detail:null};nm.initCustomEvent(lm,!!om.bubbles,!!om.cancelable,om.detail);return nm;}function ja(){var lm=Element.prototype;lm.requestFullscreen=lm.requestFullscreen||lm.mozRequestFullScreen||lm.msRequestFullscreen||lm.webkitRequestFullscreen;lm=Document.prototype;lm.exitFullscreen=lm.exitFullscreen||lm.mozCancelFullScreen||lm.msExitFullscreen||lm.webkitExitFullscreen;"fullscreenElement" in document||Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement;}});document.addEventListener("webkitfullscreenchange",ka);document.addEventListener("webkitfullscreenerror",ka);document.addEventListener("mozfullscreenchange",ka);document.addEventListener("mozfullscreenerror",ka);document.addEventListener("MSFullscreenChange",ka);document.addEventListener("MSFullscreenError",ka);}m("shaka.polyfill.Fullscreen.install",ja);function ka(lm){var mm=lm.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),mm=new Event(mm,lm);lm.target.dispatchEvent(mm);}function la(){return h.reject(Error("The key system specified is not supported."));}function ma(lm){return null==lm?h.resolve():h.reject(Error("MediaKeys not supported."));}function na(){throw new TypeError("Illegal constructor.");}na.prototype.createSession=function(){};na.prototype.setServerCertificate=function(){};function oa(){throw new TypeError("Illegal constructor.");}oa.prototype.getConfiguration=function(){};oa.prototype.createMediaKeys=function(){};function pa(lm){this.c=[];this.b=[];this.ga=qa;if(lm)try{lm(this.da.bind(this),this.a.bind(this));}catch(mm){this.a(mm);}}var qa=0;function ra(){j.Promise||(j.Promise=pa,j.Promise.resolve=sa,j.Promise.reject=ta,j.Promise.all=ua,j.Promise.race=va,j.setImmediate?(ya=function(lm){return j.setImmediate(lm);},za=function(lm){return j.clearImmediate(lm);}):(ya=function(lm){return j.setTimeout(lm,0);},za=function(lm){return j.clearTimeout(lm);}));}m("shaka.polyfill.Promise.install",ra);function sa(lm){var mm=new pa();mm.da(lm);return mm;}function ta(lm){var mm=new pa();mm.a(lm);return mm;}function ua(lm){function mm(sm,tm,um){sm.ga==qa&&(pm[tm]=um,om++,om==pm.length&&sm.da(pm));}var nm=new pa();if(!lm.length)return nm.da([]),nm;for(var om=0,pm=Array(lm.length),qm=nm.a.bind(nm),rm=0;rm<lm.length;++rm)lm[rm]&&lm[rm].then?lm[rm].then(mm.bind(null,nm,rm),qm):mm(nm,rm,lm[rm]);return nm;}function va(lm){for(var mm=new pa(),nm=mm.da.bind(mm),om=mm.a.bind(mm),pm=0;pm<lm.length;++pm)lm[pm]&&lm[pm].then?lm[pm].then(nm,om):nm(lm[pm]);return mm;}pa.prototype.then=function(lm,mm){var nm=new pa();switch(this.ga){case 1:wa(this,nm,lm);break;case 2:wa(this,nm,mm);break;case qa:this.c.push({Qa:nm,Ia:lm}),this.b.push({Qa:nm,Ia:mm});}return nm;};pa.prototype.then=pa.prototype.then;pa.prototype.catch=function(lm){return this.then(void 0,lm);};pa.prototype["catch"]=pa.prototype.catch;pa.prototype.da=function(lm){if(this.ga==qa){this.Fa=lm;this.ga=1;for(lm=0;lm<this.c.length;++lm)wa(this,this.c[lm].Qa,this.c[lm].Ia);this.c=[];this.b=[];}};pa.prototype.a=function(lm){if(this.ga==qa){this.Fa=lm;this.ga=2;for(lm=0;lm<this.b.length;++lm)wa(this,this.b[lm].Qa,this.b[lm].Ia);this.c=[];this.b=[];}};function wa(lm,mm,nm){bb.push(function(){if(nm&&"function"==typeof nm){try{var pm=nm(this.Fa);}catch(om){mm.a(om);return;}pm instanceof pa?pm==mm?mm.a(new TypeError("Chaining cycle detected")):pm.then(mm.da.bind(mm),mm.a.bind(mm)):mm.da(pm);}else 1==this.ga?mm.da(this.Fa):mm.a(this.Fa);}.bind(lm));null==ab&&(ab=ya(xa));}function xa(){for(;bb.length;){null!=ab&&(za(ab),ab=null);var lm=bb;bb=[];for(var mm=0;mm<lm.length;++mm)lm[mm]();}}function ya(){return 0;}function za(){}var ab=null,bb=[];function cb(){var lm=HTMLVideoElement.prototype;!lm.getVideoPlaybackQuality&&"webkitDroppedFrameCount" in lm&&(lm.getVideoPlaybackQuality=db);}m("shaka.polyfill.VideoPlaybackQuality.install",cb);function db(){return {droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0};}function eb(lm,mm){for(var nm=[],om=0;om<lm.length;++om){for(var pm=false,qm=0;qm<nm.length&&!(pm=mm?mm(lm[om],nm[qm]):lm[om]===nm[qm]);++qm);pm||nm.push(lm[om]);}return nm;}function fb(){return Date.now()+gb;}var gb=0;function hb(lm){this.b=lm;this.c=0==ib;this.a=0;}var ib=1;function jb(lm){return lm.a<lm.b.byteLength;}function kb(lm){var mm=lm.b.getUint8(lm.a);lm.a+=1;return mm;}function lb(lm){var mm=lm.b.getUint32(lm.a,lm.c);lm.a+=4;return mm;}function mb(lm){var mm,nm;lm.c?(mm=lm.b.getUint32(lm.a,true),nm=lm.b.getUint32(lm.a+4,true)):(nm=lm.b.getUint32(lm.a,false),mm=lm.b.getUint32(lm.a+4,false));if(2097151<nm)throw new RangeError("DataViewReader: Overflow reading 64-bit value.");lm.a+=8;return nm*Math.pow(2,32)+mm;}function nb(lm){if(lm.a+16>lm.b.byteLength)throw new RangeError("DataViewReader: Read past end of DataView.");var mm=new Uint8Array(lm.b.buffer,lm.a,16);lm.a+=16;return mm;}function ob(lm,mm){if(lm.a+mm>lm.b.byteLength)throw new RangeError("DataViewReader: Skip past end of DataView.");lm.a+=mm;}function pb(lm){this.b=lm;this.a=new hb(lm);qb||(qb=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])]);}var qb;function rb(lm){var mm;mm=sb(lm);if(7<mm.length)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");for(var nm=0,om=0;om<mm.length;om++)nm=256*nm+mm[om];mm=nm;nm=sb(lm);lm:{for(om=0;om<qb.length;om++)if(xd(nm,qb[om])){om=true;break lm;}om=false;};if(om){nm=lm.b.byteLength-lm.a.a;}else{if(8==nm.length&&nm[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");for(var om=nm[0]&(1<<8-nm.length)-1,pm=1;pm<nm.length;pm++)om=256*om+nm[pm];nm=om;}nm=lm.a.a+nm<=lm.b.byteLength?nm:lm.b.byteLength-lm.a.a;om=new DataView(lm.b.buffer,lm.b.byteOffset+lm.a.a,nm);ob(lm.a,nm);return new tb(mm,om);}function sb(lm){var mm=kb(lm.a),nm;for(nm=1;8>=nm&&!(mm&1<<8-nm);nm++);if(8<nm)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");var om=new Uint8Array(nm);om[0]=mm;for(mm=1;mm<nm;mm++)om[mm]=kb(lm.a);return om;}function tb(lm,mm){this.id=lm;this.a=mm;}function ub(lm){if(8<lm.a.byteLength)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(8==lm.a.byteLength&&lm.a.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");for(var mm=0,nm=0;nm<lm.a.byteLength;nm++)var om=lm.a.getUint8(nm),mm=256*mm+om;return mm;}var vb={"output-restricted":"The required output protection is not available.","output-not-allowed":"The required output protection is not available.",expired:"The decryption key has expired.","internal-error":"The key system has encountered an unspecified error."};function wb(lm){this.c=Math.exp(Math.log(.5)/lm);this.a=this.b=0;}wb.prototype.sample=function(lm,mm){var nm=Math.pow(this.c,lm);this.b=mm*(1-nm)+nm*this.b;this.a+=lm;};function xb(lm){return lm.b/(1-Math.pow(lm.c,lm.a));}function yb(lm){var mm=new CustomEvent(lm.type,{detail:lm.detail,bubbles:!!lm.bubbles}),nm;for(nm in lm)nm in mm||(mm[nm]=lm[nm]);return mm;}function zb(lm){return new CustomEvent("error",{detail:lm,bubbles:true});}function ac(lm,mm,nm){dc(mm);dc(nm);return nm==mm||lm>=bc&&nm==mm.split("-")[0]||lm>=cc&&nm.split("-")[0]==mm.split("-")[0]?true:false;}var bc=1,cc=2;function dc(lm){lm=lm.toLowerCase().split("-");var mm=ec[lm[0]];mm&&(lm[0]=mm);return lm.join("-");}var ec={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};function fc(lm){return Object.keys(lm).map(function(mm){return lm[mm];});}function gc(lm,mm){return jc(lm,mm,"boolean");}function hc(lm,mm,nm){lm=jc(lm,mm,"number");if(null==lm)return null;if(isNaN(lm)||lm==Number.NEGATIVE_INFINITY||lm==Number.POSITIVE_INFINITY)throw new RangeError("'"+mm+"' must be finite.");if(null!=nm&&lm<nm)throw new RangeError("'"+mm+"' must be >= "+nm);return lm;}function ic(lm,mm){return jc(lm,mm,"string");}function jc(lm,mm,nm){lm=lm[mm];if(null==lm)return null;if(typeof lm!=nm)throw new TypeError("'"+mm+"' must be a "+nm+".");return lm;}function kc(lm,mm,nm){lm=lm[mm];if(null==lm)return null;if(!(lm instanceof nm))throw new TypeError("'"+mm+"' must be an instance of "+nm.name+".");return lm;}function lc(){this.a={};}lc.prototype.push=function(lm,mm){this.a.hasOwnProperty(lm)?this.a[lm].push(mm):this.a[lm]=[mm];};lc.prototype.set=function(lm,mm){this.a[lm]=mm;};lc.prototype.get=function(lm){return (lm=this.a[lm])?lm.slice():null;};function mc(lm){var mm=[],nm;for(nm in lm.a)mm.push.apply(mm,lm.a[nm]);return mm;}function nc(lm,mm,nm){if(lm=lm.a[mm])for(mm=0;mm<lm.length;++mm)lm[mm]==nm&&(lm.splice(mm,1),--mm);}function oc(lm){var mm=[],nm;for(nm in lm.a)mm.push(nm);return mm;}function pc(){this.a=new lc();}pc.prototype.destroy=function(){rc(this);this.a=null;};function qc(lm,mm,nm,om){mm=new sc(mm,nm,om);lm.a.push(nm,mm);}pc.prototype.Aa=function(lm,mm){for(var nm=this.a.get(mm)||[],om=0;om<nm.length;++om){var pm=nm[om];pm.target==lm&&(pm.Aa(),nc(this.a,mm,pm));}};function rc(lm){for(var mm=mc(lm.a),nm=0;nm<mm.length;++nm)mm[nm].Aa();lm.a.a={};}function sc(lm,mm,nm){this.target=lm;this.type=mm;this.a=nm;this.target.addEventListener(mm,nm,false);}sc.prototype.Aa=function(){this.target&&(this.target.removeEventListener(this.type,this.a,false),this.a=this.target=null);};function tc(lm){this.Ha=new lc();this.U=lm;}m("shaka.util.FakeEventTarget",tc);k=tc.prototype;k.addEventListener=function(lm,mm,nm){nm||this.Ha.push(lm,mm);};k.removeEventListener=function(lm,mm,nm){nm||nc(this.Ha,lm,mm);};k.dispatchEvent=function(lm){lm.hasOwnProperty("srcElement")||(delete lm.srcElement,Object.defineProperty(lm,"srcElement",{get:function(){return null;}}));if(lm.hasOwnProperty("target")){lm.target=this;}else{delete lm.target;var mm=this;Object.defineProperty(lm,"target",{get:function(){return mm;},set:function(om){mm=om;}});}if(lm.hasOwnProperty("currentTarget")){lm.currentTarget=null;}else{delete lm.currentTarget;var nm=null;Object.defineProperty(lm,"currentTarget",{get:function(){return nm;},set:function(om){nm=om;}});}return uc(this,lm);};k.Xa=false;k.ka=function(lm,mm){return this.dispatchEvent(yb({type:"debug/shakaEvent",bubbles:true,detail:{type:lm,event:mm}}));};function uc(lm,mm){mm.currentTarget=lm;for(var nm=lm.Ha.get(mm.type)||[],om=0;om<nm.length;++om){var pm=nm[om];try{pm.handleEvent?pm.handleEvent(mm):pm.call(lm,mm);}catch(qm){}}lm.U&&mm.bubbles&&uc(lm.U,mm);return mm.defaultPrevented;}function vc(lm){tc.call(this,null);this.a=new wb(3);this.g=new wb(10);this.h=lm||500000;this.f=0;}n(vc,tc);m("shaka.util.EWMABandwidthEstimator",vc);vc.prototype.sample=function(lm,mm){if(!(65536>mm)){lm=Math.max(lm,50);var nm=8000*mm/lm,om=lm/1000;this.a.sample(om,nm);this.g.sample(om,nm);this.dispatchEvent(yb({type:"bandwidth"}));this.f=Date.now();}};vc.prototype.getBandwidth=function(){return .5>this.a.a?this.h:Math.min(xb(this.a),xb(this.g));};vc.prototype.getDataAge=function(){return (Date.now()-this.f)/1000;};vc.prototype.supportsCaching=function(){return false;};function wc(lm,mm,nm){vc.call(this,nm);this.c=lm||0;this.b=void 0===mm?Infinity:mm;}n(wc,vc);m("shaka.util.EWMACacheBandwidthEstimator",wc);wc.prototype.sample=function(lm,mm){lm<=this.c&&8000*mm/lm>this.b||vc.prototype.sample.call(this,lm,mm);};wc.prototype.supportsCaching=function(){return Infinity!==this.b&&!!this.c;};function xc(){vc.call(this);}n(xc,vc);m("shaka.util.EWMASignedURLBandwidthEstimator",xc);xc.prototype.supportsCaching=function(){return true;};function yc(){var lm,mm,nm=new h(function(om,pm){lm=om;mm=pm;});nm.resolve=lm;nm.reject=mm;nm.destroy=yc.prototype.destroy;return nm;}yc.prototype.destroy=function(){this.catch(function(){});var lm=Error("Destroyed!");lm.type="destroy";this.reject(lm);};function zc(lm){lm.split("").reduce(function(mm,nm,om){return mm+(om&&0==om%4?" "+nm:nm);});}function ad(){this.Ea=new yc();this.c=false;this.aa=null;this.a=[];this.b=null;}function bd(lm,mm){if(lm.c)throw Error("Cannot append to a running task!");lm.a.push(mm);}ad.prototype.start=function(){if(this.c)throw Error("Task already started!");this.c=true;this.a.unshift(function(){});cd(this,void 0);};ad.prototype.end=function(){this.a.splice(1);};function cd(lm,mm){var nm=lm.a[0](mm),om;nm?(om=nm[0],lm.b=nm[1]):(om=h.resolve(),lm.b=null);om.then(ed(lm,function(pm){this.aa?(this.a=[],this.b=null,dd(this)):(this.a.shift(),this.a.length?cd(this,pm):(this.Ea.resolve(pm),this.b=null));})).catch(ed(lm,function(pm){this.a=[];this.b=null;this.aa?dd(this):this.Ea.reject(pm);}));}function dd(lm){function mm(){var nm=Error("Task aborted.");nm.type="aborted";this.Ea.reject(nm);j.setTimeout(function(){this.aa.resolve();this.aa=null;}.bind(this),5);}lm.f?lm.f.then(function(){this.f=null;mm.call(this);}.bind(lm)):mm.call(lm);}function ed(lm,mm){return mm.bind(lm);}function fd(lm,mm,nm,om){MediaSource.isTypeSupported(mm);tc.call(this,om);om=lm.addSourceBuffer(mm);this.l=lm;this.c=om;this.B=nm;this.v=new pc();this.g=this.F=null;this.A=false;this.o=null;this.m=false;this.b=[];this.D=0;this.j=this.f=this.a=null;this.C=0;this.h=mm&&mm.charAt(0);qc(this.v,this.c,"updateend",this.G.bind(this));}n(fd,tc);fd.prototype.ba=function(){return {SourceBuffer:this.c};};function gd(lm,mm,nm){lm.Xa&&lm.ka(mm,{type:lm.h.charAt(0),segment:nm,sourceBuffer:lm.c});}var hd=1/60;fd.prototype.destroy=function(){nd(this).catch(function(){});this.f&&this.f.destroy();this.b=this.a=this.f=null;this.v.destroy();this.l=this.c=this.v=null;};function id(lm,mm){for(var nm=lm.c.buffered,om=0;om<nm.length;++om){var pm=nm.start(om)-hd,qm=nm.end(om)+hd;if(mm>=pm&&mm<=qm)return nm.end(om)-mm;}return 0;}function jd(lm,mm,nm){mm=mm.endTime?mm.endTime-mm.startTime:1;var om=new fh();om.a=3;om.i=1000*mm;om.c=1000*lm.C;om.m=lm.F;om.j=nm;return om;}function kd(lm,mm,nm,om,pm){var qm;lm.g&&(qm=lm.g.getOperationLogger("fetch").setResource(mm.url.toString()).setLength(Math.round(1000*(mm.endTime-mm.startTime))));if(lm.a)return lm=Error("Cannot fetch ("+lm.h+"): previous operation not complete."),lm.type="stream",qm&&qm.setError(lm).log(),h.reject(lm);lm.a=new ad();nm!=lm.c.timestampOffset&&(lm.c.timestampOffset=nm);nm=jd(lm,mm,pm);var rm=qh(mm.url,nm,lm.B,lm.g);gd(lm,"SegmentFetching",mm);var sm=nh.prototype.f.bind(mm.url);lm.o&&lm.m&&(om=lm.o);var tm=0;om&&(lm.o=om,lm.m=false,bd(lm.a,function(){return [om.then(function(wm){wm.ma>tm&&(tm=wm.ma);return rd(this,wm,null);}.bind(this)),this.i.bind(this)];}.bind(lm)));bd(lm.a,ed(lm,function(){return [rm.then(function(wm){gd(this,"SegmentFetched",mm);wm.ma>tm&&(tm=wm.ma);this.B.getBandwidth();return rd(this,wm,mm);}.bind(this)),function(){gd(this,"SegmentFailed",mm);sm();return this.i();}.bind(this)];}));var um=0==lm.c.buffered.length&&0==lm.b.length,vm=null;bd(lm.a,function(){if(0==this.c.buffered.length){var wm=Error("Failed to buffer segment ("+this.h+").");wm.type="stream";return [h.reject(wm)];}um&&(wm=mm.startTime,vm=this.c.buffered.start(0)-wm);wm=ci(this.b,mm.startTime);0<=wm?this.b.splice(wm+1,0,mm):this.b.push(mm);}.bind(lm));return qd(lm).then(function(){qm&&qm.log();return h.resolve({$:vm,Cb:tm});}.bind(lm),function(wm){qm&&qm.setError(wm).log();return h.reject(wm);});}function ld(lm){if(lm.a)return lm=Error("Cannot clear ("+lm.h+"): previous operation not complete."),lm.type="stream",h.reject(lm);lm.a=new ad();bd(lm.a,function(){var mm;mm:if(0==this.c.buffered.length){mm=h.resolve();}else{try{this.c.remove(0,this.l.duration);}catch(nm){mm=h.reject(nm);break mm;}this.b=[];mm=this.f=new yc();};return [mm,this.i.bind(this)];}.bind(lm));return qd(lm);}function md(lm,mm){if(lm.a){var nm=Error("Cannot clearAfter ("+lm.h+"): previous operation not complete.");nm.type="stream";return h.reject(nm);}lm.a=new ad();bd(lm.a,function(){return [sd(this,mm),this.i.bind(this)];}.bind(lm));return qd(lm);}function nd(lm){lm.a?(lm=lm.a,lm.aa?lm=lm.aa:lm.c?(lm.b&&(lm.f=lm.b()),lm.aa=new yc(),lm=lm.aa):(lm.c=true,lm=h.resolve())):lm=h.resolve();return lm;}function od(lm){for(var mm=lm.currentTime,nm=mm,om=0;om<lm.buffered.length;om++)if(mm<=lm.buffered.start(om)){nm=lm.buffered.start(om);break;}return nm;}function pd(lm){for(var mm=lm.currentTime,nm=0;nm<lm.buffered.length;nm++)if(mm>=lm.buffered.start(nm)&&mm<=lm.buffered.end(nm)-.05)return false;return true;}function qd(lm){lm.a.start();return lm.a.Ea.then(ed(lm,function(){this.a=null;})).catch(ed(lm,function(mm){this.a=null;return h.reject(mm);}));}function rd(lm,mm,nm){var om;if(lm.g){var pm=nm?nm.url.toString():"init";om=lm.g.getOperationLogger("append").setResource(pm).setLength(mm.byteLength);}try{lm.c.appendBuffer(mm);}catch(qm){return om&&om.setError(qm).log(),h.reject(qm);}lm.f=new yc();lm.j=nm;return lm.f.then(function(){om&&om.log();},function(rm){om&&om.setError(rm).log();return h.reject(rm);});}function sd(lm,mm){if(0==lm.c.buffered.length)return h.resolve();var nm=ci(lm.b,mm);if(-1==nm||nm==lm.b.length-1)return h.resolve();try{lm.c.remove(lm.b[nm+1].startTime,lm.l.duration);}catch(om){return h.reject(om);}lm.b=lm.b.slice(0,nm+1);lm.f=new yc();return lm.f;}fd.prototype.i=function(){if(this.f){if("open"==this.l.readyState){var lm=Error("Previous operation aborted.");lm.type="abort";this.f.reject(lm);this.c.abort();this.A&&(this.m=true);this.f=new yc();}return this.f;}return h.resolve();};fd.prototype.G=function(){this.f&&(this.j&&(gd(this,"SegmentAppended",this.j),this.j=null),this.f.resolve(),this.f=null);};function td(lm){return String.fromCharCode.apply(null,lm);}m("shaka.util.Uint8ArrayUtils.toString",td);function ud(lm){for(var mm=new Uint8Array(lm.length),nm=0;nm<lm.length;++nm)mm[nm]=lm.charCodeAt(nm);return mm;}m("shaka.util.Uint8ArrayUtils.fromString",ud);m("shaka.util.Uint8ArrayUtils.toBase64",function(lm,mm){var nm=void 0==mm?true:mm,om=j.btoa(td(lm)).replace(/\+/g,"-").replace(/\//g,"_");return nm?om:om.replace(/=*$/,"");});function vd(lm){return ud(j.atob(lm.replace(/-/g,"+").replace(/_/g,"/")));}m("shaka.util.Uint8ArrayUtils.fromBase64",vd);m("shaka.util.Uint8ArrayUtils.fromHex",function(lm){for(var mm=new Uint8Array(lm.length/2),nm=0;nm<lm.length;nm+=2)mm[nm/2]=j.parseInt(lm.substr(nm,2),16);return mm;});function wd(lm){for(var mm="",nm=0;nm<lm.length;++nm){var om=lm[nm].toString(16);1==om.length&&(om="0"+om);mm+=om;}return mm;}m("shaka.util.Uint8ArrayUtils.toHex",wd);function xd(lm,mm){if(!lm&&!mm)return true;if(!lm||!mm||lm.length!=mm.length)return false;for(var nm=0;nm<lm.length;++nm)if(lm[nm]!=mm[nm])return false;return true;}function yd(){this.h=this.a="";this.l=false;this.o=this.m=null;this.i=this.g=false;this.j=this.f="";this.c=null;this.b=[];}function zd(lm,mm){var nm=new yd();nm.a=lm.a;nm.h=lm.h;nm.l=lm.l;nm.m=lm.m;nm.o=lm.o;nm.g=lm.g;nm.i=lm.i;nm.f=lm.f;nm.j=lm.j;nm.c=lm.c?new Uint8Array(lm.c.buffer):null;ae(nm,lm.b);ae(nm,mm.b);return nm;}function ae(lm,mm){var nm=lm.b.concat(mm.map(function(om){return {initData:new Uint8Array(om.initData.buffer),initDataType:om.initDataType};}));lm.b=eb(nm,be);}function be(lm,mm){return lm.initDataType==mm.initDataType&&xd(lm.initData,mm.initData);}function ce(lm,mm,nm,om){this.a=[];om&&this.a.push(om);}m("shaka.player.DrmSchemeInfo",ce);ce.DistinctiveIdentifier={OPTIONAL:0,REQUIRED:1};ce.PersistentState={OPTIONAL:0,REQUIRED:1};ce.createUnencrypted=function(){return new ce(0,0,0,null);};function de(lm,mm){try{var om=new fe(lm,mm);return h.resolve(om);}catch(nm){return h.reject(nm);}}function ee(lm){var mm=this.mediaKeys;mm&&mm!=lm&&he(mm,null);delete this.mediaKeys;(this.mediaKeys=lm)&&he(lm,this);return h.resolve();}function fe(lm,mm){this.a=this.keySystem=lm;var nm=true;"org.w3.clearkey"==lm&&(this.a="webkit-org.w3.clearkey",nm=false);var om=false,pm;pm=document.getElementsByTagName("video");pm=pm.length?pm[0]:document.createElement("video");for(var qm=0;qm<mm.length;++qm){var rm=mm[qm],sm={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:rm.initDataTypes,sessionTypes:["temporary"]},tm=false;if(rm.audioCapabilities)for(var um=0;um<rm.audioCapabilities.length;++um){var vm=rm.audioCapabilities[um];vm.contentType&&(tm=true,pm.canPlayType(vm.contentType.split(";")[0],this.a)&&(sm.audioCapabilities.push(vm),om=true));}if(rm.videoCapabilities)for(um=0;um<rm.videoCapabilities.length;++um)vm=rm.videoCapabilities[um],vm.contentType&&(tm=true,pm.canPlayType(vm.contentType,this.a)&&(sm.videoCapabilities.push(vm),om=true));tm||(om=pm.canPlayType("video/mp4",this.a)||pm.canPlayType("video/webm",this.a));"required"==rm.persistentState&&(nm?(sm.persistentState="required",sm.sessionTypes=["persistent-license"]):om=false);if(om){this.b=sm;return;}}nm="Unsupported keySystem";if("org.w3.clearkey"==lm||"com.widevine.alpha"==lm)nm="None of the requested configurations were supported.";nm=Error(nm);nm.name="NotSupportedError";nm.code=DOMException.NOT_SUPPORTED_ERR;throw nm;}fe.prototype.createMediaKeys=function(){var lm=new ge(this.a);return h.resolve(lm);};fe.prototype.getConfiguration=function(){return this.b;};function ge(lm){this.g=lm;this.b=null;this.a=new pc();this.c=[];this.f={};}function he(lm,mm){lm.b=mm;rc(lm.a);mm&&(qc(lm.a,mm,"webkitneedkey",lm.Wb.bind(lm)),qc(lm.a,mm,"webkitkeymessage",lm.Vb.bind(lm)),qc(lm.a,mm,"webkitkeyadded",lm.Tb.bind(lm)),qc(lm.a,mm,"webkitkeyerror",lm.Ub.bind(lm)));}k=ge.prototype;k.createSession=function(lm){var mm=lm||"temporary";if("temporary"!=mm&&"persistent-license"!=mm)throw new TypeError("Session type "+lm+" is unsupported on this platform.");lm=this.b||document.createElement("video");lm.src||(lm.src="about:blank");mm=new je(lm,this.g,mm);this.c.push(mm);return mm;};k.setServerCertificate=function(){return h.reject(Error("setServerCertificate not supported on this platform."));};k.Wb=function(lm){lm=yb({type:"encrypted",initDataType:"webm",initData:lm.initData});this.b.dispatchEvent(lm);};k.Vb=function(lm){var mm=ie(this,lm.sessionId);mm&&(lm=yb({type:"message",messageType:void 0==mm.keyStatuses.Na()?"licenserequest":"licenserenewal",message:lm.message}),mm.b&&(mm.b.resolve(),mm.b=null),mm.dispatchEvent(lm));};k.Tb=function(lm){if(lm=ie(this,lm.sessionId))le(lm,"usable"),lm.a&&lm.a.resolve(),lm.a=null;};k.Ub=function(lm){var mm=ie(this,lm.sessionId);if(mm){var nm=Error("EME v0.1b key error");nm.errorCode=lm.errorCode;nm.errorCode.systemCode=lm.systemCode;!lm.sessionId&&mm.b?(nm.method="generateRequest",45==lm.systemCode&&(nm.message="Unsupported session type."),mm.b.reject(nm),mm.b=null):lm.sessionId&&mm.a?(nm.method="update",mm.a.reject(nm),mm.a=null):(nm=lm.systemCode,lm.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?le(mm,"output-restricted"):1==nm?le(mm,"expired"):le(mm,"internal-error"));}};function ie(lm,mm){var nm=lm.f[mm];return nm?nm:(nm=lm.c.shift())?(nm.sessionId=mm,lm.f[mm]=nm):null;}function je(lm,mm,nm){tc.call(this,null);this.f=lm;this.h=false;this.a=this.b=null;this.c=mm;this.g=nm;this.sessionId="";this.expiration=NaN;this.closed=new yc();this.keyStatuses=new me();}n(je,tc);function ke(lm,mm,nm){if(lm.h)return h.reject(Error("The session is already initialized."));lm.h=true;var om;try{if("persistent-license"==lm.g){if(nm){om=ud("LOAD_SESSION|"+nm);}else{var qm=new Uint8Array(mm);om=ud("PERSISTENT|"+td(qm));}}else om=new Uint8Array(mm);}catch(pm){return h.reject(pm);}lm.b=new yc();try{lm.f.webkitGenerateKeyRequest(lm.c,om);}catch(rm){if("InvalidStateError"!=rm.name)return lm.b=null,h.reject(rm);setTimeout(function(){try{this.f.webkitGenerateKeyRequest(this.c,om);}catch(sm){this.b.reject(sm),this.b=null;}}.bind(lm),10);}return lm.b;}k=je.prototype;k.Ua=function(lm,mm){if(this.a){this.a.then(this.Ua.bind(this,lm,mm)).catch(this.Ua.bind(this,lm,mm));}else{this.a=lm;var nm,om;"webkit-org.w3.clearkey"==this.c?(nm=td(new Uint8Array(mm)),om=JSON.parse(nm),"oct"!=om.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),nm=vd(om.keys[0].k),om=vd(om.keys[0].kid)):(nm=new Uint8Array(mm),om=null);try{this.f.webkitAddKey(this.c,nm,om,this.sessionId);}catch(pm){this.a.reject(pm),this.a=null;}}};function le(lm,mm){lm.keyStatuses.Sa(mm);var nm=yb({type:"keystatuseschange"});lm.dispatchEvent(nm);}k.generateRequest=function(lm,mm){return ke(this,mm,null);};k.load=function(lm){return "persistent-license"==this.g?ke(this,null,lm):h.reject(Error("Not a persistent session."));};k.update=function(lm){var mm=new yc();this.Ua(mm,lm);return mm;};k.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;this.f.webkitCancelKeyRequest(this.c,this.sessionId);}this.closed.resolve();return this.closed;};k.remove=function(){return "persistent-license"!=this.g?h.reject(Error("Not a persistent session.")):this.close();};function me(){this.size=0;this.a=void 0;}var ne;k=me.prototype;k.Sa=function(lm){this.size=void 0==lm?0:1;this.a=lm;};k.Na=function(){return this.a;};k.forEach=function(lm){this.a&&lm(ne,this.a);};k.get=function(lm){if(this.has(lm))return this.a;};k.has=function(lm){var mm=ne;return this.a&&xd(new Uint8Array(lm),new Uint8Array(mm))?true:false;};function oe(lm){this.systemIds=[];this.cencKeyIds=[];this.a=[];lm=new hb(new DataView(lm.buffer));try{for(;jb(lm);){var nm=lm.a,om=lb(lm),pm=lb(lm);1==om?om=mb(lm):0==om&&(om=lm.b.byteLength-nm);if(1886614376!=pm){ob(lm,om-(lm.a-nm));}else{var qm=kb(lm);if(1<qm){ob(lm,om-(lm.a-nm));}else{ob(lm,3);var rm=wd(nb(lm)),sm=[];if(0<qm)for(var tm=lb(lm),um=0;um<tm;++um){var vm=wd(nb(lm));sm.push(vm);}var wm=lb(lm);ob(lm,wm);this.cencKeyIds.push.apply(this.cencKeyIds,sm);this.systemIds.push(rm);this.a.push({start:nm,end:lm.a-1});lm.a!=nm+om&&ob(lm,om-(lm.a-nm));}}}}catch(mm){}}function pe(lm,mm){try{var om=new qe(lm,mm);return h.resolve(om);}catch(nm){return h.reject(nm);}}function qe(lm,mm){this.keySystem=lm;for(var nm=false,om=0;om<mm.length;++om){var pm=mm[om],qm={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:pm.initDataTypes,sessionTypes:["temporary"]},rm=false;if(pm.audioCapabilities)for(var sm=0;sm<pm.audioCapabilities.length;++sm){var tm=pm.audioCapabilities[sm];if(tm.contentType){var rm=true,um=tm.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,um)&&(qm.audioCapabilities.push(tm),nm=true);}}if(pm.videoCapabilities)for(sm=0;sm<pm.videoCapabilities.length;++sm)tm=pm.videoCapabilities[sm],tm.contentType&&(rm=true,um=tm.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,um)&&(qm.videoCapabilities.push(tm),nm=true));rm||(nm=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4"));"required"==pm.persistentState&&(qm.persistentState="required",qm.sessionTypes=["persistent-license"]);if(nm){this.a=qm;return;}}nm=Error("Unsupported keySystem");nm.name="NotSupportedError";nm.code=DOMException.NOT_SUPPORTED_ERR;throw nm;}qe.prototype.createMediaKeys=function(){var lm=new se(this.keySystem);return h.resolve(lm);};qe.prototype.getConfiguration=function(){return this.a;};function re(lm){var mm=this.mediaKeys;mm&&mm!=lm&&te(mm,null);delete this.mediaKeys;return (this.mediaKeys=lm)?te(lm,this):h.resolve();}function se(lm){this.a=new MSMediaKeys(lm);this.b=new pc();}se.prototype.createSession=function(lm){if("temporary"!=(lm||"temporary"))throw new TypeError("Session type "+lm+" is unsupported on this platform.");return new ue(this.a);};se.prototype.setServerCertificate=function(){return h.reject(Error("setServerCertificate not supported on this platform."));};function te(lm,mm){function nm(){mm.msSetMediaKeys(om.a);mm.removeEventListener("loadedmetadata",nm);}rc(lm.b);if(!mm)return h.resolve();qc(lm.b,mm,"msneedkey",ve);var om=lm;try{return 1<=mm.readyState?mm.msSetMediaKeys(lm.a):mm.addEventListener("loadedmetadata",nm),h.resolve();}catch(pm){return h.reject(pm);}}function ue(lm){tc.call(this,null);this.c=null;this.g=lm;this.b=this.a=null;this.f=new pc();this.sessionId="";this.expiration=NaN;this.closed=new yc();this.keyStatuses=new ye();}n(ue,tc);k=ue.prototype;k.generateRequest=function(lm,mm){this.a=new yc();try{this.c=this.g.createSession("video/mp4",new Uint8Array(mm),null),qc(this.f,this.c,"mskeymessage",this.Kb.bind(this)),qc(this.f,this.c,"mskeyadded",this.Ib.bind(this)),qc(this.f,this.c,"mskeyerror",this.Jb.bind(this)),xe(this,"status-pending");}catch(nm){this.a.reject(nm);}return this.a;};k.load=function(){return h.reject(Error("MediaKeySession.load not yet supported"));};k.update=function(lm){this.b=new yc();try{this.c.update(new Uint8Array(lm));}catch(mm){this.b.reject(mm);}return this.b;};k.close=function(){try{this.c.close(),this.closed.resolve(),rc(this.f);}catch(lm){this.closed.reject(lm);}return this.closed;};k.remove=function(){return h.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"));};function ve(lm){var mm=lm.initData;if(mm){var nm=new oe(mm);if(1>=nm.a.length){lm=mm;}else{var om=[];for(lm=0;lm<nm.a.length;lm++)om.push(mm.subarray(nm.a[lm].start,nm.a[lm].end+1));mm=eb(om,we);for(lm=nm=0;lm<mm.length;lm++)nm+=mm[lm].length;nm=new Uint8Array(nm);for(lm=om=0;lm<mm.length;lm++)nm.set(mm[lm],om),om+=mm[lm].length;lm=nm;}}else lm=mm;lm=yb({type:"encrypted",initDataType:"cenc",initData:lm});this.dispatchEvent(lm);}function we(lm,mm){return xd(lm,mm);}k.Kb=function(lm){this.a&&(this.a.resolve(),this.a=null);lm=yb({type:"message",messageType:void 0==this.keyStatuses.Na()?"licenserequest":"licenserenewal",message:lm.message.buffer});this.dispatchEvent(lm);};k.Ib=function(){this.a?(this.a.resolve(),this.a=null):this.b&&(xe(this,"usable"),this.b.resolve(),this.b=null);};k.Jb=function(){var lm=Error("EME v20140218 key error");lm.errorCode=this.c.error;if(null!=this.a){this.a.reject(lm),this.a=null;}else if(null!=this.b){this.b.reject(lm),this.b=null;}else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:xe(this,"output-not-allowed");default:xe(this,"internal-error");}};function xe(lm,mm){lm.keyStatuses.Sa(mm);var nm=yb({type:"keystatuseschange"});lm.dispatchEvent(nm);}function ye(){this.size=0;this.a=void 0;}var ze;k=ye.prototype;k.Sa=function(lm){this.size=void 0==lm?0:1;this.a=lm;};k.Na=function(){return this.a;};k.forEach=function(lm){this.a&&lm(ze,this.a);};k.get=function(lm){if(this.has(lm))return this.a;};k.has=function(lm){var mm=ze;return this.a&&xd(new Uint8Array(lm),new Uint8Array(mm))?true:false;};function af(){Navigator.prototype.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(HTMLMediaElement.prototype.webkitGenerateKeyRequest?(ne=(new Uint8Array([0])).buffer,Navigator.prototype.requestMediaKeySystemAccess=de,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ee,j.MediaKeys=ge,j.MediaKeySystemAccess=fe):j.MSMediaKeys?(ze=(new Uint8Array([0])).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=re,j.MediaKeys=se,j.MediaKeySystemAccess=qe,Navigator.prototype.requestMediaKeySystemAccess=pe):(Navigator.prototype.requestMediaKeySystemAccess=la,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ma,j.MediaKeys=na,j.MediaKeySystemAccess=oa));}m("shaka.polyfill.MediaKeys.install",af);m("shaka.polyfill.installAll",function(){ha();ja();cb();ra();af();});var bf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function cf(lm){var mm;lm instanceof cf?(df(this,lm.Z),this.ha=lm.ha,this.P=lm.P,ef(this,lm.la),this.T=lm.T,ff(this,lm.a.clone()),this.ea=lm.ea):lm&&(mm=String(lm).match(bf))?(df(this,mm[1]||"",true),this.ha=gf(mm[2]||""),this.P=gf(mm[3]||"",true),ef(this,mm[4]),this.T=gf(mm[5]||"",true),ff(this,mm[6]||"",true),this.ea=gf(mm[7]||"")):this.a=new pf(null);}k=cf.prototype;k.Z="";k.ha="";k.P="";k.la=null;k.T="";k.ea="";k.toString=function(){var lm=[],mm=this.Z;mm&&lm.push(hf(mm,kf,true),":");if(mm=this.P){lm.push("//");var nm=this.ha;nm&&lm.push(hf(nm,kf,true),"@");lm.push(encodeURIComponent(mm).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));mm=this.la;null!=mm&&lm.push(":",String(mm));}if(mm=this.T)this.P&&"/"!=mm.charAt(0)&&lm.push("/"),lm.push(hf(mm,"/"==mm.charAt(0)?mf:lf,true));(mm=this.a.toString())&&lm.push("?",mm);(mm=this.ea)&&lm.push("#",hf(mm,of));return lm.join("");};k.resolve=function(lm){var mm=this.clone();"data"===mm.Z&&(mm=new cf());var nm=!!lm.Z;nm?df(mm,lm.Z):nm=!!lm.ha;nm?mm.ha=lm.ha:nm=!!lm.P;nm?mm.P=lm.P:nm=null!=lm.la;var om=lm.T;if(nm){ef(mm,lm.la);}else if(nm=!!lm.T){if("/"!=om.charAt(0))if(this.P&&!this.T){om="/"+om;}else{var pm=mm.T.lastIndexOf("/");-1!=pm&&(om=mm.T.substr(0,pm+1)+om);}if(".."==om||"."==om){om="";}else if(-1!=om.indexOf("./")||-1!=om.indexOf("/.")){for(var pm=0==om.lastIndexOf("/",0),om=om.split("/"),qm=[],rm=0;rm<om.length;){var sm=om[rm++];"."==sm?pm&&rm==om.length&&qm.push(""):".."==sm?((1<qm.length||1==qm.length&&""!=qm[0])&&qm.pop(),pm&&rm==om.length&&qm.push("")):(qm.push(sm),pm=true);}om=qm.join("/");}}nm?mm.T=om:nm=""!==lm.a.toString();nm?ff(mm,lm.a.clone()):nm=!!lm.ea;nm&&(mm.ea=lm.ea);return mm;};k.clone=function(){return new cf(this);};function df(lm,mm,nm){lm.Z=nm?gf(mm,true):mm;lm.Z&&(lm.Z=lm.Z.replace(/:$/,""));}function ef(lm,mm){if(mm){mm=Number(mm);if(isNaN(mm)||0>mm)throw Error("Bad port number "+mm);lm.la=mm;}else lm.la=null;}function ff(lm,mm,nm){mm instanceof pf?lm.a=mm:(nm||(mm=hf(mm,nf)),lm.a=new pf(mm));}function gf(lm,mm){return lm?mm?decodeURI(lm):decodeURIComponent(lm):"";}function hf(lm,mm,nm){return "string"==typeof lm?(lm=encodeURI(lm).replace(mm,jf),nm&&(lm=lm.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),lm):null;}function jf(lm){lm=lm.charCodeAt(0);return "%"+(lm>>4&15).toString(16)+(lm&15).toString(16);}var kf=/[#\/\?@]/g,lf=/[\#\?:]/g,mf=/[\#\?]/g,nf=/[\#\?@]/g,of=/#/g;function pf(lm){this.b=lm||null;}pf.prototype.a=null;pf.prototype.c=null;function qf(lm,mm,nm){if(!lm.a&&(lm.a={},lm.c=0,lm.b))for(var om=lm.b.split("&"),pm=0;pm<om.length;pm++){var qm=om[pm].indexOf("="),rm=null,sm=null;0<=qm?(rm=om[pm].substring(0,qm),sm=om[pm].substring(qm+1)):rm=om[pm];rm=decodeURIComponent(rm.replace(/\+/g," "));sm=sm||"";qf(lm,rm,decodeURIComponent(sm.replace(/\+/g," ")));}lm.b=null;(om=lm.a.hasOwnProperty(mm)&&lm.a[mm])||(lm.a[mm]=om=[]);om.push(nm);lm.c++;}pf.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return "";var lm=[],mm;for(mm in this.a)for(var nm=encodeURIComponent(mm),om=this.a[mm],pm=0;pm<om.length;pm++){var qm=nm;""!==om[pm]&&(qm+="="+encodeURIComponent(om[pm]));lm.push(qm);}return this.b=lm.join("&");};pf.prototype.clone=function(){var lm=new pf();lm.b=this.b;if(this.a){var mm={},nm;for(nm in this.a)mm[nm]=this.a[nm].concat();lm.a=mm;lm.c=this.c;}return lm;};function rf(lm,mm,nm){lm=(new DOMParser()).parseFromString(lm,"text/xml");if(!lm)return null;"string"===typeof mm&&(mm=[new cf(mm)]);mm=mm||[new cf("")];nm=nm||[new cf("")];return qg({tb:mm,u:nm},lm,sf);}m("shaka.dash.mpd.parseMpd",rf);function sf(){this.id=this.url=null;this.type="static";this.b=this.j=this.u=this.tb=null;this.h=5;this.f=this.c=this.g=null;this.i=1;this.a=[];}function tf(){this.g=this.f=this.c=this.u=this.a=this.start=this.id=null;this.b=[];}function uf(){this.i=this.b=this.height=this.width=this.contentType=this.lang=this.group=this.id=null;this.c=false;this.h=this.g=this.f=this.u=null;this.j=[];this.a=[];}function vf(){this.value=null;}function wf(){this.contentType=this.lang=this.id=null;}function xf(){this.data=null;}function yf(){this.a=this.b=this.h=this.u=this.g=this.fbQualityClass=this.fbQualityLabel=this.i=this.f=this.height=this.width=this.bandwidth=this.lang=this.id=null;this.c=[];}function zf(){this.b=this.a=this.c=this.f=null;}function ag(){this.parsedPssh=this.psshBox=null;}function bg(){this.url=null;}function cg(){this.url=null;}function dg(){this.u=null;this.h=1;this.c=this.b=this.f=this.a=this.g=null;}dg.prototype.clone=function(){var lm=new dg();lm.u=ug(this.u);lm.h=this.h;lm.g=this.g;lm.a=vg(this.a);lm.f=vg(this.f);lm.b=vg(this.b);lm.c=vg(this.c);return lm;};function eg(){this.a=this.url=null;}eg.prototype.clone=function(){var lm=new eg();lm.url=ug(this.url);lm.a=vg(this.a);return lm;};function fg(){this.a=this.url=null;}fg.prototype.clone=function(){var lm=new fg();lm.url=ug(this.url);lm.a=vg(this.a);return lm;};function gg(){this.u=null;this.a=1;this.c=this.g=null;this.i=0;this.h=null;this.b=[];this.f=null;}gg.prototype.clone=function(){var lm=new gg();lm.u=ug(this.u);lm.a=this.a;lm.g=this.g;lm.c=this.c;lm.i=this.i;lm.h=vg(this.h);lm.b=ug(this.b)||[];lm.f=vg(this.f);return lm;};function hg(){this.a=this.b=null;}hg.prototype.clone=function(){var lm=new hg();lm.b=ug(this.b);lm.a=vg(this.a);return lm;};function ig(){this.a=1;this.b=this.i=null;this.j=0;this.c=this.g=this.f=this.h=null;}ig.prototype.clone=function(){var lm=new ig();lm.a=this.a;lm.i=this.i;lm.b=this.b;lm.j=this.j;lm.h=this.h;lm.f=this.f;lm.g=this.g;lm.c=vg(this.c);return lm;};function jg(){this.a=[];}jg.prototype.clone=function(){var lm=new jg();lm.a=ug(this.a)||[];return lm;};function kg(){this.b=this.a=this.startTime=null;}kg.prototype.clone=function(){var lm=new kg();lm.startTime=this.startTime;lm.a=this.a;lm.b=this.b;return lm;};function lg(lm,mm){this.ja=lm;this.end=mm;}lg.prototype.clone=function(){return new lg(this.ja,this.end);};sf.TAG_NAME="MPD";tf.TAG_NAME="Period";uf.TAG_NAME="AdaptationSet";vf.TAG_NAME="Role";wf.TAG_NAME="ContentComponent";yf.TAG_NAME="Representation";xf.TAG_NAME="FBInitializationBinary";zf.TAG_NAME="ContentProtection";ag.TAG_NAME="cenc:pssh";bg.TAG_NAME="BaseURL";cg.TAG_NAME="Location";dg.TAG_NAME="SegmentBase";eg.TAG_NAME="RepresentationIndex";fg.TAG_NAME="Initialization";gg.TAG_NAME="SegmentList";hg.TAG_NAME="SegmentURL";ig.TAG_NAME="SegmentTemplate";jg.TAG_NAME="SegmentTimeline";kg.TAG_NAME="S";sf.prototype.parse=function(lm,mm){this.url=lm.tb;this.id=wg(mm,"id",dh);this.type=wg(mm,"type",dh)||"static";this.b=wg(mm,"mediaPresentationDuration",yg);this.h=wg(mm,"minBufferTime",yg,this.h);this.g=wg(mm,"minimumUpdatePeriod",yg,this.g);this.c=wg(mm,"availabilityStartTime",xg,this.c);this.f=wg(mm,"timeShiftBufferDepth",yg,this.f);this.f=null;this.i=wg(mm,"suggestedPresentationDelay",yg,this.i);var nm=lm.u,om=sg(this,mm,bg);this.u=ng(nm,om);if(om=qg(this,mm,cg))this.j=og(nm,om.url);this.a=sg(this,mm,tf);};tf.prototype.parse=function(lm,mm){this.id=wg(mm,"id",dh);this.start=wg(mm,"start",yg);this.a=wg(mm,"duration",yg);var nm=sg(this,mm,bg);this.u=ng(lm.u,nm);this.c=qg(this,mm,dg);this.f=qg(this,mm,gg);this.g=qg(this,mm,ig);this.b=sg(this,mm,uf);mg(this);};function mg(lm){for(var mm=[],nm=0;nm<lm.b.length;++nm){var om=lm.b[nm];null!=om.group&&(mm[om.group]=true);}for(nm=0;nm<lm.b.length;++nm)if(om=lm.b[nm],null==om.group){for(var pm=1;1==mm[pm];)++pm;mm[pm]=true;om.group=pm;}}uf.prototype.parse=function(lm,mm){var nm=qg(this,mm,wf)||{},om=qg(this,mm,vf);this.id=wg(mm,"id",dh);this.group=wg(mm,"group",ch);this.lang=wg(mm,"lang",dh,nm.lang);this.contentType=wg(mm,"contentType",dh,nm.contentType);this.width=wg(mm,"width",bh);this.height=wg(mm,"height",bh);this.b=wg(mm,"mimeType",dh);this.i=wg(mm,"codecs",dh);this.c=om&&"main"==om.value;this.lang&&(this.lang=dc(this.lang));nm=sg(this,mm,bg);this.u=ng(lm.u,nm);this.j=sg(this,mm,zf);!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]);this.f=lm.c?pg(this,mm,lm.c):qg(this,mm,dg);this.g=lm.f?pg(this,mm,lm.f):qg(this,mm,gg);this.h=lm.g?pg(this,mm,lm.g):qg(this,mm,ig);this.a=sg(this,mm,yf);!this.b&&this.a.length&&(this.b=this.a[0].f,!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]));};vf.prototype.parse=function(lm,mm){this.value=wg(mm,"value",dh);};wf.prototype.parse=function(lm,mm){this.id=wg(mm,"id",dh);this.lang=wg(mm,"lang",dh);this.contentType=wg(mm,"contentType",dh);this.lang&&(this.lang=dc(this.lang));};xf.prototype.parse=function(lm,mm){var nm=tg(mm);null!=nm&&(this.data=vd(nm).buffer);};yf.prototype.parse=function(lm,mm){this.id=wg(mm,"id",dh);this.bandwidth=wg(mm,"bandwidth",bh);this.width=wg(mm,"width",bh,lm.width);this.height=wg(mm,"height",bh,lm.height);this.f=wg(mm,"mimeType",dh,lm.b);this.i=wg(mm,"codecs",dh,lm.i);this.fbQualityLabel=wg(mm,"FBQualityLabel",dh);this.fbQualityClass=wg(mm,"FBQualityClass",dh);this.lang=lm.lang;var nm=sg(this,mm,bg);this.u=ng(lm.u,nm);this.g=qg(this,mm,xf);this.c=sg(this,mm,zf);this.h=lm.f?pg(this,mm,lm.f):qg(this,mm,dg);this.b=lm.g?pg(this,mm,lm.g):qg(this,mm,gg);this.a=lm.h?pg(this,mm,lm.h):qg(this,mm,ig);this.c=this.c.concat(lm.j);};zf.prototype.parse=function(lm,mm){this.f=mm;this.c=wg(mm,"schemeIdUri",dh);var nm=wg(mm,"cenc:default_KID",dh);nm&&(this.b=nm.replace(/[-]/g,""));this.a=qg(this,mm,ag);};ag.prototype.parse=function(lm,mm){var nm=tg(mm);if(nm){this.psshBox=vd(nm);try{this.parsedPssh=new oe(this.psshBox);}catch(om){if(!(om instanceof RangeError))throw om;}}};bg.prototype.parse=function(lm,mm){this.url=tg(mm);};cg.prototype.parse=function(lm,mm){this.url=tg(mm);};dg.prototype.parse=function(lm,mm){this.u=lm.u||this.u;this.h=wg(mm,"timescale",bh,this.h);this.g=wg(mm,"presentationTimeOffset",ch,this.g);this.a=wg(mm,"indexRange",zg,this.a);this.f=wg(mm,"FBFirstSegmentRange",zg,this.f);this.b=qg(this,mm,eg)||this.b;this.c=qg(this,mm,fg)||this.c;};eg.prototype.parse=function(lm,mm){var nm=wg(mm,"sourceURL",dh);this.url=og(lm.u,nm);this.a=wg(mm,"range",zg,vg(lm.a));};fg.prototype.parse=function(lm,mm){var nm=wg(mm,"sourceURL",dh);this.url=og(lm.u,nm);this.a=wg(mm,"range",zg);};gg.prototype.parse=function(lm,mm){this.u=lm.u||this.u;this.a=wg(mm,"timescale",bh,this.a);this.g=wg(mm,"presentationTimeOffset",ch,this.g);this.c=wg(mm,"duration",bh,this.c);var nm=wg(mm,"startNumber",bh);null!=nm&&(this.i=nm);this.h=qg(this,mm,fg)||this.h;this.b=(nm=sg(this,mm,hg))&&0<nm.length?nm:this.b;this.f=qg(this,mm,jg)||this.f;};hg.prototype.parse=function(lm,mm){var nm=wg(mm,"media",dh);this.b=og(lm.u,nm);this.a=wg(mm,"mediaRange",zg);};ig.prototype.parse=function(lm,mm){this.a=wg(mm,"timescale",bh,this.a);this.i=wg(mm,"presentationTimeOffset",ch,this.i);this.b=wg(mm,"duration",bh,this.b);var nm=wg(mm,"startNumber",ch);null!=nm&&(this.j=nm);this.h=wg(mm,"media",dh,this.h);this.f=wg(mm,"index",dh,this.f);this.g=wg(mm,"initialization",dh,this.g);this.c=qg(this,mm,jg)||this.c;};jg.prototype.parse=function(lm,mm){this.a=sg(this,mm,kg);};kg.prototype.parse=function(lm,mm){this.startTime=wg(mm,"t",ch);this.a=wg(mm,"d",ch);this.b=wg(mm,"r",ah);};function ng(lm,mm){if(!mm||0===mm.length)return lm;for(var nm=[],om=0;om<mm.length;om++){var pm=mm[om].url;null==lm||0===lm.length?nm.push(new cf(pm)):(pm=og(lm.slice(0,1),pm),nm.push(pm[0]));}return nm;}function og(lm,mm){if(!mm)return lm;var nm=new cf(mm);return lm?lm.map(function(om){return om.resolve(nm);}):[nm];}function pg(lm,mm,nm){var om=vg(nm);(mm=rg(mm,nm.constructor.TAG_NAME))&&om.parse(lm,mm);return om;}function qg(lm,mm,nm){var om=null;if(mm=rg(mm,nm.TAG_NAME))om=new nm(),om.parse(lm,mm);return om;}function rg(lm,mm){for(var nm=null,om=0;om<lm.childNodes.length;om++)if(lm.childNodes[om].tagName==mm){if(nm)return null;nm=lm.childNodes[om];}return nm;}function sg(lm,mm,nm){for(var om=[],pm=0;pm<mm.childNodes.length;pm++)if(mm.childNodes[pm].tagName==nm.TAG_NAME){var qm=new nm();qm.parse.call(qm,lm,mm.childNodes[pm]);om.push(qm);}return om;}function tg(lm){lm=lm.firstChild;return lm.nodeType!=Node.TEXT_NODE?null:lm.nodeValue;}function ug(lm){return lm?lm.map(function(mm){return mm.clone();}):null;}function vg(lm){return lm?lm.clone():null;}function wg(lm,mm,nm,om){lm=nm(lm.getAttribute(mm));return null!=lm?lm:void 0!==om?om:null;}function xg(lm){if(!lm)return null;lm=Date.parse(lm);return isNaN(lm)?null:Math.floor(lm/1000);}function yg(lm){if(!lm)return null;var mm=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(lm);if(!mm)return null;lm=0;var nm=ch(mm[1]);nm&&(lm+=31536000*nm);(nm=ch(mm[2]))&&(lm+=2592000*nm);(nm=ch(mm[3]))&&(lm+=86400*nm);(nm=ch(mm[4]))&&(lm+=3600*nm);(nm=ch(mm[5]))&&(lm+=60*nm);mm=j.parseFloat(mm[6]);(mm=isNaN(mm)?null:mm)&&(lm+=mm);return lm;}function zg(lm){var mm=/([0-9]+)-([0-9]+)/.exec(lm);if(!mm)return null;lm=ch(mm[1]);if(null==lm)return null;mm=ch(mm[2]);return null==mm?null:new lg(lm,mm);}function ah(lm){lm=j.parseInt(lm,10);return isNaN(lm)?null:lm;}function bh(lm){lm=j.parseInt(lm,10);return 0<lm?lm:null;}function ch(lm){lm=j.parseInt(lm,10);return 0<=lm?lm:null;}function dh(lm){return lm;}function eh(lm,mm){this.url=lm;this.b=mm||new fh();this.g=this.j=this.h=0;this.a=null;this.c=new yc();this.f=null;}m("shaka.util.AjaxRequest",eh);function fh(){this.body=null;this.a=1;this.i=1000;this.c=0;this.method="GET";this.g="arraybuffer";this.b={};this.h=this.l=false;this.f=this.m=null;this.j=false;}var gh=true;function hh(lm){ih(lm);lm.b.body=null;lm.c.destroy();lm.c=null;lm.f=null;}function ih(lm){lm.a&&(lm.a.onload=null,lm.a.onreadystatechange=null,lm.a.onerror=null,lm.a.ontimeout=null);lm.a=null;}var jh=/(.*)\.(xx|fna)\.fbcdn\.net/,kh=/livestream-lookaside\.facebook\.com$/;eh.prototype.i=function(){if(this.a)return this.c;if(0==this.url.lastIndexOf("data:",0)){var lm=this.url.split(":")[1].split(";").pop().split(","),mm=lm.pop(),mm="base64"==lm.pop()?j.atob(mm.replace(/-/g,"+").replace(/_/g,"/")):j.decodeURIComponent(mm);"arraybuffer"==this.b.g&&(mm=ud(mm).buffer);lm=JSON.parse(JSON.stringify(new XMLHttpRequest()));lm.response=mm;lm.responseText=mm.toString();mm=this.c;mm.resolve(lm);hh(this);return mm;}if(0==this.url.lastIndexOf("idb:",0))return this.A();this.h++;this.j=Date.now();this.g||(this.g=this.b.i);this.a=new XMLHttpRequest();var nm=this.url,lm=new cf(nm);gh&&(this.f&&!this.f.supportsCaching()||this.b.h)&&qf(lm.a,"_",Date.now());nm=jh.test(nm);if(null!=this.b.f&&nm){var om=this.b.f,pm=lm.a;qf(pm,"_nc_p_n",om.f);null!=om.c?qf(pm,"_nc_p_ts",om.c):null!=om.b&&qf(pm,"_nc_p_o",om.b);null!=om.a&&qf(pm,"_nc_p_rid",om.a);}1==this.b.j&&nm&&qf(lm.a,"_nc_playing",1);nm=lm.toString();lm=kh.test(lm.P);this.a.open(this.b.method,nm,true);this.a.responseType=this.b.g;this.a.timeout=this.b.c;this.a.withCredentials=this.b.l||lm;this.a.onload=this.l.bind(this);this.a.onreadystatechange=this.m.bind(this);this.a.onerror=this.v.bind(this);this.a.ontimeout=this.o.bind(this);for(mm in this.b.b)this.a.setRequestHeader(mm,this.b.b[mm]);this.a.send(this.b.body);return this.c;};eh.prototype.send=eh.prototype.i;function lh(lm,mm,nm){mm=Error(mm);mm.type=nm;mm.status=lm.a.status;mm.url=lm.url;mm.method=lm.b.method;mm.body=lm.b.body;mm.ic=lm.a;return mm;}eh.prototype.l=function(lm){this.f&&this.f.sample(Date.now()-this.j,lm.loaded);lm=[403];200<=this.a.status&&299>=this.a.status?(this.c.resolve(this.a),hh(this)):this.h<this.b.a&&-1===lm.indexOf(this.a.status)?mh(this):(lm=lh(this,"HTTP error.","net"),this.c.reject(lm),hh(this));};eh.prototype.m=function(){if(this.a.readyState==XMLHttpRequest.HEADERS_RECEIVED&&(this.a.ma=Date.now()-this.j,this.b.h)){var lm=Date.parse(this.a.getResponseHeader("Date"));lm&&(gb=lm-Date.now());}};eh.prototype.v=function(){var lm=lh(this,"Network failure.","net");this.c.reject(lm);hh(this);};eh.prototype.o=function(){if(this.h<this.b.a){mh(this);}else{var lm=lh(this,"Request timed out.","net");this.c.reject(lm);hh(this);}};function mh(lm){ih(lm);j.setTimeout(lm.i.bind(lm),lm.g*(1+.5*(2*Math.random()-1)));lm.g*=2;}function nh(lm,mm,nm,om){this.b=mm;this.h=nm||0;this.g=null!=om?om:null;this.c=this.a=null;this.j=lm;this.i=null;}var oh;m("shaka.util.FailoverUri",nh);function ph(lm,mm){return lm&&0!==lm.length?lm.map(function(nm){return nm.resolve(mm);}):[mm];}nh.setPrefetchCacheValueGetter=function(lm){oh=lm;};function qh(lm,mm,nm,om){if(lm.a)return lm.a;lm.a=rh(lm,0,mm||new fh(),nm,om);return lm.a;}nh.prototype.f=function(){if(this.c){this.a=null;var lm=this.c;if(lm.a&&lm.a.readyState!=XMLHttpRequest.DONE){lm.a.abort();var mm=lh(lm,"Request aborted.","aborted");lm.c.reject(mm);hh(lm);}this.i=this.c=null;}};function rh(lm,mm,nm,om,pm){var qm=lm.b[mm].toString(),rm;pm&&(rm=pm.getOperationLogger("request").setResource(qm));if(lm.h||lm.g)pm=lm.b[mm].P,!pm.endsWith("fbcdn.net")||pm.startsWith("interncache")||pm.endsWith("ak.fbcdn.net")?nm.b.Range="bytes="+(lm.h+"-"+(null!=lm.g?lm.g:"")):qm+="&bytestart="+lm.h+"&byteend="+lm.g;lm.j&&(qm=lm.j(qm,nm.b)||qm);pm=null;oh&&(pm=oh(qm));pm||(lm.c=new eh(qm,nm),om&&(lm.c.f=om),pm=lm.c.i());qm=pm.then(ed(lm,function(sm){this.i=this.c=this.a=null;this.i=sm.a?new cf(sm.a):this.b[mm];sm.response.ma=sm.ma;rm&&rm.setLength(sm.response.byteLength||sm.response.length).log();return h.resolve(sm.response);}));return qm=qm.catch(ed(lm,function(sm){if(this.a&&mm+1<this.b.length)return this.a=rh(this,mm+1,nm,om);this.a=this.c=null;rm&&rm.setError(sm).log();return h.reject(sm);}));}nh.prototype.clone=function(){return new nh(this.j,this.b.map(function(lm){return lm.clone();}),this.h,this.g);};nh.prototype.toString=function(){return this.b[0].toString();};function sh(lm,mm,nm){this.a=new fh();this.a.g="text";this.a.a=3;this.a.c=1000*(null!=mm?mm:0);nm&&(this.a.f=nm);this.a.h=true;this.b=lm;}function th(lm,mm){var nm=lm.b;return qh(nm,lm.a,null,mm).then(function(om){om instanceof ArrayBuffer&&(om=String.fromCharCode.apply(null,new Uint8Array(om)));if(om=rf(om,nm.b,[nm.i]))return h.resolve(om);om=Error("MPD parse failure.");om.type="dash";return h.reject(om);});}function uh(lm){this.f=lm;this.a=this.b=this.c=null;}function vh(lm,mm,nm,om){for(var pm=mm.a,qm=[],rm=0;rm<om;++rm){var sm=rm+nm,tm=(sm-1)*pm.b,um=tm/pm.a,vm=(tm+pm.b)/pm.a,sm=wh(lm,mm,pm.j+sm-1,tm);if(!sm)return null;qm.push(new ai(um,vm,sm,tm));}return qm;}function wh(lm,mm,nm,om){if(!mm.a)return null;var pm=mm.a.h;if(!pm)return mm.u?new nh(lm,mm.u,0,null):null;nm=xh(pm,mm.id,nm,mm.bandwidth,om);if(!nm)return null;mm=ph(mm.u,nm);return new nh(lm,mm,0,null);}function xh(lm,mm,nm,om,pm){var qm={RepresentationID:mm,Number:nm,Bandwidth:om,Time:pm};lm=lm.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(sm,tm,um){if("$$"==sm)return "$";var vm=qm[tm];if(null==vm)return sm;"RepresentationID"==tm&&um&&(um=void 0);sm=vm.toString();um=j.parseInt(um,10)||1;um=Math.max(0,um-sm.length);return Array(um+1).join("0")+sm;});try{return new cf(lm);}catch(rm){if(rm instanceof URIError)return null;throw rm;}}function yh(lm,mm,nm){var om=0;mm*=nm;lm=lm.a;nm=[];for(var pm=0;pm<lm.length&&lm[pm].a;++pm){var qm=lm[pm].startTime,qm=null!=qm?qm:om,rm=lm[pm].b||0;0>rm&&(rm=lm[pm].a,rm=pm+1===lm.length?Math.ceil((lm[0].startTime+mm-qm)/rm)-1:Math.ceil((lm[pm+1].startTime-qm)/rm)-1);0<nm.length&&qm!=om&&(nm[nm.length-1].end=qm);for(var sm=0;sm<=rm;++sm)om=qm+lm[pm].a,nm.push({start:qm,end:om}),qm=om;}return nm;}function zh(lm,mm){this.a=lm;this.b=mm||null;}zh.prototype.destroy=function(){this.a&&(this.a.f(),this.a=null);this.b=null;};zh.prototype.create=function(lm){return this.b||!this.a?h.resolve(this.b):qh(this.a,null,null,lm);};function ai(lm,mm,nm,om){this.startTime=lm;this.endTime=mm;this.url=nm;this.a=null!=om?om:null;}function bi(lm,mm,nm){return new ai(mm,nm,lm.url,null!=lm.a?lm.a:void 0);}function ci(lm,mm){for(var nm=lm.length-1;0<=nm;--nm){var om=lm[nm];if(mm>=om.startTime&&(null==om.endTime||mm<om.endTime))return nm;}return -1;}function di(lm,mm){return lm.map(function(nm){return bi(nm,nm.startTime+mm,null!=nm.endTime?nm.endTime+mm:null);});}function ei(){}ei.prototype.parse=function(lm,mm,nm,om,pm){var qm=null;try{lm:{var sm=[],tm=new hb(lm),um=lb(tm);if(1936286840!=lb(tm)){qm=null;}else{1==um&&(um=mb(tm));var vm=kb(tm);ob(tm,3);ob(tm,4);var wm=lb(tm);if(0==wm){qm=null;}else{var xm,ym;0==vm?(xm=lb(tm),ym=lb(tm)):(xm=mb(tm),ym=mb(tm));ob(tm,2);var zm=tm.b.getUint16(tm.a,tm.c);tm.a+=2;lm=xm;mm=mm+um+ym;for(ym=um=0;ym<zm;ym++){var an=lb(tm);xm=(an&2147483648)>>>31;var vm=an&2147483647,bn=lb(tm);lb(tm);if(1==xm){qm=null;break lm;}var cn;cn=0==ym&&pm?pm:new nh(om,nm,mm,mm+vm-1);xm=lm/wm;var dn=(lm+bn)/wm;0===ym&&(um=xm);sm.push(new ai(xm-um,dn-um,cn));lm+=bn;mm+=vm;}qm=sm;}}};}catch(rm){if(!(rm instanceof RangeError))throw rm;}return qm;};function fi(lm){this.a=lm;this.$=0;this.g=[];this.Va=false;}fi.prototype.G=function(){return !!this.g[this.g.length-1];};fi.prototype.lastPollHadChanges=fi.prototype.G;fi.prototype.D=function(){var lm=this.g,mm=lm.lastIndexOf(true);if(1>mm)return 0;lm=lm.lastIndexOf(true,mm-1);return 0>lm?0:mm-lm-1;};fi.prototype.getFetchesBetweenRecentChanges=fi.prototype.D;fi.prototype.C=function(){return Math.floor((this.g.length-1-this.g.lastIndexOf(true))/2);};fi.prototype.getConsecutiveUpdatesWithoutChanges=fi.prototype.C;fi.prototype.B=function(){return this.g.length-1-this.g.lastIndexOf(false);};fi.prototype.getConsecutiveUpdatesWithChanges=fi.prototype.B;fi.prototype.destroy=function(){this.a=null;};fi.prototype.length=function(){return this.a.length;};fi.prototype.F=function(){return (this.a||[]).slice();};fi.prototype.getSegments=fi.prototype.F;function gi(lm){if(0==lm.a.length)throw new RangeError("SegmentIndex: There is no first SegmentReference.");return lm.a[0];}fi.prototype.w=function(){if(0==this.a.length)throw new RangeError("SegmentIndex: There is no last SegmentReference.");return this.a[this.a.length-1];};fi.prototype.last=fi.prototype.w;k=fi.prototype;k.get=function(lm){if(0>lm||lm>=this.a.length)throw new RangeError("SegmentIndex: The specified index is out of range.");return this.a[lm];};k.oa=function(lm){lm=ci(this.a,lm);return 0<=lm?this.a[lm]:null;};k.Pa=function(lm){hi(this,lm);return true;};function hi(lm,mm){lm.$!=mm.$&&(mm=new fi(di(mm.a,lm.$-mm.$)));if(0==lm.length()){lm.a=mm.a.slice(0);}else if(0!=mm.length()&&null!=lm.w().endTime)if(null!=mm.w().endTime&&mm.w().endTime<lm.w().endTime){lm.Va=true;}else{lm.Va=false;if(lm.w().endTime<=gi(mm).startTime){var nm=bi(lm.w(),lm.w().startTime,gi(mm).startTime),nm=lm.a.slice(0,-1).concat([nm]);}else{var om;for(om=0;om<lm.a.length&&!(lm.a[om].endTime>=gi(mm).startTime);++om);lm.a[om].startTime<gi(mm).startTime?(nm=bi(lm.a[om],lm.a[om].startTime,gi(mm).startTime),nm=lm.a.slice(0,om).concat([nm])):(gi(lm).startTime>gi(mm).startTime||gi(mm),nm=lm.a.slice(0,om));}lm.a=nm.concat(mm.a);}}k.na=function(lm){var mm=lm-this.$;if(0==mm)return 0;this.a=di(this.a,mm);this.$=lm;return mm;};k.La=function(){return 0<this.length()?{start:gi(this).startTime,end:this.w().endTime}:{start:0,end:0};};function ii(lm,mm,nm,om){fi.call(this,lm);this.i=mm;this.A=nm;this.h=om;this.j=this.i.b||this.i.a.reduce(function(pm,qm){return null==qm.a?NaN:pm+qm.a;},0)||0;this.b=this.o=this.f=null;ji(this);}n(ii,fi);ii.prototype.destroy=function(){this.A=this.i=null;fi.prototype.destroy.call(this);};ii.prototype.oa=function(lm){li(this,fb()/1000);return fi.prototype.oa.call(this,lm);};ii.prototype.Pa=function(lm){if(!(lm instanceof ii))return false;hi(this,lm);this.j=Math.max(this.j,lm.j);null==this.f?(this.h=lm.h,ji(this)):mi(this);return true;};function ji(lm){mi(lm);if(0!=lm.length()){lm.length();var mm=null!=lm.w().endTime?lm.w().endTime:lm.w().startTime;if(lm.i.c>lm.h){lm.f=mm;}else{var nm=lm.h-(lm.i.c+lm.A.start);0>nm?lm.f=mm:nm<Math.max(lm.w().startTime,lm.w().endTime||0)?(lm.w(),lm.f=mm):lm.f=nm;}lm.o=lm.w().startTime;lm.b=gi(lm).startTime;}}ii.prototype.na=function(lm){lm=fi.prototype.na.call(this,lm);Math.min.apply(null,this.a.filter(function(mm){return null!=mm.endTime;}).map(function(mm){return mm.endTime-mm.startTime;}));null!=this.f&&(this.o+=lm,this.b+=lm,this.f+=lm);return lm;};ii.prototype.La=function(){return ki(this,fb()/1000);};function ki(lm,mm){li(lm,mm);if(null==lm.f||null==lm.o||null==lm.b)return {start:0,end:0};var nm=Number.POSITIVE_INFINITY;lm.j&&(nm=lm.j);var om=mm-lm.h,pm=lm.f+om;null!=lm.i.f&&(pm=pm-lm.b-lm.i.f,0<pm&&(lm.b+=pm));lm.b=Math.min(lm.b,nm);om=lm.o+om;if(om<lm.b)return {start:lm.b,end:lm.b};om=0<lm.length()?null!=lm.w().endTime?Math.min(om,lm.w().endTime):om:lm.b;om=Math.max(om,lm.b);om=Math.min(om,nm);return {start:lm.b,end:om};}function li(lm,mm){mi(lm);if(null!=lm.i.f)if(null==lm.f){lm.length();}else{for(var nm=lm.f+(mm-lm.h),om=0,pm=0;pm<lm.a.length;++pm){var qm=null;pm<lm.a.length-1?qm=lm.a[pm+1].endTime:(qm=lm.a[pm],qm=null!=qm.endTime?qm.endTime+(qm.endTime-qm.startTime):null);if(null!=qm&&qm<nm-lm.i.f){++om;}else break;}0<om&&lm.a.splice(0,om);}}function mi(lm){if(lm.j){for(var mm=0,nm=lm.a.length-1;0<=nm;--nm)if(lm.a[nm].startTime>lm.j){++mm;}else break;0<mm&&lm.a.splice(-mm);}}function ni(lm,mm,nm,om,pm){var qm=1,rm=0,sm;if(lm.c>om){sm=null;}else{var tm=lm.i||0,um=lm.f||0;sm=nm.a;sm=sm.b/sm.a;var vm=om-(lm.c+mm.start);0>vm?sm=null:(um=vm-2*sm-um,0>um&&(um=0),um=Math.ceil(um/sm)*sm,vm-=sm,0>vm?sm=null:(tm=Math.floor(vm/sm)*sm-tm,0>tm&&(tm=0),tm=Math.floor(tm/sm)*sm,sm={eb:um/sm+1,current:(tm>=um?tm:um)/sm+1}));}sm&&(qm=sm.eb,rm=sm.current-sm.eb+1);qm=vh(pm,nm,qm,rm);if(null==qm)throw lm=Error("Failed to generate SegmentReferences."),lm.type="stream",lm;ii.call(this,qm,lm,mm,om);this.v=nm;this.m=this.c=0<this.length()?lm.c+mm.start+this.w().endTime:null;this.l=sm?sm.current+1:null;this.U=pm;}n(ni,ii);ni.prototype.destroy=function(){this.U=this.v=null;ii.prototype.destroy.call(this);};ni.prototype.oa=function(lm){var mm=fb()/1000;oi(this,mm);li(this,mm);return fi.prototype.oa.call(this,lm);};ni.prototype.Pa=function(lm){if(null!=this.c||!(lm instanceof ni)||null==lm.c)return false;this.c=lm.c;this.m=lm.m;this.l=lm.l;this.h=lm.h;this.j=lm.j;hi(this,lm);oi(this,fb()/1000);ji(this);return true;};ni.prototype.na=function(lm){lm=ii.prototype.na.call(this,lm);null!=this.c&&(this.c+=lm,this.m+=lm);return lm;};ni.prototype.La=function(){var lm=fb()/1000;oi(this,lm);return ki(this,lm);};function oi(lm,mm){if(null!=lm.c&&null!=lm.m&&null!=lm.l){var nm=lm.v.a,nm=nm.b/nm.a,om=Math.floor((lm.m+(mm-lm.h)-lm.c)/nm);if(0!=om){var pm=vh(lm.U,lm.v,lm.l,om);Array.prototype.push.apply(lm.a,di(pm,lm.$));lm.c+=om*nm;lm.l+=om;}}}function pi(lm,mm,nm,om,pm){this.f=lm;this.b=mm;this.c=nm;this.h=om;this.a=null;this.g=pm;}pi.prototype.destroy=function(){this.g=this.c=this.b=this.f=null;this.a&&(this.a.destroy(),this.a=null);};pi.prototype.create=function(){if(this.a)return h.resolve(this.a);if("dynamic"==this.f.type){try{this.a=new ni(this.f,this.b,this.c,this.h,this.g);}catch(lm){return h.reject(lm);}}else{var mm;mm=this.c.a;if(mm=vh(this.g,this.c,1,Math.ceil(this.b.a/(mm.b/mm.a)))){if(0<mm.length){var nm=mm[mm.length-1];mm[mm.length-1]=bi(nm,nm.startTime,this.b.a);}mm=new fi(mm);}else mm=null;this.a=mm;if(!this.a)return mm=Error("Failed to generate SegmentReferences"),mm.type="stream",h.reject(mm);}return h.resolve(this.a);};function qi(lm,mm,nm,om,pm){this.c=lm;this.b=mm;this.g=nm;this.a=null;this.h=om;this.f=pm;}qi.prototype.destroy=function(){this.f=this.g=this.b=this.c=null;this.a&&(this.a.destroy(),this.a=null);};qi.prototype.create=function(){if(this.a)return h.resolve(this.a);var lm=this.g.b,mm=[];lm.f&&(mm=yh(lm.f,lm.a||1,this.b.a||0));var nm=0;lm.c&&lm.i?nm=(lm.i-1)*lm.c:0<mm.length&&(nm=mm[0].start-(lm.g||0));var om=nm,pm=lm.b.length;0<mm.length&&mm.length!=lm.b.length&&(pm=Math.min(mm.length,lm.b.length));for(var qm=[],rm=0;rm<pm;++rm){var sm=lm.b[rm],tm=nm/lm.a,um=null,vm=null;lm.c?(um=nm+lm.c,vm=um/lm.a):0<mm.length?(um=mm[rm].end-(lm.g||0),vm=um/lm.a):(vm=tm+this.b.a,um=vm*lm.a);var nm=um,um=0,wm=null;sm.a&&(um=sm.a.ja,wm=sm.a.end);vm=Math.min(this.b.a+om/lm.a,vm);qm.push(new ai(tm,vm,new nh(this.f,sm.b,um,wm)));}"dynamic"==this.c.type?this.a=new ii(qm,this.c,this.b,this.h):this.a=new fi(qm);return h.resolve(this.a);};function ri(lm,mm,nm,om,pm){this.b=lm;this.c=mm;this.f=nm;this.h=om;this.a=null;this.g=pm;}ri.prototype.destroy=function(){this.g=this.f=this.c=this.b=null;this.a&&(this.a.destroy(),this.a=null);};ri.prototype.create=function(){if(this.a)return h.resolve(this.a);for(var lm=this.f.a,mm=yh(lm.c,lm.a||1,this.c.a||0),nm=[],om=0;om<mm.length;++om){var pm=mm[om].start,qm=pm/lm.a,rm=mm[om].end/lm.a,sm=wh(this.g,this.f,om+lm.j,pm);if(!sm)return lm=Error("Failed to generate media URL."),lm.type="dash",h.reject(lm);var tm=(lm.i||0)/lm.a;nm.push(new ai(qm-tm,rm-tm,sm,pm));}"dynamic"==this.b.type?this.a=new ii(nm,this.b,this.c,this.h):this.a=new fi(nm);return h.resolve(this.a);};function si(){this.H=ti++;this.id=this.N=this.K=null;this.b=0;this.height=this.width=this.bandwidth=null;this.c=this.a="";this.switchReason=this.fbQualityClass=this.fbQualityLabel=null;this.f=[];this.S=false;this.J=true;}var ti=0;si.prototype.destroy=function(){this.K&&(this.K.destroy(),this.K=null);this.N&&(this.N.destroy(),this.N=null);};function ui(lm){var mm=lm.a||"";lm.c&&(mm+='; codecs="'+lm.c+'"');return mm;}function vi(){this.H=wi++;this.id=null;this.contentType=this.lang="";this.b=false;this.s=[];this.a=[];}var wi=0;vi.prototype.destroy=function(){for(var lm=0;lm<this.s.length;++lm)this.s[lm].destroy();this.a=this.s=null;};function xi(lm){for(var mm=[],nm=0;nm<lm.a.length;++nm){var om=new aj();om.id=lm.H;om.a=lm.a[nm];om.contentType=lm.contentType;om.b=lm.s.length?ui(lm.s[0]):"";mm.push(om);}return mm;}function yi(){this.id=null;this.start=0;this.b=null;this.a=[];}yi.prototype.destroy=function(){for(var lm=0;lm<this.a.length;++lm)this.a[lm].destroy();this.a=null;};function zi(){this.b=false;this.h=this.g=this.f=null;this.c=0;this.a=[];this.i=false;}zi.prototype.destroy=function(){for(var lm=0;lm<this.a.length;++lm)this.a[lm].destroy();this.a=null;};function aj(){this.id=0;this.a=null;this.b=this.contentType="";}function bj(lm,mm,nm,om,pm,qm){tc.call(this,lm);this.b=mm;this.a=new fd(nm,om,pm,this);this.I={};this.V=0;this.F=this.v=this.c=null;this.M=false;this.g=this.A=null;this.m=false;this.C=0;this.D=false;this.j=null;this.i=false;this.h=new yc();this.l=this.f=false;this.o=0;this.B=15;this.Y=this.O=false;this.X=qm;this.R=false;this.W=null;this.G=false;}n(bj,tc);bj.prototype.ba=function(){return {SourceBufferManager:this.a};};bj.prototype.getDebug=bj.prototype.ba;bj.prototype.L=function(lm){null!=lm.initialStreamBufferSize&&(this.o=Number(lm.initialStreamBufferSize));null!=lm.dynamicStreamBufferSize&&(this.C=Number(lm.dynamicStreamBufferSize));null!=lm.streamBufferSize&&(this.B=Number(lm.streamBufferSize));null!=lm.addCdnDebugQueryParameters&&(this.O=Boolean(lm.addCdnDebugQueryParameters));null!=lm.useInitialBufferSizeWhenPaused&&(this.Y=Boolean(lm.useInitialBufferSizeWhenPaused));null!=lm.segmentRequestTimeout&&(this.a.C=Number(lm.segmentRequestTimeout));null!=lm.resolveVideoTimeUpdateOnFragmentedTimeRanges&&(this.R=Boolean(lm.resolveVideoTimeUpdateOnFragmentedTimeRanges));null!=lm.performanceLogger&&(this.W=this.I.performanceLogger=lm.performanceLogger);null!=lm.reappendInitSegmentAfterAbort&&(this.I.reappendInitSegmentAfterAbort=Boolean(lm.reappendInitSegmentAfterAbort));lm=this.a;var mm=this.I;null!=mm.reappendInitSegmentAfterAbort&&(lm.A=Boolean(mm.reappendInitSegmentAfterAbort));null!=mm.performanceLogger&&(lm.g=mm.performanceLogger);};bj.prototype.destroy=function(){jj(this);this.h.destroy();this.c=this.h=null;this.a.destroy();this.U=this.b=this.a=null;};k=bj.prototype;k.ya=function(){return this.c;};k.Ma=function(){return this.v;};k.Ab=function(lm){this.f||lm.then(function(){this.f=true;this.g||ij(this,0);}.bind(this)).catch(function(){});return this.h;};k.Oa=function(){return this.l;};k.za=function(lm,mm,nm,om){lm!=this.c&&(this.F=lm.N.create(this.W),lm.K.create().then(ed(this,function(pm){if(this.b){var qm=this.c;this.c=lm;this.v=pm;this.M=true;this.A=om?om:null;this.m||(qm?mm&&cj(this,true,nm):ij(this,0));}})).catch(ed(this,function(pm){"aborted"!=pm.type&&(this.f?(pm=zb(pm),this.dispatchEvent(pm)):this.h.reject(pm));})));};k.wb=function(){return cj(this,false);};k.xb=function(){this.D=true;};function cj(lm,mm,nm){lm.c&&!lm.m&&(lm.m=true,jj(lm),nd(lm.a).then(ed(lm,function(){var om=this.b.currentTime;if(!mm&&0<id(this.a,om)&&0<=ci(this.a.b,om))return h.resolve();if(nm)return md(this.a,this.b.currentTime+nm);this.G=true;return ld(this.a);})).then(ed(lm,function(){this.m=false;ij(this,0);})).catch(ed(lm,function(om){this.m=false;this.f?(om=zb(om),this.dispatchEvent(om)):this.h.reject(om);})));}k.yb=function(lm){return 0<id(this.a,lm)&&0<=ci(this.a.b,lm);};k.Ca=function(){};k.Ja=function(){return true;};function dj(lm){var mm=lm.Y&&lm.b.paused?lm.o:lm.B;lm.C&&!lm.b.paused&&(mm=Math.max(Math.min(lm.v.w().endTime-lm.b.currentTime,lm.C),lm.B));return lm.i?Math.max(lm.o,mm):lm.o;}k.Sb=function(){if(this.i&&!this.f){this.g=null;}else{var lm;if(lm=this.f&&!this.l)lm=1<this.a.c.buffered.length?true:false;if(lm&&(this.D||pd(this.b))){this.R&&(this.b.currentTime=od(this.b)),this.D=false,cj(this,true);}else{this.g=null;lm=this.c;var mm=this.v,nm=this.b.currentTime;if(id(this.a,this.i?nm:nm+(this.j||0))>=dj(this)){fj(this),ij(this,1000/(5*(Math.abs(this.b.playbackRate)||1)));}else{var om=ej(this,nm,mm);om?(mm=kd(this.a,om,lm.b,this.F,this.O&&!this.b.paused),this.X&&"video"===lm.a.split("/")[0]&&this.X(om.startTime,om.endTime,{id:lm.id,reason:this.A}),this.F=null,this.M&&(this.M=false,om=this.A,this.A=null,gj(this,lm,om)),this.l=false,mm.then(ed(this,function(pm){var qm=pm.$;pm=pm.Cb;this.i||(this.V=pm);null==this.j&&(this.j=qm);this.G&&0<id(this.a,nm)&&(this.G=false,this.b.currentTime+=.001);ij(this,0);})).catch(ed(this,function(pm){if("aborted"!=pm.type){var qm=[0,404,410,502,503,504];"net"==pm.type&&-1!=qm.indexOf(pm.ic.status)&&this.c&&ij(this,1000);pm=zb(pm);this.dispatchEvent(pm);}}))):(fj(this),this.f&&!this.l&&(this.l=true,hj(this)),ij(this,200));}}}};function ej(lm,mm,nm){lm=lm.a;var om=lm.b.length;lm=0<om?lm.b[om-1]:null;return null!=lm?null!=lm.endTime?nm.oa(lm.endTime):null:nm.oa(mm)||(nm.length()?nm.w():null);}function fj(lm){if(!lm.i&&null!=lm.j){lm.i=true;var mm=lm.a,nm=lm.j,om=nm-mm.D;0!=om&&(mm.b=di(mm.b,om),mm.D=nm);lm.h.resolve(lm.j);}}function gj(lm,mm,nm){var om=mm.a.split("/")[0];mm=yb({type:"adaptation",bubbles:true,contentType:om,size:"video"!=om?null:{width:mm.width,height:mm.height},bandwidth:mm.bandwidth,reason:nm});lm.dispatchEvent(mm);}function hj(lm){var mm=yb({type:"ended"});lm.dispatchEvent(mm);}function ij(lm,mm){lm.g=j.setTimeout(lm.Sb.bind(lm),mm);}function jj(lm){null!=lm.g&&(j.clearTimeout(lm.g),lm.g=null);}k.Ka=function(){return this.V;};function kj(lm){this.b=lm;this.a=null;}kj.prototype.destroy=function(){this.a&&(this.a.destroy(),this.a=null);};kj.prototype.create=function(){if(this.a)return h.resolve(this.a);var lm=new ai(0,null,this.b);this.a=new fi([lm]);return h.resolve(this.a);};function lj(lm,mm){tc.call(this,lm);this.b=mm;this.g=true;this.h=this.f=null;this.c=new yc();this.a=null;}n(lj,tc);lj.prototype.L=function(){};lj.prototype.destroy=function(){this.a&&this.b.removeChild(this.a);this.c.destroy();this.U=this.b=this.f=this.h=this.a=this.c=null;};k=lj.prototype;k.ya=function(){return this.f;};k.Ma=function(){return this.h;};k.Ab=function(){return this.c;};k.Oa=function(){return true;};k.za=function(lm){lm.K.create().then(ed(this,function(mm){if(this.b){if(0==mm.length())return h.reject(Error("No subtitles URL available."));var nm=this.f;this.f=lm;this.h=mm;mm=gi(mm).url.b[0].toString();var om=this.Ja();this.a&&(this.Ca(false),this.b.removeChild(this.a));this.a=document.createElement("track");this.b.appendChild(this.a);this.a.src=mm;this.Ca(om);mm=yb({type:"adaptation",bubbles:true,contentType:"text",size:null,bandwidth:lm.bandwidth});this.dispatchEvent(mm);nm||this.c.resolve(0);}}));};k.wb=function(){};k.xb=function(){};k.yb=function(){return true;};k.Ca=function(lm){this.g=lm;this.a&&(this.a.track.mode=lm?"showing":"disabled");};k.Ja=function(){this.a&&(this.g="showing"==this.a.track.mode);return this.g;};function mj(){}mj.prototype.parse=function(lm,mm,nm,om){var pm=null;try{var rm,sm=new pb(mm);if(440786851!=rb(sm).id){rm=null;}else{var tm=rb(sm);if(408125543!=tm.id){rm=null;}else{var um=tm.a.byteOffset,vm,wm=new pb(tm.a);for(mm=null;jb(wm.a);){var xm=rb(wm);if(357149030==xm.id){mm=xm;break;}}if(mm){for(var ym=new pb(mm.a),wm=1e+06;jb(ym.a);){var zm=rb(ym);if(2807729==zm.id){wm=ub(zm);break;}}vm=wm/1e+09;}else vm=null;rm=vm?{$b:um,ec:vm}:null;}}if(rm){var an=rb(new pb(lm));if(475249515!=an.id){pm=null;}else{var bn=rm.$b,cn=rm.ec;lm=[];var dn=new pb(an.a);for(rm=an=-1;jb(dn.a);){var en=rb(dn);if(187==en.id){var fn,gn=new pb(en.a),hn=rb(gn);if(179!=hn.id){fn=null;}else{var jn=ub(hn),kn=rb(gn);if(183!=kn.id){fn=null;}else{for(var ln=new pb(kn.a),um=0;jb(ln.a);){var mn=rb(ln);if(241==mn.id){um=ub(mn);break;}}fn={gc:jn,Yb:um};}}if(fn){var nn=cn*fn.gc,on=bn+fn.Yb;if(0<=an){var pn=new nh(om,nm,rm,on-1);lm.push(new ai(an,nn,pn));}an=nn;rm=on;}}}0<=an&&(pn=new nh(om,nm,rm,null),lm.push(new ai(an,null,pn)));pm=lm;}}else pm=null;}catch(qm){if(!(qm instanceof RangeError))throw qm;}return pm;};function nj(lm,mm,nm,om,pm,qm,rm,sm){this.g=lm;this.i=mm;this.c=nm;this.a=om;this.f=pm;this.b=qm;this.j=rm;this.fa=null;this.h=sm;}nj.prototype.destroy=function(){this.h=this.i=this.g=null;this.a.f();this.a=null;this.b&&(this.b.f(),this.b=null);this.f&&(this.f.f(),this.f=null);this.fa=null;};nj.prototype.Bb=function(){return this.fa;};nj.prototype.create=function(){if("webm"==this.c){var lm=Error("WebM is not supported in this build configuration.");lm.type="app";return h.reject(lm);}if(this.fa)return this.fa;lm=[qh(this.a)];"webm"==this.c&&lm.push(qh(this.f));this.b&&qh(this.b);return this.fa=h.all(lm).then(ed(this,function(mm){var nm=mm[0];mm=mm[1]||null;var om=null;"mp4"==this.c?(om=new ei(),om=om.parse(new DataView(nm),this.a.h,this.a.b,this.h,this.b)):"webm"==this.c&&(om=new mj(),om=om.parse(new DataView(nm),new DataView(mm),this.a.b,this.h));if(!om)return nm=Error("Failed to parse SegmentReferences from "+this.a.toString()+" (or one of its fallbacks)."),nm.type="stream",h.reject(nm);var pm;"dynamic"==this.g.type?pm=new ii(om,this.g,this.i,this.j):pm=new fi(om);return h.resolve(pm);}));};function oj(lm){this.a=lm;}function pj(lm,mm,nm){for(var om=fb()/1000,pm=0;pm<mm.a.length;++pm)for(var qm=mm.a[pm],rm=0;rm<qm.b.length;++rm){var sm=qm.b[rm];if("text"!=sm.contentType)for(var tm=0;tm<sm.a.length;++tm){var um=sm.a[tm],vm=0,vm=vm+(um.h?1:0),vm=vm+(um.b?1:0),vm=vm+(um.a?1:0);0==vm?(sm.a.splice(tm,1),--tm):1!=vm&&(um.h?(um.b=null,um.a=null):um.b&&(um.a=null));}}qj(mm);for(pm=0;pm<mm.a.length;++pm)for(qm=mm.a[pm],rm=0;rm<qm.b.length;++rm){tm=sm=qm.b[rm];um=null;for(vm=0;vm<tm.a.length;++vm){var wm=tm.a[vm].f||"";um?wm!=um&&(tm.a.splice(vm,1),--vm):um=wm;}0==sm.a.length&&(qm.b.splice(rm,1),--rm);}"dynamic"==mm.type&&null==mm.c&&(mm.c=om);pm=new zi();"dynamic"==mm.type&&(pm.b=true,pm.f=mm.g,pm.g=new nh(nm,mm.j||mm.url),pm.h=mm.c);pm.c=mm.h||5;for(qm=0;qm<mm.a.length;++qm){rm=mm.a[qm];if(null==rm.start)break;rm=rj(lm,mm,rm,om,nm);pm.a.push(rm);}return pm;}function qj(lm){if(lm.a.length){null==lm.a[0].start&&(lm.a[0].start=0);var mm=function(tm){return 0==tm||!!tm;};"dynamic"==lm.type&&(lm.b=null);mm(lm.b)&&1==lm.a.length&&!mm(lm.a[0].a)&&(lm.a[0].a=lm.b);for(var nm=0,om=true,pm=0;pm<lm.a.length;++pm){var qm=lm.a[pm-1],rm=lm.a[pm],sm=lm.a[pm+1]||{start:lm.b};!mm(rm.start)&&qm&&mm(qm.start)&&mm(qm.a)&&(rm.start=qm.start+qm.a);!mm(rm.a)&&mm(sm.start)&&(rm.a=sm.start-rm.start);null!=rm.start&&null!=rm.a?nm+=rm.a:om=false;}mm(lm.b)||(pm=lm.a[lm.a.length-1],om?lm.b=nm:mm(pm.start)&&mm(pm.a)?lm.b=pm.start+pm.a:"dynamic"!=lm.type&&(lm.b=nm));}}function rj(lm,mm,nm,om,pm){var qm=new yi();qm.id=nm.id;qm.start=nm.start;qm.b=nm.a;var rm=new lc();nm.b.forEach(function(bn){rm.push(bn.contentType||"",bn);});for(var sm=oc(rm),tm=0;tm<sm.length;++tm){var um=new lc();rm.get(sm[tm]).forEach(function(bn){um.push(bn.group,bn);});for(var vm=oc(um),wm=0;wm<vm.length;++wm){var xm=new lc();um.get(vm[wm]).forEach(function(bn){xm.push(bn.lang,bn);});for(var ym=oc(xm),zm=0;zm<ym.length;++zm){var an=xm.get(ym[zm]),an=sj(lm,mm,nm,an,om,pm);qm.a.push(an);}}}return qm;}function sj(lm,mm,nm,om,pm,qm){o(om.every(function(zm){return zm.group==om[0].group&&(zm.lang||"")==(om[0].lang||"")&&(zm.contentType||"")==(om[0].contentType||"");}));var rm=new vi(),sm=om.filter(function(zm){return null!=zm.id;});sm.length==om.length&&(rm.id=sm.map(function(zm){return zm.id;}).sort().reduce(function(zm,an){return zm+","+an;}));rm.lang=om[0].lang||"";rm.contentType=om[0].contentType||"";rm.b=om.some(function(zm){return zm.c;});for(var sm={},tm=0;tm<om.length;++tm)for(var um=om[tm],vm=0;vm<um.a.length;++vm){var wm=um.a[vm],xm=vj(lm,wm),ym=rm.a.slice(0);uj(xm,ym);0==ym.length&&0<rm.a.length||!(wm=xj(mm,nm,wm,pm,qm))||(rm.s.push(wm),rm.a=ym,sm[wm.H]=um);}if(rm.a.some(function(zm){return ""==zm.a;}))return rm.s.forEach(function(zm){zm.S=true;}),rm;lm=tj(om);for(tm=0;tm<rm.s.length;++tm)wm=rm.s[tm],um=sm[wm.H],um==lm&&(wm.S=true);return rm;}function tj(lm){for(var mm=null,nm=null,om=0;om<lm.length;++om)for(var pm=lm[om],qm=0;qm<pm.a.length;++qm){var rm=pm.a[qm],rm=(rm.width||1)*(rm.height||1)*(rm.bandwidth||1);if(null==mm||rm<mm)mm=rm,nm=pm;}return nm;}function uj(lm,mm){if(0==mm.length){Array.prototype.push.apply(mm,lm);}else for(var nm=0;nm<mm.length;++nm){for(var om=false,pm=0;pm<lm.length;++pm){var qm=mm[nm],rm=lm[pm];if(qm.a==rm.a&&qm.h==rm.h&&qm.l==rm.l&&qm.g==rm.g&&qm.i==rm.i&&qm.f==rm.f&&qm.j==rm.j&&xd(qm.c,rm.c)){om=true;ae(mm[nm],lm[pm].b);break;}}om||(mm.splice(nm,1),--nm);}}function vj(lm,mm){var nm=[];if(0==mm.c.length){nm.push(new yd());}else if(lm.a)for(var om=0;om<mm.c.length;++om)nm.push.apply(nm,wj(lm,mm.c[om]));return nm;}function wj(lm,mm){var nm=[];if(2!=lm.a.length)return [];var om=lm.a(mm.c||"",mm.f);if(!(om&&om instanceof Array))return [];for(var pm=0;pm<om.length;++pm){var qm,rm=om[pm];qm=new yd();if(rm){var sm=ic(rm,"keySystem");if(null!=sm){qm.a=sm;}else throw Error("'keySystem' cannot be null.");var tm=ic(rm,"licenseServerUrl");if(null!=tm){qm.h=tm;}else if(sm)throw Error("For encrypted streaming content, 'licenseServerUrl' cannot be null or empty.");sm=gc(rm,"withCredentials");null!=sm&&(qm.l=sm);sm=kc(rm,"licensePostProcessor",Function);null!=sm&&(qm.m=sm);sm=kc(rm,"licensePreProcessor",Function);null!=sm&&(qm.o=sm);sm=gc(rm,"distinctiveIdentifierRequired");null!=sm&&(qm.g=sm);sm=gc(rm,"persistentStateRequired");null!=sm&&(qm.i=sm);sm=ic(rm,"audioRobustness");null!=sm&&(qm.f=sm);sm=ic(rm,"videoRobustness");null!=sm&&(qm.j=sm);sm=kc(rm,"serverCertificate",Uint8Array);null!=sm&&(qm.c=sm);if(sm=kc(rm,"initData",Object)){rm=kc(sm,"initData",Uint8Array);if(null==rm)throw Error("'initData.initData' cannot be null.");sm=ic(sm,"initDataType");if(null==sm)throw Error("'initData.initDataType' cannot be null.");qm.b.push({initData:new Uint8Array(rm.buffer),initDataType:sm});}}0==qm.b.length&&mm.a&&mm.a.psshBox&&ae(qm,[{initData:mm.a.psshBox,initDataType:"cenc"}]);nm.push(qm);}return nm;}function xj(lm,mm,nm,om,pm){if(!nm.u||0===nm.u.length)return null;var qm=null,rm=1,sm=0;if(nm.h){qm=nm.f.split("/")[1];if("mp4"!=qm&&"webm"!=qm){qm=null;}else{var tm=nm.h;"webm"!=qm||tm.c?tm.a||tm.b&&tm.b.a?(rm=tm.b,rm||(rm=new eg(),rm.url=nm.u,rm.a=tm.a?tm.a.clone():null),sm=zj(rm,pm),rm=tm.c?zj(tm.c,pm):null,tm.f?(tm=tm.f,tm=new nh(pm,nm.u,tm.ja,tm.end)):tm=null,lm=new nj(lm,mm,qm,sm,rm,tm,om,pm),mm=new zh(rm,nm.g?nm.g.data:null),om=new si(),om.K=lm,om.N=mm,qm=om):qm=null:qm=null;}rm=nm.h.h;sm=nm.h.g;}else if(nm.b){qm=nm.b,!qm.c&&!qm.f&&1<qm.b.length?qm=null:qm.c||mm.a||qm.f||1!=qm.b.length?qm.f&&0===qm.f.a.length?qm=null:(qm=qm.h?zj(qm.h,pm):null,lm=new qi(lm,mm,nm,om,pm),mm=new zh(qm,nm.g?nm.g.data:null),om=new si(),om.K=lm,om.N=mm,qm=om):qm=null,rm=nm.b.a,sm=nm.b.g;}else if(nm.a){lm:if(qm=nm.a,rm=0+(qm.f?1:0),rm+=qm.c?1:0,rm+=qm.b?1:0,0==rm?rm=false:(1!=rm&&(qm.f?(qm.c=null,qm.b=null):qm.c&&(qm.b=null)),rm=true),rm){rm=null;if(qm.g&&(rm=(qm=nm.a.g)?yj(nm,qm,fg):null,!rm)){qm=null;break lm;}qm=rm?zj(rm,pm):null;rm=nm.a;rm.f?(rm=nm.f.split("/")[1],"mp4"!=rm&&"webm"!=rm?lm=null:"webm"!=rm||qm?wh(pm,nm,1,0)?(sm=(sm=nm.a.f)?yj(nm,sm,eg):null)?(sm=zj(sm,pm),lm=new nj(lm,mm,rm,sm,qm,null,om,pm)):lm=null:lm=null:lm=null):lm=rm.h?rm.c?new ri(lm,mm,nm,om,pm):rm.b?"dynamic"!=lm.type&&null==mm.a?null:new pi(lm,mm,nm,om,pm):null:null;lm?(mm=new zh(qm,nm.g?nm.g.data:null),om=new si(),om.K=lm,om.N=mm,qm=om):qm=null;}else qm=null;;rm=nm.a.a;sm=nm.a.i;}else "text"==nm.f.split("/")[0]&&(qm=new si(),qm.K=new kj(new nh(pm,nm.u)));if(!qm)return null;qm.id=nm.id;sm&&(qm.b=-1*sm/rm);qm.bandwidth=nm.bandwidth;qm.width=nm.width;qm.height=nm.height;qm.a=nm.f||"";qm.c=nm.i||"";qm.fbQualityLabel=nm.fbQualityLabel||null;qm.fbQualityClass=nm.fbQualityClass||null;for(lm=0;lm<nm.c.length;++lm)mm=nm.c[lm],mm.b&&qm.f.push(mm.b);return qm;}function yj(lm,mm,nm){mm=xh(mm,lm.id,null,lm.bandwidth,null);if(!mm)return null;nm=new nm();nm.url=ph(lm.u,mm);return nm;}function zj(lm,mm){var nm=lm.url,om=0,pm=null;lm.a&&(om=lm.a.ja,pm=lm.a.end);return new nh(mm,nm,om,pm);}function ak(){this.streamStats=null;this.droppedFrames=this.decodedFrames=NaN;this.bufferingTime=this.playTime=this.estimatedBandwidth=0;this.playbackLatency=NaN;this.bufferingHistory=[];this.bandwidthHistory=[];this.streamHistory=[];}function bk(lm,mm){var nm=new ck(mm);lm.streamHistory.push(new dk(nm));if(nm.videoHeight||!lm.streamStats)lm.streamStats=nm;}function ck(lm){this.videoWidth=lm.width;this.videoHeight=lm.height;this.videoMimeType=lm.a;this.videoBandwidth=lm.bandwidth;}function dk(lm){this.timestamp=fb()/1000;this.value=lm;}function ek(lm,mm,nm,om,pm){this.b=new nh(null,[new cf(lm)]);this.a=new fh();this.a.body=mm;this.a.method=nm;this.a.a=3;this.a.l=om;this.a.c=0;lm=pm||{};for(var qm in lm)this.a.b[qm]=lm[qm];}function fk(lm){return qh(lm.b,lm.a).then(function(mm){return h.resolve(new Uint8Array(mm));});}function gk(lm,mm,nm){tc.call(this,lm);this.c=mm;this.j=nm;this.a=this.h=null;this.i=new pc();this.b=[];this.f=[];this.m=0;this.g=new yc();this.l=null;}n(gk,tc);gk.prototype.destroy=function(){this.U=null;for(var lm=0;lm<this.f.length;++lm)this.f[lm].close().catch(function(){});this.f=[];this.b=this.a=this.h=null;this.g.destroy();this.g=null;this.i.destroy();this.i=null;this.l&&(j.clearTimeout(this.l),this.l=null);this.c=this.j=null;};gk.prototype.initialize=function(){var lm=new lc(),mm;mm=this.j;if(mm.C){mm=mm.a.a[0];for(var nm=[],om=0;om<mm.a.length;++om)nm.push.apply(nm,xi(mm.a[om]));mm=nm;}else mm=[];for(nm=0;nm<mm.length;++nm)om=mm[nm],om.a.a||om.b&&!ok(om.b)||lm.push(om.contentType,om);for(var nm={},om=false,pm=0;pm<mm.length;++pm){var qm=mm[pm];if(qm.a.a&&!lm.a.hasOwnProperty(qm.contentType)){var rm=qm.a.a,sm=nm[rm];sm||(sm=qm.a,sm={audioCapabilities:void 0,videoCapabilities:void 0,initDataTypes:void 0,distinctiveIdentifier:sm.g?"required":"optional",persistentState:sm.i?"required":"optional",sessionTypes:["temporary"]},nm[rm]=sm);if(qm.b&&(rm=qm.contentType+"Capabilities",rm in sm)){om=true;sm[rm]||(sm[rm]=[]);var tm;"audio"==qm.contentType?tm=qm.a.f:"video"==qm.contentType&&(tm=qm.a.j);sm[rm].push({contentType:qm.b,robustness:tm});}}}if(!om)if(mm.length){this.a=mm[0].a;}else throw lm=Error("No DrmInfo exists!"),lm.type="drm",lm;if(0==Object.keys(nm).length)return ol(this.j,lm),this.g.resolve(),h.resolve();tm=new yc();nm=hk(nm,tm);nm=nm.then(this.v.bind(this,mm,lm));tm.reject(null);return nm;};function hk(lm,mm){for(var nm in lm)mm=mm.catch(function(om,pm){return navigator.requestMediaKeySystemAccess(om,[pm]);}.bind(null,nm,lm[nm]));return mm;}gk.prototype.v=function(lm,mm,nm){if(!this.c)return jk();for(var om=nm.keySystem,pm=nm.getConfiguration(),qm=["audio","video"],rm=0;rm<qm.length;++rm){var sm=qm[rm];if(!mm.a.hasOwnProperty(sm)){var tm=pm[sm+"Capabilities"];if(tm){for(var tm=tm[0],um=[],vm={},wm=0;wm<lm.length;++wm){var xm=lm[wm],ym=tm?xm.b==tm.contentType:xm.contentType==sm;xm.a.a!=om||!ym||xm.id in vm||(um.push(xm),vm[xm.id]=true,this.a=this.a?zd(this.a,xm.a):xm.a);}mm.set(sm,um);}}}ol(this.j,mm);return nm.createMediaKeys().then(function(zm){this.h=zm;}.bind(this));};function ik(lm){return lm.c?lm.h?lm.c.setMediaKeys(lm.h).then(ed(lm,function(){return this.c?this.a.c?this.h.setServerCertificate(this.a.c):h.resolve():jk();})).then(ed(lm,function(){if(!this.c)return jk();for(var mm=0;mm<this.a.b.length;++mm){var nm=this.a.b[mm];this.o({type:"encrypted",initDataType:nm.initDataType,initData:nm.initData});}0==this.a.b.length&&qc(this.i,this.c,"encrypted",this.o.bind(this));})):h.resolve():jk();}function jk(){var lm=Error("EmeManager destroyed");lm.type="destroy";return h.reject(lm);}gk.prototype.o=function(lm){for(var mm=new Uint8Array(lm.initData),nm=0;nm<this.b.length;++nm)if(xd(mm,this.b[nm].data))return;try{var pm=kk(this);}catch(om){mm=zb(om);this.dispatchEvent(mm);this.g.reject(om);return;}lm=pm.generateRequest(lm.initDataType,lm.initData);this.b.push({data:mm,Ra:pm});lm.catch(ed(this,function(qm){if(this.c){for(var rm=0;rm<this.b.length;++rm)if(this.b[rm].Ra==pm){this.b.splice(rm,1);break;}rm=zb(qm);this.dispatchEvent(rm);this.g.reject(qm);}}));this.f.push(pm);};function kk(lm){var mm=null,mm=lm.h.createSession();qc(lm.i,mm,"message",lm.B.bind(lm));qc(lm.i,mm,"keystatuseschange",lm.A.bind(lm));return mm;}gk.prototype.B=function(lm){lk(this,lm.target,this.a,lm.message);};gk.prototype.A=function(lm){lm=lm.target;var mm={};lm.keyStatuses.forEach(function(om,pm){if("string"==typeof om){var qm=om;om=pm;pm=qm;}if("com.microsoft.playready"==this.a.a&&16==om.byteLength){var qm=new DataView(om),rm=qm.getUint32(0,true),sm=qm.getUint16(4,true),tm=qm.getUint16(6,true);qm.setUint32(0,rm,false);qm.setUint16(4,sm,false);qm.setUint16(6,tm,false);}qm=wd(new Uint8Array(om));mm[qm]=pm;}.bind(this));if(lm.expiration<Date.now()){for(var nm=0;nm<this.b.length;++nm)if(this.b[nm].Ra==lm){this.b.splice(nm,1);break;}lm.close();this.f.splice(this.f.indexOf(lm),1);}rl(this.j,mm);};function lk(lm,mm,nm,om){om=mk(nm,om);fk(new ek(om.url,om.body,om.method,nm.l,om.headers)).then(ed(lm,function(pm){nm.m&&(pm=nm.m(pm));return mm.update(pm);})).then(ed(lm,function(){var pm=yb({type:"sessionReady",detail:mm});this.dispatchEvent(pm);this.m++;this.m>=this.f.length&&this.g.resolve();})).catch(ed(lm,function(pm){pm.Ra=mm;pm=zb(pm);this.dispatchEvent(pm);}));}function mk(lm,mm){var nm={url:lm.h,body:mm.slice(0),method:"POST",headers:{}};if("com.microsoft.playready"===lm.a){for(var om=String.fromCharCode.apply(null,new Uint16Array(nm.body)),om=(new DOMParser()).parseFromString(om,"application/xml"),pm=om.getElementsByTagName("name"),qm=om.getElementsByTagName("value"),rm=0;rm<pm.length;rm++)nm.headers[pm[rm].childNodes[0].nodeValue]=qm[rm].childNodes[0].nodeValue;nm.body=j.atob(om.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue);}if(!lm.o)return nm;lm.o(nm);nm.url=ic(nm,"url");if(null==nm.url)throw Error("'url' cannot be null.");if(!(nm.body instanceof ArrayBuffer||"string"==typeof nm.body||null==nm.body))throw new TypeError("'body' must be an ArrayBuffer, a string, or null.");nm.method=ic(nm,"method");if("GET"!=nm.method&&"POST"!=nm.method)throw Error("'method' must be either 'GET' or 'POST'.");nm.headers=kc(nm,"headers",Object);if(null==nm.headers)throw Error("'headers' cannot be null.");return nm;}function nk(lm){tc.call(this,null);this.a=lm;this.b=null;this.h=new pc();this.m=this.l=null;this.D=0;this.B=null;this.o=false;this.M=true;this.I=false;this.L=true;this.i=new ak();this.j=false;this.c={enableAdaptation:true,streamBufferSize:15,liveStreamEndTimeout:15,licenseRequestTimeout:0,mpdRequestTimeout:0,segmentRequestTimeout:0,preferredLanguage:"en",restrictions:new w()};this.g=this.f=null;this.v=1;this.F=null;this.A=false;}n(nk,tc);m("shaka.player.Player",nk);nk.version="v1.6.4-fb";nk.isBrowserSupported=function(){return !!j.MediaSource&&!!Element.prototype.requestFullscreen&&!!document.exitFullscreen&&"fullscreenElement" in document&&!!j.Uint8Array;};nk.prototype.ba=function(){var lm={},mm=this.b;if(mm){var nm=mm.fb();lm.BandwidthEstimator=nm.BandwidthEstimator;var om=nm.VideoSourceStream;om&&(lm.VideoSourceStream=om,(om=lm.VideoBufferManager=om.ba().SourceBufferManager)&&(lm.VideoSourceBuffer=om.ba().SourceBuffer));(om=lm.AudioSourceStream=nm.AudioSourceStream)&&(om=lm.AudioBufferManager=om.ba().SourceBufferManager)&&(lm.AudioSourceBuffer=om.ba().SourceBuffer);lm.TextSourceStream=nm.TextSourceStream;lm.getManifest=mm.bb.bind(mm);}else lm.getManifest=function(){};lm.kc=true;return lm;};nk.prototype.getDebug=nk.prototype.ba;nk.prototype.Y=function(lm){this.M=lm;};nk.prototype.setResumeAfterBuffering=nk.prototype.Y;function ok(lm){return "text/vtt"==lm?!!j.VTTCue:MediaSource.isTypeSupported(lm);}nk.isTypeSupported=ok;nk.setTextStyle=function(lm){var mm=document.getElementById("ShakaPlayerTextStyle");mm||(mm=document.createElement("style"),mm.id="ShakaPlayerTextStyle",document.head.appendChild(mm));for(mm=mm.sheet;mm.cssRules.length;)mm.deleteRule(0);mm.insertRule("::cue { "+y(lm)+" }",0);};nk.prototype.destroy=function(){return this.G().then(ed(this,function(){this.h.destroy();this.a=this.h=null;})).catch(function(){});};nk.prototype.destroy=nk.prototype.destroy;nk.prototype.G=function(){this.j=true;return pk(this);};nk.prototype.unload=nk.prototype.G;function pk(lm){var mm;lm.f&&(mm=lm.f.getOperationLogger("unload"));if(!lm.b)return mm&&mm.log(),h.resolve();lm.o&&vk(lm);lm.a.pause();rc(lm.h);uk(lm);sk(lm);lm.l&&(lm.l.destroy(),lm.l=null);lm.a.src="";var nm=lm.a.setMediaKeys(null).then(function(){mm&&mm.log();});lm.b&&(lm.b.destroy(),lm.b=null);lm.o=false;lm.i=new ak();return nm;}nk.prototype.ua=function(lm){return qk(this,lm,false);};nk.prototype.load=nk.prototype.ua;nk.prototype.V=function(lm){return qk(this,lm,true);};nk.prototype.loadWithSilencedErrors=nk.prototype.V;function qk(lm,mm,nm){var om;lm.f&&(om=lm.f.getOperationLogger("load").setState("loading"));il(mm,lm.a);var pm=null;lm.j=false;if(lm.b||!lm.I)pm=pk(lm).then(ed(lm,function(){return mm.Da();}));lm.a.autoplay&&(lm.f&&!lm.g&&(lm.g=lm.f.getOperationLogger("play")),q("load"),qc(lm.h,lm.a,"timeupdate",lm.Gb.bind(lm)));mm.nb(lm.c);mm.R=lm.F;lm.F=null;pm||(pm=mm.Da());pm.catch(ed(lm,function(qm){mm.destroy();return h.reject(qm);}));return pm.then(ed(lm,function(){if(!this.a||this.j)return rk();this.b=mm;qc(this.h,this.b,"seekrangechanged",this.Ob.bind(this));this.l=new gk(this,this.a,this.b);return this.l.initialize();})).then(ed(lm,function(){if(!this.a||this.j)return rk();qc(this.h,this.a,"error",this.bc.bind(this));qc(this.h,this.a,"play",this.Mb.bind(this));qc(this.h,this.a,"playing",this.Nb.bind(this));qc(this.h,this.a,"pause",this.Lb.bind(this));return jl(this.b,this,this.a);})).then(ed(lm,function(){return !this.a||this.j?rk():ik(this.l);})).then(ed(lm,function(){if(!this.a||this.j)return rk();tk(this);om&&om.log();})).catch(ed(lm,function(qm){om&&om.setError(qm).log();if(!this.a||this.j)return rk();if(true!==nm&&"destroy"!=qm.type){var rm=zb(qm);this.dispatchEvent(rm);}return this.G().then(function(){return h.reject(qm);});}));}function rk(){var lm=Error("Player destroyed");lm.type="destroy";return h.reject(lm);}k=nk.prototype;k.Gb=function(){r("load");this.i.playbackLatency=s("load")/1000;this.h.Aa(this.a,"timeupdate");};k.bc=function(){if(this.a.error){var lm=this.a.error.code;lm!=MediaError.MEDIA_ERR_ABORTED&&(lm=Error(wk[lm]||"Unknown playback error."),lm.type="playback",lm=zb(lm),this.dispatchEvent(lm));}};k.Mb=function(){this.f&&!this.g&&(this.g=this.f.getOperationLogger("play").setState("pending_play"));};k.Nb=function(){q("playing");this.f&&this.f.getEventLogger("playing").setState("playing").log();this.g&&(this.g.log(),this.g=null);!this.m&&0>this.v&&(this.a.playbackRate=0,this.C(this.a.currentTime,Date.now(),this.v));this.o&&!this.L&&vk(this);};k.Lb=function(){this.f&&this.f.getEventLogger("pause").setState("paused").log();this.g&&(this.g.setResult("aborted").log(),this.g=null);r("playing");var lm=s("playing");if(!isNaN(lm)){var mm=this.i;mm.playTime+=lm/1000;}sk(this);};k.Ob=function(lm){this.D=lm.start;};k.zb=function(){if(!this.a.paused){r("playing");var lm=s("playing");if(!isNaN(lm)){var mm=this.i;mm.playTime+=lm/1000;q("playing");}}lm=this.i;mm=this.a;mm.getVideoPlaybackQuality&&(mm=mm.getVideoPlaybackQuality(),lm.decodedFrames=mm.totalVideoFrames,lm.droppedFrames=mm.droppedVideoFrames);return this.i;};nk.prototype.getStats=nk.prototype.zb;nk.prototype.ta=function(){return this.b?this.b.F():[];};nk.prototype.getVideoTracks=nk.prototype.ta;nk.prototype.qa=function(){return this.b?this.b.X():[];};nk.prototype.getAudioTracks=nk.prototype.qa;nk.prototype.sa=function(){return this.b?this.b.ob():[];};nk.prototype.getTextTracks=nk.prototype.sa;nk.prototype.selectVideoTrack=function(lm,mm){return this.b?this.b.selectVideoTrack(lm,void 0==mm?true:mm):false;};nk.prototype.selectVideoTrack=nk.prototype.selectVideoTrack;nk.prototype.va=function(lm,mm,nm){return this.b?tl(this.b,"audio",lm,void 0==mm?true:mm,nm):false;};nk.prototype.selectAudioTrack=nk.prototype.va;nk.prototype.wa=function(lm){return this.b?tl(this.b,"text",lm,false):false;};nk.prototype.selectTextTrack=nk.prototype.wa;nk.prototype.pa=function(lm){this.b&&pl(this.b,lm);};nk.prototype.enableTextTrack=nk.prototype.pa;nk.prototype.X=function(lm){sk(this);0<=lm?this.a.playbackRate=lm:this.a.paused||(this.a.playbackRate=0,this.C(this.a.currentTime,Date.now(),lm));this.v=lm;};nk.prototype.setPlaybackRate=nk.prototype.X;nk.prototype.R=function(){return this.v;};nk.prototype.getPlaybackRate=nk.prototype.R;nk.prototype.xa=function(lm){this.F=lm;};nk.prototype.setPlaybackStartTime=nk.prototype.xa;nk.prototype.O=function(){return this.b?this.b.pb():false;};nk.prototype.isLive=nk.prototype.O;nk.prototype.ia=function(lm){if(lm){var mm=gc(lm,"enableAdaptation");null!=mm&&(this.c.enableAdaptation=mm);mm=gc(lm,"allowSkipUnloading");null!=mm&&(this.I=mm);mm=gc(lm,"endBufferingOnPlaying");null!=mm&&(this.L=mm);mm=gc(lm,"usePlaybackRateForBuffering");null!=mm&&(this.A=mm);mm=hc(lm,"streamBufferSize",0);null!=mm&&(this.c.streamBufferSize=mm);mm=hc(lm,"dynamicStreamBufferSize",0);null!=mm&&(this.c.dynamicStreamBufferSize=mm);mm=gc(lm,"addCdnDebugQueryParameters");null!=mm&&(this.c.addCdnDebugQueryParameters=mm);mm=hc(lm,"initialStreamBufferSize",0);null!=mm&&(this.c.initialStreamBufferSize=mm);mm=gc(lm,"includeStreamBufferSizeInStartOffset");null!=mm&&(this.c.includeStreamBufferSizeInStartOffset=mm);mm=hc(lm,"liveStreamEndTimeout",0);null!=mm&&(this.c.liveStreamEndTimeout=mm);mm=hc(lm,"licenseRequestTimeout",0);null!=mm&&(this.c.licenseRequestTimeout=mm);mm=hc(lm,"mpdRequestTimeout",0);null!=mm&&(this.c.mpdRequestTimeout=mm);mm=hc(lm,"minMpdRefreshInterval",0);null!=mm&&(this.c.minMpdRefreshInterval=mm);mm=gc(lm,"enableLiveInterruptionDetection");null!=mm&&(this.c.enableLiveInterruptionDetection=mm);mm=gc(lm,"enableManifestDebug");null!=mm&&(this.c.enableManifestDebug=mm,tc.prototype.Xa=mm,mm||(tc.prototype.ka=function(){}));mm=gc(lm,"resolveVideoTimeUpdateOnFragmentedTimeRanges");null!=mm&&(this.c.resolveVideoTimeUpdateOnFragmentedTimeRanges=mm);mm=hc(lm,"liveInterruptionConsecutiveUpdatesWithoutChange");null!=mm&&(this.c.liveInterruptionConsecutiveUpdatesWithoutChange=mm);mm=hc(lm,"liveInterruptionConsecutiveUpdatesWithChange");null!=mm&&(this.c.liveInterruptionConsecutiveUpdatesWithChange=mm);mm=gc(lm,"reappendInitSegmentAfterAbort");null!=mm&&(this.c.reappendInitSegmentAfterAbort=mm);mm=gc(lm,"liveSendPushHeaders");null!=mm&&(this.c.liveSendPushHeaders=mm);mm=hc(lm,"liveMaxManifestFetchesWithPush");null!=mm&&(this.c.liveMaxManifestFetchesWithPush=mm);mm=hc(lm,"liveMaxSegmentsToPush");null!=mm&&(this.c.liveMaxSegmentsToPush=mm);mm=hc(lm,"segmentRequestTimeout",0);null!=mm&&(this.c.segmentRequestTimeout=mm);mm=ic(lm,"preferredLanguage");null!=mm&&(this.c.preferredLanguage=mm);mm=kc(lm,"restrictions",w);null!=mm&&(this.c.restrictions=mm.clone());mm=lm.performanceLogger;null!=mm&&(this.f=this.c.performanceLogger=mm);lm=gc(lm,"disableCacheBustingEvenThoughItMayAffectBandwidthEstimation");null!=lm&&(gh=!lm);this.b&&this.b.nb(this.c);}};nk.prototype.configure=nk.prototype.ia;nk.prototype.ra=function(){return this.c;};nk.prototype.getConfiguration=nk.prototype.ra;function sk(lm){lm.m&&(j.clearTimeout(lm.m),lm.m=null);}function tk(lm){uk(lm);lm.B=j.setTimeout(lm.W.bind(lm),100);}function uk(lm){lm.B&&(j.clearTimeout(lm.B),lm.B=null);}nk.prototype.C=function(lm,mm,nm){this.m=null;var om=(Date.now()-mm)/1000*nm;this.a.currentTime<this.D+(this.O()?1:.05)?this.a.pause():(om=Math.max(this.D,lm+om),this.a.currentTime=om,this.m=j.setTimeout(this.C.bind(this,lm,mm,nm),250));};function vk(lm){r("buffering");var mm=lm.i;mm.bufferingTime+=s("buffering")/1000;lm.A&&(lm.a.playbackRate=lm.v);lm.o=false;lm.dispatchEvent(yb({type:"bufferingEnd"}));}nk.prototype.W=function(){tk(this);if(!this.a.ended&&!this.a.seeking){var lm=this.a.buffered,mm=lm.length?lm.end(lm.length-1):0,lm=Math.max(mm-this.a.currentTime,0),nm=this.a.currentTime,om=this.a.duration,om=isNaN(om)?0:Math.max(om-.05,0),mm=mm>=om||nm>=om;if(this.o){if(mm=this.b,lm>(mm.ib?Number(mm.g.streamBufferSize):Number(mm.g.initialStreamBufferSize))||em(this.b))vk(this),this.M&&!this.A&&this.a.play();}else !this.a.paused&&!mm&&.5>lm&&(this.o=true,this.A?this.a.playbackRate=0:this.a.pause(),this.i.bufferingHistory.push(fb()/1000),q("buffering"),this.dispatchEvent(yb({type:"bufferingStart"}))),em(this.b)&&vk(this);}};var wk={2:"A network failure occured while loading media content.",3:"The browser failed to decode the media content.",4:"The browser does not support the media content."};function xk(lm){for(var mm=0;mm<lm.length;++mm)for(var nm=lm[mm],om=0;om<nm.a.length;++om){for(var pm=nm.a[om],qm=pm,rm=0;rm<qm.s.length;++rm)ok(ui(qm.s[rm]))||(qm.s.splice(rm,1),--rm);0==pm.s.length&&(nm.a.splice(om,1),--om);}for(mm=0;mm<lm.length;++mm)for(nm=lm[mm],om=0;om<nm.a.length;++om)nm.a[om].s.sort(yk);}function yk(lm,mm){var nm=lm.bandwidth||Number.MAX_VALUE,om=mm.bandwidth||Number.MAX_VALUE;return nm<om?-1:nm>om?1:0;}function zk(lm){this.a=lm;}zk.prototype.destroy=function(){this.a.destroy();this.a=null;};zk.prototype.update=function(lm){var mm=al(lm),nm=al(this.a);return h.all([mm,nm]).then(ed(this,function(om){var pm=om[0];om=om[1];xk(this.a.a);lm.b&&!this.a.b&&(lm.i=true);lm.f=this.a.f;lm.g=this.a.g?this.a.g.clone():null;lm.c=this.a.c;var qm=[];bl(lm,this.a,pm,om,qm);xk(lm.a);return h.resolve(qm);}));};function al(lm){function mm(om,pm){return om.concat(pm);}var nm=lm.a.map(function(om){return om.a;}).reduce(mm,[]).map(function(om){return om.s;}).reduce(mm,[]);lm=nm.map(function(om){return om.K.create();});return h.all(lm).then(function(om){for(var pm={},qm=0;qm<nm.length;++qm)pm[nm[qm].H]=om[qm];return h.resolve(pm);});}function bl(lm,mm,nm,om,pm){var qm=new lc();lm.a.forEach(function(um,vm){qm.push(um.id||""+vm,um);});var rm=new lc();mm.a.forEach(function(um,vm){rm.push(um.id||""+vm,um);});lm=oc(qm);for(mm=0;mm<lm.length;++mm){var sm=lm[mm],tm=qm.get(sm);1<tm.length||(sm=rm.get(sm))&&0!=sm.length&&1==sm.length&&(cl(tm[0],sm[0],nm,om,pm),tm[0].b=sm[0].b);}}function cl(lm,mm,nm,om,pm){var qm=new lc();lm.a.forEach(function(um,vm){qm.push(um.id||""+vm,um);});var rm=new lc();mm.a.forEach(function(um,vm){rm.push(um.id||""+vm,um);});lm=oc(qm);for(mm=0;mm<lm.length;++mm){var sm=lm[mm],tm=qm.get(sm);1<tm.length||(sm=rm.get(sm))&&0!=sm.length&&1==sm.length&&dl(tm[0],sm[0],nm,om,pm);}}function dl(lm,mm,nm,om,pm){var qm=new lc();lm.s.forEach(function(wm,xm){qm.push(wm.id||""+xm,wm);});var rm=new lc();mm.s.forEach(function(wm,xm){rm.push(wm.id||""+xm,wm);});mm={};for(var sm=oc(qm),tm=0;tm<sm.length;++tm){var um=sm[tm];mm[um]=um;var vm=qm.get(um);1<vm.length||((um=rm.get(um))&&0!=um.length?1==um.length&&(el(vm[0],um[0],nm,om),vm[0].N=um[0].N,um[0].N=null,vm[0].b=um[0].b):(pm.push(vm[0]),lm.s.splice(lm.s.indexOf(vm[0]),1)));}sm=oc(rm);for(tm=0;tm<sm.length;++tm)um=sm[tm],mm[um]||(mm[um]=um,um=rm.get(um),lm.s.push(um[0]));}function el(lm,mm,nm,om){lm=nm[lm.H];om=om[mm.H];mm=lm.length();lm.Pa(om)&&(om=lm.length(),lm.g.push(mm!==om),50<lm.g.length&&lm.g.shift());}function fl(){this.a=this.b=null;this.f=new pc();this.c=Number.POSITIVE_INFINITY;this.i=true;this.g=false;}m("shaka.media.SimpleAbrManager",fl);fl.prototype.destroy=function(){this.f.destroy();this.a=this.b=this.f=null;};fl.prototype.initialize=function(lm,mm){this.b||this.a||(this.b=lm,this.a=mm);};fl.prototype.start=function(){this.b&&this.a&&!this.g&&(this.c=Date.now()+4000,qc(this.f,this.b,"bandwidth",this.l.bind(this)),qc(this.f,this.a,"adaptation",this.j.bind(this)),qc(this.f,this.a,"trackschanged",this.h.bind(this)),this.g=true);};fl.prototype.enable=function(lm){this.i=lm;};fl.prototype.getInitialVideoTrackId=function(){if(!this.b||!this.a)return null;var lm=gl(this);return lm?lm.id:null;};fl.prototype.getInitialSwitchReason=function(){return null;};fl.prototype.getInitialAudioTrackId=function(){return null;};fl.prototype.selectVideoTrack=function(lm,mm,nm){this.g&&this.a.selectVideoTrack(lm.id,mm,nm);};fl.prototype.l=function(){Date.now()<this.c||this.h();};fl.prototype.h=function(){if(this.i){var lm=gl(this);if(lm){if(lm.active){this.c=Date.now()+3000;return;}this.selectVideoTrack(lm,false);}this.c=Number.POSITIVE_INFINITY;}};fl.prototype.j=function(){this.c==Number.POSITIVE_INFINITY&&(this.c=Date.now()+30000);};function gl(lm){var mm=lm.a.F();if(0==mm.length)return null;mm.sort(ga);var nm;lm:{nm=lm.a.X();for(var om=0;om<nm.length;++om)if(nm[om].active){nm=nm[om];break lm;}nm=null;};nm=nm?nm.bandwidth:0;lm=lm.b.getBandwidth();for(var om=mm[0],pm=0;pm<mm.length;++pm){var qm=mm[pm],rm=pm+1<mm.length?mm[pm+1]:{bandwidth:Number.POSITIVE_INFINITY};if(qm.bandwidth&&(rm=(rm.bandwidth+nm)/.85,lm>=(qm.bandwidth+nm)/.95&&lm<=rm&&(om=qm,om.active)))break;}return om;}function hl(lm,mm,nm){tc.call(this,null);this.a=lm;this.O=mm;this.j=new pc();this.h=new MediaSource();this.f=null;this.Ga=0;this.hb=false;this.wa=0;this.ca=null;this.va=3;this.ua=this.ib=false;this.sa=0;this.lb=1;this.ta=Infinity;this.cb=false;this.c=new lc();this.l=nm;this.l.initialize(mm,this);this.C=false;this.B="en";this.ia=false;this.G=null;this.v=new yc();this.vb=new yc();this.i=new w();this.A=null;this.mb=1;this.b={};this.V=new yc();this.ra=0;this.kb=15;this.o=null;this.Wa=this.jb=false;this.m={};this.R=this.M=this.I=null;this.g={};this.Y=false;this.ub=null;}n(hl,tc);m("shaka.player.StreamVideoSource",hl);hl.prototype.fb=function(){return {VideoSourceStream:this.b.video,AudioSourceStream:this.b.audio,TextSourceStream:this.b.text,BandwidthEstimator:this.O};};hl.prototype.getStreamDebug=hl.prototype.fb;hl.prototype.nb=function(lm){null!=lm.streamBufferSize&&(this.g.streamBufferSize=lm.streamBufferSize);null!=lm.initialStreamBufferSize&&(this.g.initialStreamBufferSize=lm.initialStreamBufferSize);null!=lm.dynamicStreamBufferSize&&(this.g.dynamicStreamBufferSize=lm.dynamicStreamBufferSize);null!=lm.addCdnDebugQueryParameters&&(this.g.addCdnDebugQueryParameters=lm.addCdnDebugQueryParameters);null!=lm.segmentRequestTimeout&&(this.g.segmentRequestTimeout=lm.segmentRequestTimeout);null!=lm.resolveVideoTimeUpdateOnFragmentedTimeRanges&&(this.g.resolveVideoTimeUpdateOnFragmentedTimeRanges=lm.resolveVideoTimeUpdateOnFragmentedTimeRanges);null!=lm.reappendInitSegmentAfterAbort&&(this.g.reappendInitSegmentAfterAbort=lm.reappendInitSegmentAfterAbort);jm(this);null!=lm.includeStreamBufferSizeInStartOffset&&(this.hb=Boolean(lm.includeStreamBufferSizeInStartOffset));null!=lm.enableAdaptation&&this.l.enable(Boolean(lm.enableAdaptation));null!=lm.mpdRequestTimeout&&(this.wa=Number(lm.mpdRequestTimeout));null!=lm.minMpdRefreshInterval&&(this.va=Number(lm.minMpdRefreshInterval)/1000);null!=lm.enableManifestDebug&&(this.cb=!!lm.enableManifestDebug);null!=lm.liveStreamEndTimeout&&(this.kb=Number(lm.liveStreamEndTimeout));null!=lm.preferredLanguage&&(this.B=dc(String(lm.preferredLanguage)));null!=lm.liveSendPushHeaders&&(this.ua=Boolean(lm.liveSendPushHeaders));null!=lm.performanceLogger&&(this.ca=this.g.performanceLogger=lm.performanceLogger);null!=lm.liveMaxManifestFetchesWithPush&&(this.sa=Number(lm.liveMaxManifestFetchesWithPush));null!=lm.liveMaxSegmentsToPush&&(this.ta=Number(lm.liveMaxSegmentsToPush));null!=lm.restrictions&&(this.i=lm.restrictions,this.C&&ql(this));};hl.prototype.destroy=function(){this.v.destroy();this.V.destroy();this.V=this.v=null;this.M&&(j.clearTimeout(this.M),this.M=null);this.I&&(j.clearTimeout(this.I),this.I=null);this.m=null;this.j.destroy();this.j=null;fc(this.b).forEach(function(lm){lm.destroy();});this.c=this.b=null;this.a&&(this.a.destroy(),this.a=null);this.l.destroy();this.U=this.i=this.G=this.f=this.h=this.O=this.l=null;};function il(lm,mm){qc(lm.j,lm.h,"sourceopen",lm.Hb.bind(lm));mm.src=j.URL.createObjectURL(lm.h);}k=hl.prototype;k.gb=function(){};function jl(lm,mm,nm){if(!lm.C)return lm=Error("Cannot call attach() right now."),lm.type="app",h.reject(lm);lm.U=mm;lm.f=nm;lm.G=mm.zb();qc(lm.j,lm.O,"bandwidth",lm.cc.bind(lm));lm.a.b&&(qc(lm.j,mm,"bufferingStart",lm.Fb.bind(lm)),qc(lm.j,mm,"bufferingEnd",lm.Eb.bind(lm)));mm=lm.f.setMediaKeys(lm.f.mediaKeys);lm.vb.then(ed(lm,function(){vl(this).then(ed(this,function(){this.v&&this.v.resolve();this.gb();})).catch(ed(this,function(om){this.v&&this.v.reject(om);}));}));return h.all([lm.v,mm]);}k.Da=function(){if(this.C){var lm=Error("Cannot call load() right now.");lm.type="app";return h.reject(lm);}if(!this.a||0==this.a.a.length)return lm=Error("The manifest does not specify any content."),lm.type="stream",h.reject(lm);xk(this.a.a);if(0==this.a.a.length||0==this.a.a[0].a.length||!this.a.a[0].a.some(function(mm){return "video"===mm.contentType;}))return lm=Error("The manifest specifies content that cannot be displayed on this browser/platform."),lm.type="stream",h.reject(lm);this.C=true;this.g.initialStreamBufferSize=Math.max(this.g.initialStreamBufferSize||0,this.a.c);jm(this);ql(this);return h.resolve();};function kl(lm){var mm=yb({type:"manifestwrapped",bubbles:true});lm.dispatchEvent(mm);}k.sb=function(lm){var mm;this.ca&&(mm=this.ca.getOperationLogger("update_manifest"));var nm=Date.now(),om=this.I=null,pm,qm;if(this.ua&&(!this.sa||this.sa>this.lb)){pm=Math.floor(gm(this))+1;pm=Math.min(pm,this.ta);var rm=this.b.video;if(rm=rm?rm.Ma():null)rm=rm.w(),null!=rm.a&&(qm=rm.a);if(this.f.paused||this.Y)pm=0;}pm&&this.lb++;rm=this.a.g;mm&&mm.setResource(rm.toString());(lm?this.qb():this.rb(rm,pm,qm)).then(ed(this,function(sm){om=new zk(sm);return om.update(this.a);})).then(ed(this,function(sm){om.destroy();om=null;var tm=fm(this);this.ka("SegmentIndexesUpdated",tm);tm.some(function(um){return um.Va;})&&kl(this);(tm=hm(this,tm))&&this.f.paused&&tm.end>this.f.currentTime+10&&(this.f.currentTime=tm.end);if(em(this))return mm&&mm.log(),this.Ba();for(tm=0;tm<sm.length;++tm)ml(this,sm[tm]);this.g.initialStreamBufferSize=Math.max(this.g.initialStreamBufferSize||0,this.a.c);this.g.useInitialBufferSizeWhenPaused=this.a.b;jm(this);ql(this);0==Object.keys(this.b).length?vl(this):ll(this,(Date.now()-nm)/1000);mm&&mm.log();})).catch(ed(this,function(sm){mm&&mm.setError(sm).log();om&&(om.destroy(),om=null);if("delay"==sm.type)return ll(this,0);"aborted"!=sm.type&&(sm=zb(sm),this.dispatchEvent(sm),this.a&&ll(this,0));}));};k.rb=function(){return h.reject("Cannot update manifest with this VideoSource implementation.");};k.qb=function(){return h.reject("Cannot update manifest with this VideoSource implementation.");};function ll(lm,mm){if(null!=lm.a.f){var nm=Math.max(lm.a.f,lm.va),nm=Math.max(nm-mm,0);lm.I=j.setTimeout(lm.sb.bind(lm,false),1000*nm);}}function ml(lm,mm){var nm=mm.a.split("/")[0],om=lm.b[nm];if(om&&om.ya()==mm){var pm=lm.c.get(mm.a.split("/")[0]).map(function(qm){return qm.s;}).reduce(function(qm,rm){return qm.concat(rm);},[]).filter(function(qm){return qm.S&&qm.J;});if(0==pm.length){nm=Error("All usable streams have been removed from the manifest.");nm.type="app";nm=zb(nm);lm.dispatchEvent(nm);return;}lm.m[nm].Ta==mm&&delete lm.m[nm];om.za(pm[0],true);mm.destroy();}mm.destroy();}k.ac=function(lm){this.ub=lm;};hl.prototype.setTaggedTimeRangesEntryAdder=hl.prototype.ac;hl.prototype.F=function(){if(!this.c||!this.c.a.hasOwnProperty("video"))return [];for(var lm=this.b.video,lm=(lm=lm?lm.ya():null)?lm.H:0,mm=[],nm=this.c.get("video"),om=0;om<nm.length;++om)for(var pm=nm[om],qm=0;qm<pm.s.length;++qm){var rm=pm.s[qm];if(rm.S&&rm.J){var sm=rm.H,rm=new fa(sm,rm.bandwidth,rm.width,rm.height,rm.id,rm.fbQualityLabel,rm.fbQualityClass);sm==lm&&(rm.active=true);mm.push(rm);}}return mm;};hl.prototype.getVideoTracks=hl.prototype.F;function nl(lm){lm=lm.F();for(var mm=0;mm<lm.length;mm++)if(lm[mm].active)return lm[mm];}hl.prototype.X=function(){if(!this.c||!this.c.a.hasOwnProperty("audio"))return [];for(var lm=this.b.audio,lm=(lm=lm?lm.ya():null)?lm.H:0,mm=[],nm=this.c.get("audio"),om=0;om<nm.length;++om)for(var pm=nm[om],qm=pm.lang,rm=0;rm<pm.s.length;++rm){var sm=pm.s[rm];if(sm.S&&sm.J){var tm=sm.H,sm=new v(tm,sm.bandwidth,qm,sm.id);tm==lm&&(sm.active=true);mm.push(sm);}}return mm;};hl.prototype.getAudioTracks=hl.prototype.X;hl.prototype.ob=function(){if(!this.c||!this.c.a.hasOwnProperty("text"))return [];for(var lm=this.b.text,mm=lm?lm.ya():null,mm=mm?mm.H:0,nm=[],om=this.c.get("text"),pm=0;pm<om.length;++pm)for(var qm=om[pm],rm=qm.lang,sm=0;sm<qm.s.length;++sm){var tm=qm.s[sm].H,um=new ea(tm,rm);tm==mm&&(um.active=true,um.enabled=lm.Ja());nm.push(um);}return nm;};hl.prototype.getTextTracks=hl.prototype.ob;function ol(lm,mm){if(lm.C){for(var nm={},om=lm.a.a[0],pm=0;pm<om.a.length;++pm){var qm=om.a[pm];nm[qm.H]=qm;}lm.c.a={};om=oc(mm);for(pm=0;pm<om.length;++pm){var qm=om[pm],rm=mm.get(qm);if("video"==qm){var sm=rm[0].id;lm.c.push(qm,nm[sm]);}else if("audio"==qm){for(var sm=rm[0].b.split(";")[0],tm=0;tm<rm.length;++tm){var um=rm[tm];um.b.split(";")[0]==sm&&lm.c.push(qm,nm[um.id]);}}else for(tm=0;tm<rm.length;++tm)sm=rm[tm].id,lm.c.push(qm,nm[sm]);}lm.ia=true;if(nm=lm.c.get("audio"))ul(lm,nm),lm.c.set("audio",nm),nm=nm[0].lang||lm.B,ac(2,lm.B,nm)&&(lm.ia=false);if(nm=lm.c.get("text"))ul(lm,nm),lm.c.set("text",nm),nm=nm[0].lang||lm.B,ac(2,lm.B,nm)||(lm.ia=false);}}hl.prototype.selectVideoTrack=function(lm,mm,nm,om){return tl(this,"video",lm,mm,nm,om);};function pl(lm,mm){var nm=lm.b.text;nm&&nm.Ca(mm);}function ql(lm){if(lm.i){for(var mm=false,nm=0;nm<lm.a.a.length;++nm)for(var om=lm.a.a[nm],pm=0;pm<om.a.length;++pm){var qm=om.a[pm];if("video"==qm.contentType)for(var rm=0;rm<qm.s.length;++rm){var sm=qm.s[rm],tm=sm.J;sm.J=true;lm.i.maxWidth&&sm.width>lm.i.maxWidth&&(sm.J=false);lm.i.maxHeight&&sm.height>lm.i.maxHeight&&(sm.J=false);lm.i.minHeight&&sm.height<lm.i.minHeight&&(sm.J=false);lm.i.maxBandwidth&&sm.bandwidth>lm.i.maxBandwidth&&(sm.J=false);lm.i.minBandwidth&&sm.bandwidth<lm.i.minBandwidth&&(sm.J=false);tm!=sm.J&&(mm=true);}}0!=mc(lm.c).length&&mm&&(sl(lm),0<lm.F().length||(mm=Error("The application has restricted all video tracks!"),mm.type="app",mm=zb(mm),lm.dispatchEvent(mm)));}}hl.prototype.pb=function(){return this.a?this.a.b:false;};hl.prototype.isLive=hl.prototype.pb;hl.prototype.Zb=function(lm){this.ib=lm;};hl.prototype.setIsLiveInterrupted=hl.prototype.Zb;hl.prototype.hc=function(){for(var lm in this.b)this.b[lm].xb();};hl.prototype.forceResyncVideoBuffer=hl.prototype.hc;function rl(lm,mm){for(var nm,om=false,pm=new lc(),qm=mc(lm.c),rm=0;rm<qm.length;++rm)for(var sm=qm[rm],tm=0;tm<sm.s.length;++tm){var um=sm.s[tm];um.f.forEach(function(vm){pm.push(vm,um);});}for(nm in mm)if(qm=vb[mm[nm]]||null,sm=pm.get(nm)){for(rm=0;rm<sm.length;++rm)um=sm[rm],tm=um.S,um.S=!qm,tm!=um.S&&(om=true);}else zc(nm);om&&(sl(lm),om=lm.X(),nm=lm.F(),om=lm.c.a.hasOwnProperty("audio")&&0==om.length,nm=lm.c.a.hasOwnProperty("video")&&0==nm.length,om||nm)&&(nm=Error("The key system has restricted all "+(om&&nm?"audio and video tracks.":om?"audio tracks.":"video tracks.")),nm.type="drm",nm=zb(nm),lm.dispatchEvent(nm));}function sl(lm){var mm=yb({type:"trackschanged",bubbles:true});lm.dispatchEvent(mm);}function tl(lm,mm,nm,om,pm,qm){if(!lm.c.a.hasOwnProperty(mm)||!lm.b[mm])return false;for(var rm=lm.c.get(mm),sm=0;sm<rm.length;++sm)for(var tm=rm[sm],um=0;um<tm.s.length;++um){var vm=tm.s[um];if(vm.H==nm){if(!vm.S||!vm.J)return false;if("text"!=mm&&!lm.Wa)return nm=lm.m[mm],lm.m[mm]={Ta:vm,$a:null!=nm&&nm.$a||om,ab:null!=nm&&nm.ab||pm,switchReason:qm},true;bk(lm.G,vm);lm.b[mm].za(vm,om,pm,qm);return true;}}return false;}function ul(lm,mm){for(var nm=0;2>=nm;++nm)for(var om=0;om<mm.length;++om){var pm=mm[om];if(ac(nm,lm.B,pm.lang)){mm.splice(om,1);mm.splice(0,0,pm);return;}}for(om=0;om<mm.length;++om)if(pm=mm[om],pm.b){mm.splice(om,1);mm.splice(0,0,pm);break;}}k=hl.prototype;k.Hb=function(){this.j.Aa(this.h,"sourceopen");this.vb.resolve();};function vl(lm){var mm;lm.ca&&(mm=lm.ca.getOperationLogger("start_streams"));for(var nm=[],om=["audio","video","text"],pm=0;pm<om.length;++pm){var qm=om[pm];lm.c.a.hasOwnProperty(qm)&&nm.push(lm.c.get(qm)[0]);}for(var rm=wl(lm,nm),pm=0;pm<om.length;++pm)if(qm=om[pm],lm.c.a.hasOwnProperty(qm)&&!rm[qm])return lm=Error("Unable to select an initial "+qm+" stream: all "+qm+" streams have been restricted (by the application or by the key system)."),lm.type="stream",mm&&mm.setError(lm).log(),h.reject(lm);nm=fc(rm).map(function(sm){return sm.K.create();});return h.all(nm).then(ed(lm,function(sm){if(!sm.every(function(tm){return tm.length();}))return sm=Error("Some streams are not available."),sm.type="stream",h.reject(sm);sm=hm(this,sm);if(!sm)return sm=Error("Some streams are not available."),sm.type="stream",h.reject(sm);if(!xl(this,rm))return sm=Error("Failed to create Stream objects."),sm.type="stream",h.reject(sm);this.l.start();zl(this,rm,sm);return h.resolve();})).then(function(){mm&&mm.log();}).catch(ed(lm,function(sm){if("aborted"==sm.type){mm&&mm.setError(sm).log();}else{Object.keys(this.b);if(this.a.b)return fb()<this.a.h?(sm=Math.max(this.a.h-Date.now()/1000,this.va),this.I=j.setTimeout(this.sb.bind(this,true),1000*sm)):ll(this,0),mm&&mm.log(),h.resolve();mm&&mm.setError(sm).log();return h.reject(sm);}}));}function wl(lm,mm){for(var nm={},om=0;om<mm.length;++om){var pm=mm[om],qm=null;if("video"==pm.contentType){var rm=lm.l.getInitialVideoTrackId();if(null==rm)continue;qm=pm.s.filter(function(sm){return sm.H==rm;});if(0==qm.length)continue;qm=qm[0];}else if("audio"==pm.contentType){if(rm=lm.l.getInitialAudioTrackId(),qm=pm.s.filter(function(sm){return sm.H==rm;}),0==qm.length){qm=pm.s.filter(function(sm){return sm.S&&sm.J;});if(0==qm.length)continue;qm=pm.s[Math.floor(qm.length/2)];}else qm=qm[0];}else 0<pm.s.length&&(qm=pm.s[0]);nm[pm.contentType]=qm;}return nm;}function xl(lm,mm){var nm={},om;for(om in mm){var pm=mm[om],pm="text"==om?new lj(lm,lm.f):yl(lm,pm);if(!pm)return fc(nm).forEach(function(qm){qm.destroy();}),false;nm[om]=pm;}lm.b=nm;return true;}function yl(lm,mm){var nm=new bj(lm,lm.f,lm.h,ui(mm),lm.O,lm.ub);nm.L(lm.g);return nm;}function zl(lm,mm,nm){lm.mb=lm.f.playbackRate;lm.f.playbackRate=0;bm(lm,nm);var om;lm.R&&lm.R<=nm.end&&lm.R>=nm.start?om=lm.R:lm.a.b?(om=nm.end,lm.jb=true):om=nm.start;qc(lm.j,lm.f,"seeking",lm.Pb.bind(lm));lm.f.currentTime!=om&&(lm.f.currentTime=om,lm.A=om);cm(lm,nm.start,nm.end);var pm=[],qm;for(qm in lm.b){nm=lm.b[qm];ed(lm,function(sm){pm.push(sm.Ab(this.V).then(ed(this,function(tm){var um=sm.Ka();um>this.Ga&&(this.Ga=um);return tm;})));})(nm);qc(lm.j,nm,"ended",lm.Qb.bind(lm));om=mm[qm];bk(lm.G,om);var rm=lm.l.getInitialSwitchReason()||void 0;nm.za(om,false,void 0,rm);}h.all(pm).then(lm.Db.bind(lm)).catch(ed(lm,function(sm){"destroy"!=sm.type&&(sm=zb(sm),this.dispatchEvent(sm));}));pl(lm,lm.ia);}k.Db=function(lm){o(lm&&lm.length==Object.keys(this.b).length);for(var mm=Number.POSITIVE_INFINITY,nm=Number.NEGATIVE_INFINITY,om=0;om<lm.length;++om)var pm=lm[om],mm=Math.min(mm,pm),nm=Math.max(nm,pm);lm=fm(this);for(om=0;om<lm.length;++om)lm[om].na(nm);am(this,lm,nm);om=mc(this.c).map(function(qm){return qm.s;}).reduce(function(qm,rm){return qm.concat(rm);},[]).map(function(qm){var rm=[qm.K.create()];qm.N&&rm.push(qm.N.create(this.ca));return h.all(rm);});h.all(om).then(ed(this,function(qm){for(var rm=0;rm<qm.length;++rm)qm[rm][0].na(nm);this.Wa=true;for(var sm in this.m)qm=this.m[sm],rm=this.b[sm],bk(this.G,qm.Ta),rm.za(qm.Ta,qm.$a,qm.ab,qm.switchReason);this.m={};})).catch(ed(this,function(qm){"aborted"!=qm.type&&(qm=zb(qm),this.dispatchEvent(qm));}));};function am(lm,mm,nm){if(mm=hm(lm,mm))bm(lm,mm),cm(lm,mm.start,mm.end);0!=nm?(nm=lm.f.currentTime+nm,lm.f.currentTime=nm,lm.A=nm):lm.jb&&mm&&(lm.f.currentTime=mm.end);lm.f.playbackRate=lm.mb;lm.a.b&&null!=lm.a.f&&ll(lm,0);im(lm);lm.V.resolve();}function bm(lm,mm){if(lm.a.b){isNaN(lm.h.duration)&&(lm.h.duration=mm.end+2592000);}else if(isNaN(lm.h.duration)||mm.end>lm.h.duration){lm.h.duration=mm.end;for(var nm=0;nm<lm.h.sourceBuffers.length;++nm)lm.h.sourceBuffers[nm].appendWindowEnd=mm.end;}}k.Rb=function(){this.M=null;im(this);var lm=hm(this,fm(this));lm&&(this.a.b&&this.ra!=lm.w&&(this.ra=lm.w,null!=this.o&&(j.clearTimeout(this.o),this.o=null)),cm(this,lm.start,lm.end),this.f.paused||dm(this,this.f.currentTime,lm.start,lm.end));};function cm(lm,mm,nm){mm=yb({type:"seekrangechanged",bubbles:true,start:mm,end:nm});lm.dispatchEvent(mm);}k.Pb=function(){var lm=this.f.currentTime;if(null!=this.A){if(lm>=this.A-.01&&lm<=this.A+.01){this.A=null;return;}this.A=null;}var mm=hm(this,fm(this));if(mm){var nm=mm.end;(mm=dm(this,lm,mm.start,nm))||(lm<=nm+.01?mm=false:(this.f.currentTime=nm,mm=true));if(!mm)for(var om in this.b)this.b[om].wb();}};function dm(lm,mm,nm,om){if(mm>=nm-.01)return false;mm=0;if(lm.a.b){mm=.5;for(var pm in lm.b)if(!lm.b[pm].yb(nm+mm)){mm=lm.a.c;break;}}lm.f.currentTime=Math.min(nm+mm,om);return true;}k.Qb=function(){if(!this.a.b){for(var lm in this.b)if(!this.b[lm].Oa())return;this.Ba();}};function em(lm){return lm.a.i&&lm.f.currentTime+.5>lm.ra?true:false;}k.Fb=function(){this.Y=true;if(em(this))return this.Ba();fc(this.b).every(function(lm){return lm.Oa();})&&(this.o=j.setTimeout(this.Ba.bind(this),1000*this.kb));};k.Eb=function(){this.Y=false;null!=this.o&&(j.clearTimeout(this.o),this.o=null);};k.cc=function(){var lm=this.G,mm=this.O.getBandwidth();lm.estimatedBandwidth=mm;lm.bandwidthHistory.push(new dk(mm));};k.Ba=function(){this.Y=false;this.o=null;this.h.endOfStream();};function fm(lm){return fc(lm.b).map(function(mm){return mm.Ma();}).filter(function(mm){return null!=mm;});}function gm(lm){return Math.max(lm.a?lm.a.c:1,lm.hb?lm.g.streamBufferSize||0:0);}function hm(lm,mm){for(var nm=0,om=Number.POSITIVE_INFINITY,pm=Number.POSITIVE_INFINITY,qm=0;qm<mm.length;++qm){var rm=mm[qm].La(),nm=Math.max(nm,rm.start);null!=rm.end&&(om=Math.min(om,rm.end));mm[qm].length()&&(pm=Math.min(pm,mm[qm].w().endTime));}if(om==Number.POSITIVE_INFINITY)if(om=lm.a.a[0],om.b){om=(om.start||0)+om.b;}else return null;lm.a.b&&(qm=gm(lm),om=Math.max(om-qm,nm));if(nm>om)return null;om=Math.floor(100000*om)/100000;return {start:nm,end:om,w:pm};}function im(lm){lm.a.b&&(lm.M=j.setTimeout(lm.Rb.bind(lm),1000));}function jm(lm){for(var mm in lm.b)lm.b[mm].L(lm.g);}k.Ka=function(){return this.Ga;};hl.prototype.getLongestInitResponseTime=hl.prototype.Ka;function km(lm,mm,nm,om){nm||(nm=new vc());om||(om=new fl());hl.call(this,null,nm,om);"string"===typeof lm?this.Xb=lm:this.xa=lm;this.L=null;this.W=mm;this.pa=[];this.Ya=[];this.Za=[];this.qa=0;this.D=null;}n(km,hl);m("shaka.player.DashVideoSource",km);km.prototype.bb=function(){return this.xa||this.L;};km.prototype.debugGetManifest=km.prototype.bb;km.prototype.dc=function(lm,mm,nm){this.pa.push(lm);this.Ya.push(mm||"");this.Za.push(nm||"");};km.prototype.addExternalCaptions=km.prototype.dc;km.prototype.fc=function(lm){this.D=lm;};km.prototype.setNetworkCallback=km.prototype.fc;km.prototype.destroy=function(){this.L=this.D=this.W=null;hl.prototype.destroy.call(this);};km.prototype.Da=function(){var lm,mm=ed(this,function(qm){this.ka("MPDFetchDuration",(Date.now()-lm)/1000);this.L=qm;for(var rm=0;rm<this.pa.length;rm++){var sm=qm,tm=this.pa[rm],um=this.Ya[rm],vm=this.Za[rm];if(0!==sm.a.length){var wm=new uf();wm.contentType="text";wm.lang=um||"en";wm.c=true;um=new yf();um.bandwidth=0;um.f=vm||"text/vtt";um.u=[new cf(tm)];wm.a.push(um);sm.a[0].b.push(wm);mg(sm.a[0]);}}this.a=pj(new oj(this.W),qm,this.D);return hl.prototype.Da.call(this);});if(this.xa)return lm=Date.now(),mm(this.xa);var nm=[new cf(this.Xb)],om;if(this.ua){om=Math.floor(gm(this))+1;var pm=nl(this);om=Math.min(om,this.ta);om=new uh(om);om.b=Math.floor(gm(this)+1);null!=pm&&(om.a=pm.streamInfoID);}nm=new nh(this.D,nm);nm=new sh(nm,this.wa,om);lm=Date.now();return th(nm,this.ca).then(mm);};km.prototype.gb=function(){if(this.cb){var lm=this.a;if(lm=(lm=lm&&lm.a)&&lm[0])lm=lm.a.reduce(function(mm,nm){return mm.concat(nm.s);},[]),h.all(lm.map(function(mm){mm=mm.K;return mm.Bb?mm.fa:mm.create();})).then(function(mm){mm=mm.filter(function(nm){return null!=nm;});this.ka("InitialSegmentIndexes",mm);}.bind(this));}};km.prototype.rb=function(lm,mm,nm){if(this.f.paused&&this.qa+10000>Date.now()&&this.a)return h.reject({type:"delay"});var om;mm&&void 0!=nm&&(om=new uh(mm),om.c=nm,mm=nl(this),null!=mm&&(om.a=mm.streamInfoID));lm=new sh(lm,this.wa,om);var pm=Date.now();return th(lm,this.ca).then(ed(this,function(qm){this.qa=Date.now();this.ka("MPDFetchDuration",(this.qa-pm)/1000);this.L=qm;qm=pj(new oj(this.W),qm,this.D);return h.resolve(qm);}));};km.prototype.qb=function(){var lm=pj(new oj(this.W),this.L,this.D);return h.resolve(lm);};}.bind(i,b))();f.exports=i.shaka;}),null);