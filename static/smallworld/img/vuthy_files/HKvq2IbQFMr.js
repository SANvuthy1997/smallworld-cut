if (self.CavalryLogger) { CavalryLogger.start_js(["qOGVd"]); }

__d("VideoChannelEntryPoint",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={CASTING:"casting",GROUP:"group",NEWSFEED:"newsfeed",PAGE:"page",PROFILE:"profile",SAVED_STORY:"saved_story",SEARCH:"search",SEARCH_TOPIC_MEDIA:"search_topic_media",PERMALINK:"permalink",WWW_RHC:"www_rhc",VIDEO_HOME:"video_home",VIDEO_HOME_LATEST_FROM_PAGES_CHANNEL:"video_home_latest_from_pages_channel",VIDEO_HOME_SAVED_CHANNEL:"video_home_saved_channel",VIDEO_HOME_SHARED_WITH_YOU_CHANNEL:"video_home_shared_with_you_channel",VIDEO_HOME_TOP_CHANNEL:"video_home_top_channel",VIDEO_HOME_WATCHED_CHANNEL:"video_home_watched_channel",UNKNOWN:"unknown",LIVE_MAP:"live_map",PLAYLIST:"playlist"};}),null);
__d("VideoPlayerStreamSwitchReasons",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={BANDWIDTH:"bandwidth",FORCED:"forced",PREFER_QUALITY_CLASS:"prefer_quality_class",USER:"user"};}),null);
__d('TaggedTimeRanges',['sprintf'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this.$TaggedTimeRanges1=[];this.$TaggedTimeRanges2=0;this.$TaggedTimeRanges3=0;this.$TaggedTimeRanges4=i?i:function(j,k){return j===k;};}h.prototype.add=function(i,j,k){'use strict';if(j<i)return;if(j===i)return;if(this.$TaggedTimeRanges1.length===0){this.$TaggedTimeRanges1.push({start:i,end:j,tag:k});return;}var l=0,m=0;for(var n=0;n<this.$TaggedTimeRanges1.length;n++){if(i>=this.$TaggedTimeRanges1[n].start)l=n+1;if(j<=this.$TaggedTimeRanges1[n].end)m=n;if(j<this.$TaggedTimeRanges1[n].start)break;}this.$TaggedTimeRanges1.splice(l,m-l,{start:i,end:j,tag:k});this.$TaggedTimeRanges5(l);};h.prototype.$TaggedTimeRanges5=function(i){'use strict';var j=this.$TaggedTimeRanges1[i],k=null;if(i!==0)k=this.$TaggedTimeRanges1[i-1];if(k!==null)if(this.$TaggedTimeRanges4(k.tag,j.tag)){if(k.end>=j.start){this.$TaggedTimeRanges1.splice(i-1,2,{start:k.start,end:Math.max(j.end,k.end),tag:j.tag});i--;}}else{if(k.end>=j.start)this.$TaggedTimeRanges1.splice(i-1,1,{start:k.start,end:j.start,tag:k.tag});if(k.end>j.end)this.$TaggedTimeRanges1.splice(i+1,0,{start:j.end,end:k.end,tag:k.tag});}var l=null;if(i!==this.$TaggedTimeRanges1.length-1)l=this.$TaggedTimeRanges1[i+1];if(l)if(this.$TaggedTimeRanges4(l.tag,j.tag)){if(l.start<=j.end)this.$TaggedTimeRanges1.splice(i,2,{start:j.start,end:Math.max(l.end,j.end),tag:j.tag});}else if(l.start<=j.end)if(l.end<j.end){this.$TaggedTimeRanges1.splice(i,1,{start:j.start,end:l.start,tag:j.tag});this.$TaggedTimeRanges1.push({start:l.end,end:j.end,tag:j.tag});}else this.$TaggedTimeRanges1.splice(i+1,1,{start:j.end,end:l.end,tag:l.tag});};h.prototype.get=function(i){'use strict';var j=i>=this.$TaggedTimeRanges3?this.$TaggedTimeRanges2:0,k=null;for(var l=j;l<this.$TaggedTimeRanges1.length;l++)if(this.$TaggedTimeRanges1[l].start<=i&&i<this.$TaggedTimeRanges1[l].end){k=l;break;}this.$TaggedTimeRanges2=k===null?0:k;this.$TaggedTimeRanges3=i;return k===null?null:this.$TaggedTimeRanges1[k].tag;};h.prototype.getLength=function(){'use strict';return this.$TaggedTimeRanges1.length;};f.exports=h;}),null);
__d("VideoChannel",[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=null,i={get:function j(){return h;},set:function j(k){h=k;}};f.exports=i;}),null);
__d('VideoPivotsRegister',['Arbiter','AttachmentRelatedShareConstants','destroyOnUnload','SubscriptionsHandler'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={registerVideoUnit:function i(j,k){var l=0,m=new (c('SubscriptionsHandler'))(),n=function o(){return m.release();};m.addSubscriptions(j.addListener('updateStatus',function(o){if(l<k&&o.position>=k){c('Arbiter').inform(c('AttachmentRelatedShareConstants').FBVIDEO_VIEW,{fbvideo_id:j.getVideoID(),attachment:j.getRootNode()});n();}l=o.position;}));c('destroyOnUnload')(n);}};f.exports=h;}),null);
__d('VideoClickForMoreOverlay',['cx','CSS','EventListener','VideoPlayerUIComponentDrawer','DOM'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j,k,l){'use strict';this.$VideoClickForMoreOverlay1=j;this.$VideoClickForMoreOverlay2=k;this.$VideoClickForMoreOverlay3=false;this.$VideoClickForMoreOverlay4=this.$VideoClickForMoreOverlay1.registerDrawer(c('VideoPlayerUIComponentDrawer').priorities.ClickForMore,l?i.REDESIGN_HEIGHT:i.DEFAULT_HEIGHT);this.$VideoClickForMoreOverlay4.addListener('reposition',this.$VideoClickForMoreOverlay5.bind(this));this.$VideoClickForMoreOverlay1.addListener('VideoControls/visibilityUpdate',function(n){var o=n.areControlsVisible;return (this.$VideoClickForMoreOverlay6(o));}.bind(this));var m=this.$VideoClickForMoreOverlay1.getOption('VideoControls','areControlsVisible');if(m)this.$VideoClickForMoreOverlay6(m);this.$VideoClickForMoreOverlay1.addListener('stateChange',this.$VideoClickForMoreOverlay7.bind(this));c('EventListener').listen(this.$VideoClickForMoreOverlay2,'click',function(){return this.$VideoClickForMoreOverlay8();}.bind(this));}i.prototype.$VideoClickForMoreOverlay5=function(j){'use strict';c('DOM').setAttributes(this.$VideoClickForMoreOverlay2,{style:'bottom:'+j+'px;'});};i.prototype.$VideoClickForMoreOverlay6=function(j){'use strict';this.$VideoClickForMoreOverlay3=j;this.$VideoClickForMoreOverlay7();};i.prototype.$VideoClickForMoreOverlay7=function(){'use strict';var j=!this.$VideoClickForMoreOverlay1.isPlayerVersion('silvercity')&&!this.$VideoClickForMoreOverlay1.getIsInChannel()&&this.$VideoClickForMoreOverlay1.isState('playing');if(j&&this.$VideoClickForMoreOverlay3){this.$VideoClickForMoreOverlay9();}else this.$VideoClickForMoreOverlay10();};i.prototype.$VideoClickForMoreOverlay8=function(){'use strict';this.$VideoClickForMoreOverlay1.clickVideo();};i.prototype.$VideoClickForMoreOverlay9=function(){'use strict';c('CSS').removeClass(this.$VideoClickForMoreOverlay2,"_2is8");this.$VideoClickForMoreOverlay4.reserve();};i.prototype.$VideoClickForMoreOverlay10=function(){'use strict';c('CSS').addClass(this.$VideoClickForMoreOverlay2,"_2is8");this.$VideoClickForMoreOverlay4.release();};i.DEFAULT_HEIGHT=18;i.REDESIGN_HEIGHT=38;f.exports=i;}),null);
__d('VideoWithClickToChannelView',['cx','Bootloader','CSS','Map','VideoChainingCaller','VideoChannel','VideoChannelEntryPoint','VideoChannelViewGatings','VideoPlayerReason','logVideosClickTracking'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j,k,l,m,n,o,p,q){'use strict';this.$VideoWithClickToChannelView1=j;this.$VideoWithClickToChannelView2=k;this.$VideoWithClickToChannelView3=n;this.$VideoWithClickToChannelView4=l;this.$VideoWithClickToChannelView5=m;this.$VideoWithClickToChannelView6=new (c('Map'))();this.$VideoWithClickToChannelView7=o;this.$VideoWithClickToChannelView8=p;this.$VideoWithClickToChannelView9=q;this.$VideoWithClickToChannelView1.addListener('stateChange',this.$VideoWithClickToChannelView10.bind(this));this.$VideoWithClickToChannelView1.registerOption('VideoWithClickToChannelView','isChannelEligible',function(){return this.isChannelEligible();}.bind(this));this.$VideoWithClickToChannelView1.registerOption('VideoWithClickToChannelView','canOpenFromVideoPlayer',function(){return this.canOpenChannelView();}.bind(this));this.$VideoWithClickToChannelView1.setLogEntryPropertyGetters({channel_eligibility:'eligible'});if(this.canOpenChannelView())this.$VideoWithClickToChannelView11();this.$VideoWithClickToChannelView1.addListener('clickVideo',this.$VideoWithClickToChannelView12.bind(this));if(this.$VideoWithClickToChannelView1.hasSeenClick())this.$VideoWithClickToChannelView12();}i.prototype.$VideoWithClickToChannelView13=function(){'use strict';return this.$VideoWithClickToChannelView1.hasOption('VideoControls','available');};i.prototype.$VideoWithClickToChannelView14=function(){'use strict';this.$VideoWithClickToChannelView15('hideOnFinish');this.$VideoWithClickToChannelView15('hideOnPause');};i.prototype.$VideoWithClickToChannelView15=function(j){'use strict';var k=this.$VideoWithClickToChannelView1.getOption('VideoControls',j);this.$VideoWithClickToChannelView6.set(j,k);};i.prototype.$VideoWithClickToChannelView11=function(){'use strict';c('CSS').addClass(this.$VideoWithClickToChannelView1.getVideoNode(),"_244o");};i.prototype.$VideoWithClickToChannelView16=function(){'use strict';c('CSS').removeClass(this.$VideoWithClickToChannelView1.getVideoNode(),"_244o");};i.prototype.$VideoWithClickToChannelView10=function(){'use strict';if(this.canOpenChannelView()){this.$VideoWithClickToChannelView11();}else this.$VideoWithClickToChannelView16();};i.prototype.$VideoWithClickToChannelView12=function(){'use strict';if(!this.canOpenChannelView()){if(this.$VideoWithClickToChannelView1.isState('playing')){if(this.$VideoWithClickToChannelView1.getOption('VideoWithLiveBroadcast','isLive'))return;this.$VideoWithClickToChannelView1.pause(c('VideoPlayerReason').USER);}else{c('logVideosClickTracking')(this.$VideoWithClickToChannelView1.getVideoNode());this.$VideoWithClickToChannelView1.play(c('VideoPlayerReason').USER);}}else this.$VideoWithClickToChannelView17();};i.prototype.isChannelEligible=function(){'use strict';var j=c('VideoChannelViewGatings').allowChannelViewForFlash||this.$VideoWithClickToChannelView4===c('VideoChannelEntryPoint').VIDEO_HOME,k=!this.$VideoWithClickToChannelView1.isPlayerVersion('silvercity')||j,l=c('VideoChannelViewGatings').channelView||this.$VideoWithClickToChannelView4===c('VideoChannelEntryPoint').VIDEO_HOME;return l&&!c('VideoChannel').get()&&!this.$VideoWithClickToChannelView1.isState('fallback')&&!this.$VideoWithClickToChannelView1.isFullscreen()&&k;};i.prototype.canOpenChannelView=function(){'use strict';var j=true;if(c('VideoChannelViewGatings').channelViewWithInlineControls)if(!this.$VideoWithClickToChannelView1.isState('playing'))j=false;return this.isChannelEligible()&&j;};i.prototype.$VideoWithClickToChannelView17=function(){'use strict';c('logVideosClickTracking')(this.$VideoWithClickToChannelView1.getVideoNode());c('Bootloader').loadModules(["VideoChannelController"],function(j){j.openFromVideoPlayer(this.$VideoWithClickToChannelView1,this.$VideoWithClickToChannelView2,this.$VideoWithClickToChannelView5,this.$VideoWithClickToChannelView18());}.bind(this),'VideoWithClickToChannelView');};i.prototype.$VideoWithClickToChannelView18=function(){'use strict';if(!this.$VideoWithClickToChannelView7)return null;return {originalVideoIds:this.$VideoWithClickToChannelView7,isFromVideoViewCarousel:this.$VideoWithClickToChannelView8,shouldFetchMoreVideos:this.$VideoWithClickToChannelView9};};f.exports=i;}),null);
__d('CustomAbrManager',['EventListener','SubscriptionsHandler','VideoPlayerShakaExperiments','VideoPlayerStreamSwitchReasons','VideoQualityClasses'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('VideoPlayerShakaExperiments').module.player.VideoTrack;function i(j){'use strict';this.$CustomAbrManager1=null;this.$CustomAbrManager2=null;this.$CustomAbrManager3=new (c('SubscriptionsHandler'))();this.$CustomAbrManager4=Number.POSITIVE_INFINITY;this.$CustomAbrManager5=true;this.$CustomAbrManager6=false;this.$CustomAbrManager7=j.maxWidth;this.$CustomAbrManager8=j.maxHeight;this.$CustomAbrManager9=j.minPlayQuality;this.$CustomAbrManager10=j.maxPlayQuality;this.$CustomAbrManager11=j.initiallyForcedRepresentations;this.$CustomAbrManager12=null;this.$CustomAbrManager13=null;this.$CustomAbrManager14=null;if(j.enableAdaptation){this.$CustomAbrManager15=j.bandwidthDowngradeTarget;this.$CustomAbrManager16=j.bandwidthUpgradeTarget;}}i.prototype.destroy=function(){'use strict';this.$CustomAbrManager3.release();this.$CustomAbrManager3.engage();this.$CustomAbrManager1=null;this.$CustomAbrManager2=null;this.$CustomAbrManager5=false;};i.prototype.setResolutionConstraint=function(j,k){'use strict';this.$CustomAbrManager7=j;this.$CustomAbrManager8=k;this.$CustomAbrManager17();};i.prototype.initialize=function(j,k){'use strict';if(this.$CustomAbrManager1||this.$CustomAbrManager2)return;this.$CustomAbrManager1=j;this.$CustomAbrManager2=k;};i.prototype.start=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2||this.$CustomAbrManager6)return;this.$CustomAbrManager4=Date.now()+i.FIRST_SWITCH_INTERVAL;this.$CustomAbrManager3.addSubscriptions(c('EventListener').listen(this.$CustomAbrManager1,'bandwidth',this.$CustomAbrManager18.bind(this)),c('EventListener').listen(this.$CustomAbrManager2,'adaptation',this.$CustomAbrManager19.bind(this)),c('EventListener').listen(this.$CustomAbrManager2,'trackschanged',this.$CustomAbrManager20.bind(this)));this.$CustomAbrManager6=true;};i.prototype.$CustomAbrManager20=function(){'use strict';this.$CustomAbrManager17();};i.prototype.setPreferredVideoTrack=function(j){'use strict';var k=i.$CustomAbrManager21(this.$CustomAbrManager2.getVideoTracks()),l=k?h.compare(k,j)<0:false;this.$CustomAbrManager12=j;this.$CustomAbrManager17(null,l);};i.prototype.unsetPreferredVideoTrack=function(){'use strict';this.$CustomAbrManager12=null;this.$CustomAbrManager17(null,false);};i.prototype.enable=function(j){'use strict';this.$CustomAbrManager5=j;};i.prototype.getInitialVideoTrackId=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2)return null;var j=this.$CustomAbrManager22();return j?j.id:null;};i.prototype.getInitialSwitchReason=function(){'use strict';return this.$CustomAbrManager14;};i.prototype.getInitialAudioTrackId=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2)return null;var j=this.$CustomAbrManager23();return j?j.id:null;};i.prototype.selectVideoTrack=function(j,k,l,m){'use strict';if(!this.$CustomAbrManager6)return;this.$CustomAbrManager2.selectVideoTrack(j.id,k,l,m);};i.$CustomAbrManager21=function(j){'use strict';for(var k=0;k<j.length;++k)if(j[k].active)return j[k];return null;};i.prototype.$CustomAbrManager18=function(event){'use strict';if(Date.now()<this.$CustomAbrManager4)return;this.$CustomAbrManager17(event);};i.prototype.$CustomAbrManager17=function(event,j){'use strict';if(!this.$CustomAbrManager5)return;var k=this.$CustomAbrManager22();if(k){if(k.active){this.$CustomAbrManager4=Date.now()+i.MIN_EVAL_INTERVAL;return;}this.selectVideoTrack(k,!!j,0,this.$CustomAbrManager13);}this.$CustomAbrManager4=Number.POSITIVE_INFINITY;};i.prototype.$CustomAbrManager19=function(event){'use strict';if(this.$CustomAbrManager4==Number.POSITIVE_INFINITY)this.$CustomAbrManager4=Date.now()+i.MIN_SWITCH_INTERVAL;};i.prototype.$CustomAbrManager22=function(){var j,k=this;'use strict';var l=this.$CustomAbrManager2.getVideoTracks();if(l.length==0)return null;if(!this.$CustomAbrManager6)for(var m=0;m<l.length;m++)if(this.$CustomAbrManager11&&this.$CustomAbrManager11.includes(l[m].streamInfoID)){this.$CustomAbrManager13=c('VideoPlayerStreamSwitchReasons').FORCED;this.$CustomAbrManager14=c('VideoPlayerStreamSwitchReasons').FORCED;return l[m];}if(this.$CustomAbrManager12){var n=l.find(function(y){return y.id===this.$CustomAbrManager12.id;}.bind(this));if(n){this.$CustomAbrManager13=c('VideoPlayerStreamSwitchReasons').USER;return n;}}l.sort(h.compare);if(this.$CustomAbrManager9!==null||this.$CustomAbrManager10!==null){var j=function(){var y=k.$CustomAbrManager9!==null?c('VideoQualityClasses').indexOf(k.$CustomAbrManager9):0,z=k.$CustomAbrManager10!==null?c('VideoQualityClasses').indexOf(k.$CustomAbrManager10):c('VideoQualityClasses').length-1;if(y<=z){var aa=l.filter(function(ca){return c('VideoQualityClasses').indexOf(ca.fbQualityClass)>=y&&c('VideoQualityClasses').indexOf(ca.fbQualityClass)<=z;});k.$CustomAbrManager13=c('VideoPlayerStreamSwitchReasons').PREFER_QUALITY_CLASS;if(!aa.length)return {v:l[l.length-1]};var ba=c('VideoQualityClasses').indexOf('sd');if(l.length==2&&aa.length==2&&z<=ba)return {v:l[0]};l=aa;}}();if(typeof j==="object")return j.v;}var o=l[0],p=this.$CustomAbrManager8,q=this.$CustomAbrManager7;l=l.filter(function(y){return y.width<=q||y.height<=p;});var r=i.$CustomAbrManager21(this.$CustomAbrManager2.getAudioTracks()),s=r?r.bandwidth:0,t=this.$CustomAbrManager1.getBandwidth();for(var m=0;m<l.length;m++){var u=l[m],v=m+1<l.length?l[m+1]:{bandwidth:Number.POSITIVE_INFINITY};if(!u.bandwidth)continue;var w=(u.bandwidth+s)/this.$CustomAbrManager15,x=(v.bandwidth+s)/this.$CustomAbrManager16;if(t>=w&&t<=x){o=u;if(o.active)break;}}this.$CustomAbrManager13=c('VideoPlayerStreamSwitchReasons').BANDWIDTH;return o;};i.prototype.$CustomAbrManager23=function(){'use strict';var j=this.$CustomAbrManager2.getAudioTracks();if(j.length==0)return null;if(!this.$CustomAbrManager6)for(var k=0;k<j.length;k++)if(this.$CustomAbrManager11&&this.$CustomAbrManager11.includes(j[k].streamInfoID))return j[k];return null;};i.FIRST_SWITCH_INTERVAL=c('VideoPlayerShakaExperiments').firstSwitchInterval;i.MIN_SWITCH_INTERVAL=c('VideoPlayerShakaExperiments').minSwitchInterval;i.MIN_EVAL_INTERVAL=c('VideoPlayerShakaExperiments').minEvalInterval;f.exports=i;}),null);
__d('VideoPlayerLiveStreamState',['RTISubscriptionManager','EventEmitter'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j={interrupt:'streamInterruptAt',ended:'endedAt'};h=babelHelpers.inherits(k,c('EventEmitter'));i=h&&h.prototype;function k(l){i.constructor.call(this);this.$VideoPlayerLiveStreamState1=[];for(var m in j)this.$VideoPlayerLiveStreamState1.push(c('RTISubscriptionManager').subscribe('video_broadcast/'+m+'_'+l,this.$VideoPlayerLiveStreamState2.bind(this,j[m])));}k.prototype.unsubscribe=function(){for(var l=this.$VideoPlayerLiveStreamState1,m=Array.isArray(l),n=0,l=m?l:l[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var o;if(m){if(n>=l.length)break;o=l[n++];}else{n=l.next();if(n.done)break;o=n.value;}var p=o;p.unsubscribe();}};k.prototype.$VideoPlayerLiveStreamState2=function(l,m){var n=JSON.parse(m.payload||'{}')||{},o=n.time_position;if(typeof o==='number'){o/=1000;this.emit(l,o);}};f.exports=k;}),null);
__d('VideoPlayerHTML5Shaka',['invariant','Promise','BlobFactory','CacheStorage','CustomAbrManager','EventEmitter','EventListener','Event','Run','TaggedTimeRanges','VideoDashPrefetchCache','VideoPlayerLiveStreamState','VideoPlayerShakaExperiments','VideoQualityClasses','VideoPlayerShakaPerformanceLogger','dispatchEvent','Shaka'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('VideoPlayerShakaExperiments').module.player,l=k.Player,m=k.DashVideoSource,n=k.VideoTrack,o=c('VideoPlayerShakaExperiments').module.dash.mpd.parseMpd,p=c('VideoPlayerShakaExperiments').module.util,q=p.EWMACacheBandwidthEstimator,r=p.EWMASignedURLBandwidthEstimator,s=p.FailoverUri,t=window.devicePixelRatio||1,u=new (c('CacheStorage'))('localstorage','_video_'),v=new q(c('VideoPlayerShakaExperiments').cacheDelay,c('VideoPlayerShakaExperiments').cacheBandwidth,c('VideoPlayerShakaExperiments').useStoredBandwidthEstimate?u.get('bandwidthEstimate'):undefined);s.setPrefetchCacheValueGetter(c('VideoDashPrefetchCache').getCacheValue);c('Run').onUnload(function(){return u.set('bandwidthEstimate',v.getBandwidth());});c('Shaka').polyfill.Fullscreen.install();c('Shaka').polyfill.MediaKeys.install();function w(ca){var da=ca.getVideoTracks();da.sort(n.compare);var ea=da.reduce(function(fa,ga){return ga.fbQualityLabel=='hd'?ga:fa;});if(!ea)return da.pop().id;return ea.id;}function x(ca){var da=ca.getVideoTracks();da.sort(n.compare);return da.shift().id;}function y(ca){var da=c('BlobFactory').getBlob([ca]);return URL.createObjectURL(da);}function z(ca,event){var da=c('EventListener').capture(ca.parentNode,event,function(ea){if(ea.target!=ca)return;da.remove();c('Event').kill(ea);});}function aa(ca,da){'use strict';this.$DisabledAbrManager1=ca;this.$DisabledAbrManager2=da;}aa.prototype.initialize=function(ca,da){'use strict';this.$DisabledAbrManager3=da;};aa.prototype.start=function(){'use strict';if(this.$DisabledAbrManager4)return;this.$DisabledAbrManager4=true;if(this.$DisabledAbrManager2&&this.$DisabledAbrManager1)this.$DisabledAbrManager3.selectVideoTrack(w(this.$DisabledAbrManager3),false);};aa.prototype.enable=function(){'use strict';};aa.prototype.getInitialVideoTrackId=function(){'use strict';if(this.$DisabledAbrManager2)return x(this.$DisabledAbrManager3);var ca=this.$DisabledAbrManager1?w(this.$DisabledAbrManager3):x(this.$DisabledAbrManager3);return ca;};aa.prototype.setPreferredVideoTrack=function(ca){'use strict';if(this.$DisabledAbrManager4)this.$DisabledAbrManager3.selectVideoTrack(ca.id,true);};aa.prototype.unsetPreferredVideoTrack=function(){'use strict';};aa.prototype.destroy=function(){'use strict';this.$DisabledAbrManager3=null;};i=babelHelpers.inherits(ba,c('EventEmitter'));j=i&&i.prototype;function ba(ca,da,ea){var fa,ga=this,ha=ea.videoID,ia=ea.width,ja=ea.height,ka=ea.manifest,la=ea.manifestUrl,ma=ea.isLive,na=ea.minPlayQuality,oa=ea.maxPlayQuality;'use strict';j.constructor.call(this);this.$VideoPlayerHTML5Shaka1=na;this.$VideoPlayerHTML5Shaka2=oa;this.$VideoPlayerHTML5Shaka3=false;this.$VideoPlayerHTML5Shaka4=null;this.$VideoPlayerHTML5Shaka5=1;this.$VideoPlayerHTML5Shaka6=false;this.$VideoPlayerHTML5Shaka7=ma;this.$VideoPlayerHTML5Shaka8=ia;this.$VideoPlayerHTML5Shaka9=ja;this.$VideoPlayerHTML5Shaka10=c('VideoPlayerShakaPerformanceLogger').isEnabled()?new (c('VideoPlayerShakaPerformanceLogger'))(ha,ma):null;if(!c('VideoPlayerShakaExperiments').improveRebufferLogging)(function(){ga.$VideoPlayerHTML5Shaka11=true;var qa=c('EventListener').listen(ca,'playing',function(){this.$VideoPlayerHTML5Shaka11=false;qa.remove();}.bind(ga));})();c('EventListener').listen(ca,'timeupdate',function(qa){this.$VideoPlayerHTML5Shaka12(qa.target.currentTime);}.bind(this));this.$VideoPlayerHTML5Shaka13=null;this.$VideoPlayerHTML5Shaka14=null;this.$VideoPlayerHTML5Shaka15=null;this.$VideoPlayerHTML5Shaka16=new l(ca);this.$VideoPlayerHTML5Shaka16.addEventListener('bufferingStart',function(){return this.$VideoPlayerHTML5Shaka17();}.bind(this));this.$VideoPlayerHTML5Shaka16.addEventListener('bufferingEnd',function(){return this.$VideoPlayerHTML5Shaka18();}.bind(this));this.$VideoPlayerHTML5Shaka16.addEventListener('error',function(qa){return this.$VideoPlayerHTML5Shaka19(qa);}.bind(this));this.$VideoPlayerHTML5Shaka16.addEventListener('adaptation',this.$VideoPlayerHTML5Shaka20.bind(this));this.$VideoPlayerHTML5Shaka16.addEventListener('trackschanged',this.$VideoPlayerHTML5Shaka21.bind(this));this.$VideoPlayerHTML5Shaka16.addEventListener('debug/shakaEvent',function(qa){return this.emit('debug/shakaEvent',qa.detail);}.bind(this));this.$VideoPlayerHTML5Shaka16.addEventListener('manifestwrapped',this.$VideoPlayerHTML5Shaka22.bind(this));if(c('VideoPlayerShakaExperiments').enableLiveInterruptionDetection)this.$VideoPlayerHTML5Shaka16.addEventListener('manifestIsUpdating',this.$VideoPlayerHTML5Shaka23.bind(this));this.$VideoPlayerHTML5Shaka24=da;this.$VideoPlayerHTML5Shaka25=null;var pa=false;if(ka){this.$VideoPlayerHTML5Shaka26=o(ka,la);}else{this.$VideoPlayerHTML5Shaka26=la;pa=la.indexOf('/dash-abr/')!==-1;}this.$VideoPlayerHTML5Shaka27=this.$VideoPlayerHTML5Shaka28();this.$VideoPlayerHTML5Shaka29=this.$VideoPlayerHTML5Shaka30();this.$VideoPlayerHTML5Shaka31=ca;this.$VideoPlayerHTML5Shaka16.configure({enableAdaptation:true,appendPlayingQueryParam:c('VideoPlayerShakaExperiments').addCdnDebugQueryParameters,allowSkipUnloading:c('VideoPlayerShakaExperiments').allowSkipUnloading,endBufferingOnPlaying:c('VideoPlayerShakaExperiments').endBufferingOnPlaying,usePlaybackRateForBuffering:c('VideoPlayerShakaExperiments').improveRebufferLogging,streamBufferSize:ma?c('VideoPlayerShakaExperiments').liveStreamBufferSize:c('VideoPlayerShakaExperiments').streamBufferSize,initialStreamBufferSize:ma?c('VideoPlayerShakaExperiments').liveInitialStreamBufferSize:c('VideoPlayerShakaExperiments').initialStreamBufferSize,dynamicStreamBufferSize:ma?c('VideoPlayerShakaExperiments').liveDynamicStreamBufferSize:null,includeStreamBufferSizeInStartOffset:c('VideoPlayerShakaExperiments').includeStreamBufferSizeInStartOffset,minMpdRefreshInterval:c('VideoPlayerShakaExperiments').minMpdRefreshInterval,disableCacheBustingEvenThoughItMayAffectBandwidthEstimation:true,liveStreamEndTimeout:c('VideoPlayerShakaExperiments').liveStreamEndTimeout/1000,enableLiveInterruptionDetection:c('VideoPlayerShakaExperiments').enableLiveInterruptionDetection,liveInterruptionConsecutiveUpdatesWithoutChange:c('VideoPlayerShakaExperiments').liveInterruptionConsecutiveUpdatesWithoutChange,liveInterruptionConsecutiveUpdatesWithChange:c('VideoPlayerShakaExperiments').liveInterruptionConsecutiveUpdatesWithChange,liveMaxSegmentsToPush:c('VideoPlayerShakaExperiments').liveMaxSegmentsToPush,liveSendPushHeaders:c('VideoPlayerShakaExperiments').liveSendPushHeaders&&!pa,liveMaxManifestFetchesWithPush:c('VideoPlayerShakaExperiments').liveMaxManifestFetchesWithPush,resolveVideoTimeUpdateOnFragmentedTimeRanges:c('VideoPlayerShakaExperiments').resolveVideoTimeUpdateOnFragmentedTimeRanges,enableManifestDebug:c('VideoPlayerShakaExperiments').enableVideoDebug,reappendInitSegmentAfterAbort:c('VideoPlayerShakaExperiments').reappendInitSegmentAfterAbort,performanceLogger:this.$VideoPlayerHTML5Shaka10});if(ma&&c('VideoPlayerShakaExperiments').enableLiveInterruptionDetection){this.$VideoPlayerHTML5Shaka32=new (c('VideoPlayerLiveStreamState'))(ha);this.$VideoPlayerHTML5Shaka32.addListener('streamInterruptAt',this.$VideoPlayerHTML5Shaka33.bind(this));['streamInterruptAt','commercialBreakAt','endedAt'].forEach(function(qa){this.$VideoPlayerHTML5Shaka32.addListener(qa,function(event){this.emit('debug/shakaEvent',{type:qa,event:event});}.bind(this));}.bind(this));}this.$VideoPlayerHTML5Shaka16.load(this.$VideoPlayerHTML5Shaka29);}ba.prototype.getDebug=function(){'use strict';return {AbrManager:this.$VideoPlayerHTML5Shaka27,VideoSource:this.$VideoPlayerHTML5Shaka29,ShakaPlayer:this.$VideoPlayerHTML5Shaka16};};ba.prototype.getEstimatedBandwidth=function(){'use strict';return v.getBandwidth();};ba.prototype.$VideoPlayerHTML5Shaka12=function(ca){'use strict';var da=this.$VideoPlayerHTML5Shaka34.get(ca);if(!da)return;var ea=da.id,fa=da.reason;if(this.$VideoPlayerHTML5Shaka25!==ea){var ga=this.$VideoPlayerHTML5Shaka25;this.$VideoPlayerHTML5Shaka25=ea;this.emit('representation_ended',{representationID:ga,nextRepresentationID:ea,streamSwitchReason:fa});}};ba.prototype.getStreamInfoIDForTimePosition=function(ca){'use strict';var da=this.$VideoPlayerHTML5Shaka34.get(ca),ea=null;if(da)ea=da.id;return ea;};ba.prototype.$VideoPlayerHTML5Shaka35=function(ca,da){'use strict';if(ca.fbQualityLabel){return ca.fbQualityLabel;}else if(n.compare(ca,da[0])==0){return 'SD';}else if(n.compare(ca,da[da.length-1])==0){return 'HD';}else return null;};ba.prototype.getAvailableVideoQualities=function(){'use strict';if(this.$VideoPlayerHTML5Shaka3)return this.$VideoPlayerHTML5Shaka13;var ca=this.$VideoPlayerHTML5Shaka29.getVideoTracks();ca.sort(n.compare);return ca.every(function(da){return da.fbQualityLabel!==null;})?ca.map(function(da){return da.fbQualityLabel;}):ca.length>1?['SD','HD']:['SD'];};ba.prototype.getSelectedVideoQuality=function(){'use strict';if(this.$VideoPlayerHTML5Shaka3)return this.$VideoPlayerHTML5Shaka14;var ca=this.$VideoPlayerHTML5Shaka29.getVideoTracks();ca.sort(n.compare);var da=ca.find(function(ea){return ea.active;});return da?this.$VideoPlayerHTML5Shaka35(da,ca):null;};ba.prototype.canAutoSelectVideoQuality=function(){'use strict';return true;};ba.prototype.setPreferredVideoQuality=function(ca){'use strict';var da=this.$VideoPlayerHTML5Shaka29.getVideoTracks();da.sort(n.compare);var ea=da.find(function(fa){return ca==this.$VideoPlayerHTML5Shaka35(fa,da);}.bind(this));if(ea){this.$VideoPlayerHTML5Shaka15=ca;this.$VideoPlayerHTML5Shaka27.setPreferredVideoTrack(ea);}};ba.prototype.unsetPreferredVideoQuality=function(){'use strict';this.$VideoPlayerHTML5Shaka15=null;this.$VideoPlayerHTML5Shaka27.unsetPreferredVideoTrack();};ba.prototype.pause=function(){'use strict';if(this.$VideoPlayerHTML5Shaka36&&!c('VideoPlayerShakaExperiments').improveRebufferLogging){this.$VideoPlayerHTML5Shaka37=true;this.$VideoPlayerHTML5Shaka38=true;c('dispatchEvent')(this.$VideoPlayerHTML5Shaka31,'pause');this.$VideoPlayerHTML5Shaka16.setResumeAfterBuffering(false);}else this.$VideoPlayerHTML5Shaka31.pause();};ba.prototype.play=function(){'use strict';if(this.$VideoPlayerHTML5Shaka36&&!c('VideoPlayerShakaExperiments').improveRebufferLogging){this.$VideoPlayerHTML5Shaka37=false;this.$VideoPlayerHTML5Shaka38=true;c('dispatchEvent')(this.$VideoPlayerHTML5Shaka31,'play');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka31,'waiting');this.$VideoPlayerHTML5Shaka16.setResumeAfterBuffering(true);return c('Promise').resolve();}else return this.$VideoPlayerHTML5Shaka31.play();};ba.prototype.$VideoPlayerHTML5Shaka39=function(){'use strict';var ca=this.$VideoPlayerHTML5Shaka4;if(ca){var da=this.$VideoPlayerHTML5Shaka31.currentTime,ea=4,fa=da>ca-ea,ga=da>ca;if(ga){this.emit('debug/shakaEvent',{type:'streamResumedAt',event:this.$VideoPlayerHTML5Shaka4});this.$VideoPlayerHTML5Shaka4=null;}else if(this.$VideoPlayerHTML5Shaka36)this.$VideoPlayerHTML5Shaka6=fa;}return this.$VideoPlayerHTML5Shaka6;};ba.prototype.$VideoPlayerHTML5Shaka17=function(){'use strict';if(!c('VideoPlayerShakaExperiments').improveRebufferLogging){z(this.$VideoPlayerHTML5Shaka31,'pause');this.$VideoPlayerHTML5Shaka37=false;this.$VideoPlayerHTML5Shaka38=false;}this.$VideoPlayerHTML5Shaka36=true;if(this.$VideoPlayerHTML5Shaka39()){if(!c('VideoPlayerShakaExperiments').fixIsLiveInterruptedBacktest)this.$VideoPlayerHTML5Shaka29.setIsLiveInterrupted(true);this.emit('streamInterrupted');}else{this.$VideoPlayerHTML5Shaka16.setResumeAfterBuffering(true);this.emit('bufferingStart');}};ba.prototype.$VideoPlayerHTML5Shaka18=function(){var ca,da=this;'use strict';if(!c('VideoPlayerShakaExperiments').improveRebufferLogging){if(!this.$VideoPlayerHTML5Shaka37)z(this.$VideoPlayerHTML5Shaka31,'play');if(!this.$VideoPlayerHTML5Shaka38)(function(){var ea=c('EventListener').capture(da.$VideoPlayerHTML5Shaka31.parentNode,'playing',function(fa){if(fa.target!=this.$VideoPlayerHTML5Shaka31)return;ea.remove();if(this.$VideoPlayerHTML5Shaka11){this.$VideoPlayerHTML5Shaka11=false;return;}c('Event').kill(fa);}.bind(da));})();}this.$VideoPlayerHTML5Shaka36=false;this.$VideoPlayerHTML5Shaka29.setIsLiveInterrupted(false);if(this.$VideoPlayerHTML5Shaka6){this.$VideoPlayerHTML5Shaka40();}else this.emit('bufferingEnd');};ba.prototype.$VideoPlayerHTML5Shaka19=function(ca){'use strict';var da=ca.detail||{},ea=da.type||'undefined';if(this.$VideoPlayerHTML5Shaka7&&this.$VideoPlayerHTML5Shaka3&&ea=='net')return;this.emit('error',{error:'SHAKA_'+ea.toUpperCase(),message:da.message,httpStatus:da.status||null,url:da.url||null});};ba.prototype.hasSelectableVideoTracks=function(){'use strict';var ca=this.$VideoPlayerHTML5Shaka16.getVideoTracks();return ca.length>1;};ba.prototype.unload=function(){'use strict';this.$VideoPlayerHTML5Shaka14=this.getSelectedVideoQuality();this.$VideoPlayerHTML5Shaka13=this.getAvailableVideoQualities();this.$VideoPlayerHTML5Shaka7=this.$VideoPlayerHTML5Shaka29&&this.$VideoPlayerHTML5Shaka29.isLive();this.$VideoPlayerHTML5Shaka16.unload();this.$VideoPlayerHTML5Shaka3=true;};ba.prototype.$VideoPlayerHTML5Shaka28=function(){'use strict';var ca={enableAdaptation:c('VideoPlayerShakaExperiments').enableAdaptation,minPlayQuality:this.$VideoPlayerHTML5Shaka1,maxPlayQuality:this.$VideoPlayerHTML5Shaka2,maxWidth:this.$VideoPlayerHTML5Shaka41(),maxHeight:this.$VideoPlayerHTML5Shaka42(),initiallyForcedRepresentations:this.$VideoPlayerHTML5Shaka24,bandwidthDowngradeTarget:this.$VideoPlayerHTML5Shaka7?c('VideoPlayerShakaExperiments').liveBandwidthDowngradeTarget:c('VideoPlayerShakaExperiments').bandwidthDowngradeTarget,bandwidthUpgradeTarget:this.$VideoPlayerHTML5Shaka7?c('VideoPlayerShakaExperiments').liveBandwidthUpgradeTarget:c('VideoPlayerShakaExperiments').bandwidthUpgradeTarget},da=c('VideoQualityClasses').indexOf('hd'),ea=this.$VideoPlayerHTML5Shaka1!=null&&c('VideoQualityClasses').indexOf(this.$VideoPlayerHTML5Shaka1)>=da;return new (c('CustomAbrManager'))(ca);};ba.prototype.$VideoPlayerHTML5Shaka30=function(){'use strict';!this.$VideoPlayerHTML5Shaka27?h(0):void 0;!this.$VideoPlayerHTML5Shaka26?h(0):void 0;var ca=new m(this.$VideoPlayerHTML5Shaka26,null,v,this.$VideoPlayerHTML5Shaka27);this.$VideoPlayerHTML5Shaka34=new (c('TaggedTimeRanges'))(function(da,ea){return (da.id===ea.id&&da.reason===ea.reason);});ca.setTaggedTimeRangesEntryAdder(function(da,ea,fa){this.$VideoPlayerHTML5Shaka34.add(da,ea,fa);}.bind(this));return ca;};ba.prototype.reload=function(ca){'use strict';if(!this.$VideoPlayerHTML5Shaka3)return;this.$VideoPlayerHTML5Shaka27=this.$VideoPlayerHTML5Shaka28();this.$VideoPlayerHTML5Shaka29=this.$VideoPlayerHTML5Shaka30();if(this.$VideoPlayerHTML5Shaka39()){this.$VideoPlayerHTML5Shaka31.playbackRate=0;this.emit('streamInterrupted');}this.$VideoPlayerHTML5Shaka16.setPlaybackStartTime(ca);return this.$VideoPlayerHTML5Shaka16.loadWithSilencedErrors(this.$VideoPlayerHTML5Shaka29).then(function(){if(this.$VideoPlayerHTML5Shaka7!=this.$VideoPlayerHTML5Shaka29.isLive())return this.$VideoPlayerHTML5Shaka43();if(this.$VideoPlayerHTML5Shaka15)this.setPreferredVideoQuality(this.$VideoPlayerHTML5Shaka15);this.$VideoPlayerHTML5Shaka14=null;this.$VideoPlayerHTML5Shaka44=null;this.$VideoPlayerHTML5Shaka3=false;}.bind(this))['catch'](function(da){if(this.$VideoPlayerHTML5Shaka7)return this.$VideoPlayerHTML5Shaka43();da.detail=da.detail||{};da.detail.type=da.detail.type||'LOAD_FAILURE';this.$VideoPlayerHTML5Shaka19(da);}.bind(this));};ba.prototype.$VideoPlayerHTML5Shaka43=function(){'use strict';c('dispatchEvent')(this.$VideoPlayerHTML5Shaka31,'seeked');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka31,'playing');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka31,'ended');this.emit('streamResumed');this.$VideoPlayerHTML5Shaka32.unsubscribe();this.unload();};ba.prototype.getLongestInitResponseTime=function(){'use strict';return this.$VideoPlayerHTML5Shaka29.getLongestInitResponseTime();};ba.$VideoPlayerHTML5Shaka45=function(){'use strict';return (c('VideoPlayerShakaExperiments').resolutionConstraintFactor*t);};ba.prototype.$VideoPlayerHTML5Shaka41=function(){'use strict';if(!c('VideoPlayerShakaExperiments').useResolutionConstraints)return Infinity;return this.$VideoPlayerHTML5Shaka8*ba.$VideoPlayerHTML5Shaka45();};ba.prototype.$VideoPlayerHTML5Shaka42=function(){'use strict';if(!c('VideoPlayerShakaExperiments').useResolutionConstraints)return Infinity;return this.$VideoPlayerHTML5Shaka9*ba.$VideoPlayerHTML5Shaka45();};ba.prototype.setDimensions=function(ca,da){'use strict';this.$VideoPlayerHTML5Shaka8=ca;this.$VideoPlayerHTML5Shaka9=da;this.$VideoPlayerHTML5Shaka27.setResolutionConstraint(this.$VideoPlayerHTML5Shaka41(),this.$VideoPlayerHTML5Shaka42());};ba.isSupported=function(){'use strict';return l.isBrowserSupported();};ba.prototype.$VideoPlayerHTML5Shaka21=function(){'use strict';this.emit('tracksChanged');};ba.prototype.$VideoPlayerHTML5Shaka20=function(event){'use strict';if(event.contentType==='video')this.emit('adaptation',{reason:event.reason});};ba.prototype.$VideoPlayerHTML5Shaka33=function(ca){'use strict';if(c('VideoPlayerShakaExperiments').fixIsLiveInterruptedBacktest)this.$VideoPlayerHTML5Shaka29.setIsLiveInterrupted(true);this.$VideoPlayerHTML5Shaka4=ca;};ba.prototype.$VideoPlayerHTML5Shaka23=function(){'use strict';if(this.$VideoPlayerHTML5Shaka39())this.$VideoPlayerHTML5Shaka40();};ba.prototype.$VideoPlayerHTML5Shaka40=function(){'use strict';this.$VideoPlayerHTML5Shaka4=null;this.$VideoPlayerHTML5Shaka6=false;this.$VideoPlayerHTML5Shaka29.forceResyncVideoBuffer();this.emit('streamResumed');};ba.prototype.$VideoPlayerHTML5Shaka22=function(){'use strict';var ca=!this.$VideoPlayerHTML5Shaka31.paused;this.unload();this.reload().then(function(){if(this.$VideoPlayerHTML5Shaka6)this.$VideoPlayerHTML5Shaka40();if(ca)this.play();}.bind(this))['catch'](function(da){});};f.exports=ba;}),null);