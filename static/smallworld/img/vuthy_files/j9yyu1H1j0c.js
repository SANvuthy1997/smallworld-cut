if (self.CavalryLogger) { CavalryLogger.start_js(["9GcaF"]); }

__d('ChannelConnection',['Arbiter','ChannelConstants','ChannelManager','JSLogger','Run','SystemEvents','Visibility','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('JSLogger').create('channel_connection'),i=null,j=null,k=null,l=null,m=0,n=Object.assign(new (c('Arbiter'))(),{CONNECTED:'chat-connection/connected',RECONNECTING:'chat-connection/reconnecting',SHUTDOWN:'chat-connection/shutdown',MUTE_WARNING:'chat-connection/mute',UNMUTE_WARNING:'chat-connection/unmute'});c('Run').onBeforeUnload(function(){});function o(){if(j){clearTimeout(j);j=null;}}function p(){o();h.log('unmute_warning');n.inform(n.UNMUTE_WARNING);}function q(v){o();j=c('setTimeoutAcrossTransitions')(p,v);h.log('mute_warning',{time:v});n.inform(n.MUTE_WARNING);}function r(){if(k){clearTimeout(k);k=null;}}function s(v,w){r();if(v===c('ChannelConstants').ON_ENTER_STATE&&(w.nextState||w.state)==='pull'){if(l!==n.CONNECTED){h.log('connected');var x=!l;l=n.CONNECTED;m=0;n.inform(n.CONNECTED,{init:x});}}else if(v===c('ChannelConstants').ON_ENTER_STATE&&((w.nextState||w.state)==='ping'||!w.nextState&&w.state==='idle')){k=c('setTimeoutAcrossTransitions')(function(){var y=null;if(!(w.state==='idle'&&!w.nextState))y=w.delay||0;h.log('reconnecting',{delay:y});if(n.disconnected())h.log('reconnecting_ui',{delay:y});l=n.RECONNECTING;w.state==='idle'&&m++;if(m>1){n.inform(n.RECONNECTING,y);}else if(!w.nextState&&w.state==='idle')s(v,w);},500);}else if(v===c('ChannelConstants').ON_SHUTDOWN){h.log('shutdown',{reason:w.reason});l=n.SHUTDOWN;m=0;n.inform(n.SHUTDOWN,w.reason);}}function t(){if(c('ChannelManager').isShutdown()){s(c('ChannelConstants').ON_SHUTDOWN,c('ChannelManager')._shutdownHint);}else s(c('ChannelConstants').ON_ENTER_STATE,{state:c('ChannelManager').state,nextState:c('ChannelManager').nextState,delay:0});c('Visibility').addListener(c('Visibility').VISIBLE,n.reconnect);}c('Run').onAfterLoad(t);Object.assign(n,{disconnected:function v(){return l===n.SHUTDOWN||l===n.RECONNECTING&&!j&&m>1;},isShutdown:function v(){return l===n.SHUTDOWN;},reconnect:function v(w){if(c('ChannelManager').state==='ping'||c('ChannelManager').state==='pull'||c('ChannelManager').isShutdown())return;h.log('reconnect',{now:w});n.inform(n.RECONNECTING,0);if(!!w){if(i!==null){clearTimeout(i);i=null;}c('ChannelManager').enterState('ping!');}else if(!i)i=c('setTimeoutAcrossTransitions')(function(){c('ChannelManager').enterState('ping!');i=null;},c('ChannelConstants').CHANNEL_MANUAL_RECONNECT_DEFER_MSEC);c('ChannelManager').resetDelay();},unmuteWarning:p});function u(){c('Arbiter').subscribe([c('ChannelConstants').ON_ENTER_STATE,c('ChannelConstants').ON_SHUTDOWN],s);c('Arbiter').subscribe(c('ChannelConstants').ATTEMPT_RECONNECT,function(){if(n.disconnected())n.reconnect();});c('SystemEvents').subscribe(c('SystemEvents').TIME_TRAVEL,function(){n.reconnect();q(c('ChannelConstants').MUTE_WARNING_TIME_MSEC);});c('Run').onBeforeUnload(r,false);}c('Run').onAfterLoad(u);n.mockAfterLoad=function(){t();u();};c('Arbiter').subscribe(c('JSLogger').DUMP_EVENT,function(v,w){w.channel_connected=!n.disconnected();});f.exports=n;}),3);
__d('BuddyListNub',['csx','cx','fbt','Arbiter','AsyncRequest','AvailableList','BootloadedComponent.react','ChannelConnection','ChatOptions','ChatSidebarActions','ChatSidebarStore','ChatSidebarVisibility','ChatVisibility','CSS','Dock','DOM','Event','JSLogger','JSResource','KeyEventController','Keys','NubController','OrderedFriendsList','Parent','PresencePrivacy','PresenceStatus','PresenceUtil','React','ReactDOM','Run','SidebarType','Style','Toggler','emptyFunction'],(function a(b,c,d,e,f,g,h,i,j){var k,l;if(c.__markCompiled)c.__markCompiled();var m=40,n=253,o='285px',p=c('JSLogger').create('buddylist_nub');k=babelHelpers.inherits(q,c('NubController'));l=k&&k.prototype;function q(r,s,t,u){'use strict';l.constructor.call(this);l.init.call(this,r);this.root=r;this.orderedList=s;this.button=c('DOM').find(r,'a.fbNubButton');this.unreadCount=c('DOM').find(r,"span._5ayx");this.label=c('DOM').find(r,'span.label');this.body=c('DOM').scry(r,'div.fbNubFlyoutBody')[0];this.container=c('Parent').bySelector(r,"._56ox");var v=c('DOM').find(r,'div.fbNubFlyoutTitlebar');c('Toggler').createInstance(v).setSticky(false);c('Toggler').createInstance(r).setSticky(true);if(u)c('Run').onAfterLoad(function(){this.dropdown=c('ReactDOM').render(c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('ChatSidebarDropdown.react').__setRef('BuddyListNub'),onToggleSidebar:function w(){},sidebarType:c('SidebarType').BUDDYLIST}),u);}.bind(this));s.subscribeOnce('render',this.flyoutContentChanged.bind(this));c('Run').onAfterLoad(function(){var w=c('DOM').find(v,"div._4k48");if(w)c('ReactDOM').render(c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('ChatSidebarComposeLink.react').__setRef('BuddyListNub'),className:"_3a-4"}),w);var x=c('DOM').find(this.button,"div._1us9");if(x)c('ReactDOM').render(c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('ChatSidebarComposeLink.react').__setRef('BuddyListNub'),className:"_3a-4"}),x);var y=c('DOM').find(this.button,"div._1usa");if(y)c('ReactDOM').render(c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('ChatSidebarDropdown.react').__setRef('BuddyListNub'),onToggleSidebar:function z(){},sidebarType:c('SidebarType').BUDDYLIST_NUB}),y);}.bind(this));s.setScrollContainer(this.body);c('AvailableList').subscribe('buddylist/availability-changed',this._updateCount.bind(this));c('Arbiter').subscribe('chat/connect',function(){return this._handleConnect(true);}.bind(this));c('Arbiter').subscribe('chat/option-changed',function(w,x){if(x.name=='hide_groups'){this.onResize();}else if(x.name==='hide_buddylist')x.value?this.hide():this.show();}.bind(this));c('ChannelConnection').subscribe(c('ChannelConnection').CONNECTED,function(){return this._updateView();}.bind(this));c('ChannelConnection').subscribe(c('ChannelConnection').SHUTDOWN,function(){return this._updateView();}.bind(this));c('ChannelConnection').subscribe(c('ChannelConnection').RECONNECTING,function(){return this._updateView();}.bind(this));c('ChannelConnection').subscribe([c('ChannelConnection').MUTE_WARNING,c('ChannelConnection').UNMUTE_WARNING],function(){return this._updateView();}.bind(this));this.subscribe('show',this.onShow.bind(this));this.subscribe('hide',this.onHide.bind(this));this.subscribe('resize',this.onResize.bind(this));c('Event').listen(r,'keydown',this._onKeyDown.bind(this));c('Event').listen(this.button,'click',this.onButtonClick.bind(this));c('KeyEventController').registerKey('q',function(event){if(!(this._isOpen)){this.onButtonClick();this.show();}event.prevent();}.bind(this));c('Arbiter').subscribe('minisidebar/show',this.hide.bind(this));c('Arbiter').subscribe('sidebar/visibility',function(w,x){if(x){this.hide();}else this._onSidebarHide();}.bind(this));c('Style').set(this.body,'min-height',o);c('Arbiter').subscribe('sidebar/typeahead/active',function(w,x){if(x){this._typeaheadActive=true;c('CSS').hide(this.body.parentNode);this.orderedList.hide();this.onResize();}else{this._typeaheadActive=false;this.onResize();c('CSS').show(this.body.parentNode);this.orderedList.show();}}.bind(this));c('OrderedFriendsList').getList(function(w){if(c('ChatSidebarStore').isEnabled()&&c('ChatSidebarStore').getVisibleType()===c('SidebarType').BUDDYLIST&&!c('ChatOptions').getSetting('hide_buddylist')&&!c('ChannelConnection').disconnected()&&!c('PresencePrivacy').isUserOffline()&&w.length>0)this.show();c('Event').listen(v,'click',function(x){if(c('CSS').matchesSelector(x.target,".titlebarTextWrapper"))this._syncHideBuddylist(true);}.bind(this));this._updateView();p.log('buddylist_initialized');}.bind(this));}q.prototype._handleVisibilityChange=function(){'use strict';this._updateView();if(!c('ChatVisibility').isOnline())this.hide();};q.prototype._updateView=function(r){'use strict';var s,t;if(!c('ChatVisibility').isOnline()){s=j._("{Chat} (Off)",[j.param('Chat',j._("Chat"))]);}else if(c('ChannelConnection').disconnected()){s=j._("{Chat} (Disconnected)",[j.param('Chat',j._("Chat"))]);}else{var u=c('PresenceStatus').getOnlineCount();if(u){var v=c('DOM').create('span',{className:'count'},'('+u+')');s=j._({"*":"{Chat} {number-available}"},[j.param('Chat',j._("Chat")),j.param('number-available',v,[0,u])]);}else{s=j._("Chat");t=true;}}this._setPresenceIcon();this._setUnread();this._setLabel(s,t);this.buttonContentChanged();};q.prototype._setPresenceIcon=function(){'use strict';c('CSS').conditionClass(this.root,'offline',!c('ChatVisibility').isOnline()||c('ChannelConnection').disconnected());};q.prototype.onButtonClick=function(){'use strict';if(!c('ChatSidebarStore').isInitialized())return true;c('ChatSidebarVisibility').shouldShowSidebarIgnoreEnabled(null,function(r,s){var t=c('ChatSidebarStore').isEnabled();if(!t&&r){c('ChatSidebarActions').enable(c('SidebarType').SIDEBAR);}else c('ChatSidebarActions').show(t&&r?c('SidebarType').SIDEBAR:c('SidebarType').BUDDYLIST);});};q.prototype.onHide=function(){'use strict';this._isOpen=false;if(this._buddyListRenderSubscription){this.orderedList.unsubscribe(this._buddyListRenderSubscription);this._buddyListRenderSubscription=null;}this._hideBuddyList();c('Arbiter').inform('buddylist/hide');};q.prototype._onKeyDown=function(event){'use strict';var r=c('Event').getKeyCode(event);if(r===c('Keys').ESC&&!c('CSS').hasClass(this.root,'menuOpened')){this.hide();return false;}else if(r==c('Keys').RETURN)c('ChatSidebarVisibility').shouldShowSidebarIgnoreEnabled(null,function(s,t){c('ChatSidebarActions').enable(s?c('SidebarType').SIDEBAR:c('SidebarType').BUDDYLIST);});};q.prototype._onSidebarHide=function(event){'use strict';if(c('ChatSidebarStore').isEnabled()&&!c('ChatOptions').getSetting('hide_buddylist')&&!c('ChannelConnection').disconnected()&&!c('PresencePrivacy').isUserOffline()){this.show();}else{this.hide();this.button.focus();}};q.prototype.onResize=function(){'use strict';var r=!this._typeaheadActive?n:c('Dock').getMaxFlyoutHeight(this.root)-60;c('Arbiter').inform('buddyList/resized',r,c('Arbiter').BEHAVIOR_PERSISTENT);if(this._typeaheadActive){c('Style').set(this.body,'max-height','none');}else c('Style').set(this.body,'max-height',o);var s=Math.max(250,r),t=Math.floor(s/m);this.orderedList.setNumTopFriends(t);};q.prototype._showBuddyList=function(){'use strict';this._buddyListRenderSubscription=this.orderedList.subscribe('render',function(){if(c('Style').get(this.body,'height')!=o)c('Style').set(this.body,'height',o);}.bind(this));this.orderedList.show();p.bump('buddylist_show');};q.prototype._hideBuddyList=function(){'use strict';this.orderedList.hide();p.bump('buddylist_hide');};q.prototype.onShow=function(){'use strict';this._isOpen=true;if(c('ChannelConnection').disconnected()){c('ChannelConnection').reconnect();this._showBuddyList();}else c('ChatVisibility').goOnline(this._showBuddyList.bind(this));this._syncHideBuddylist(false);};q.prototype._setLabel=function(r,s){'use strict';var t=this.label.textContent||this.label.innerText;if(t!==r){var u=this.label.cloneNode(true);c('DOM').setContent(u,r);c('DOM').replace(this.label,u);this.label=u;}this.throbber&&c('CSS').conditionShow(this.throbber,!!s);};q.prototype._setUnread=function(r){'use strict';c('CSS').conditionShow(this.unreadCount,!!r);};q.prototype._updateCount=function(){'use strict';this._updateView();};q.prototype._syncHideBuddylist=function(r){'use strict';c('ChatOptions').setSetting('hide_buddylist',r,'buddylist');new (c('AsyncRequest'))('/ajax/chat/settings.php').setHandler(c('emptyFunction')).setErrorHandler(c('emptyFunction')).setData({hide_buddylist:r,window_id:c('PresenceUtil').getSessionID()}).setAllowCrossPageTransition(true).send();};c('Arbiter').subscribe(c('JSLogger').DUMP_EVENT,function(r,s){s.buddylist_visible=c('ChatSidebarStore').getVisibleType()===c('SidebarType').BUDDYLIST;});f.exports=q;}),null);
__d('ChatUnreadCount',['ChatDispatcher','ChatUnreadCountActionTypes','Map','MercuryIDs','MercurySingletonProvider','MercuryThreadInformer','MercuryThreads','MercuryUnreadState','isInFocusMode'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();h.getForFBID=function(j){return i.getForFBID(j);};h.get=function(){return i.get();};function h(j){this.$ChatUnreadCount1=j;this.$ChatUnreadCount2=c('MercuryThreadInformer').getForFBID(j);this.$ChatUnreadCount3=c('MercuryThreads').getForFBID(j);this.$ChatUnreadCount4=new (c('Map'))();this.$ChatUnreadCount5=c('MercuryUnreadState').getForFBID(j);this.setupSubscriptions();}h.prototype.getUnreadCountForUID=function(j){if(!j)return null;var k=c('MercuryIDs').getThreadIDFromUserID(j);if(!this.$ChatUnreadCount5.getIsThreadUnread(k)){this.$ChatUnreadCount4['delete'](j);return 0;}var l=this.$ChatUnreadCount3.getOrFetch(k),m=l&&l.unread_count;this.$ChatUnreadCount4.set(j,m);if(c('isInFocusMode')(k))return 0;return m;};h.prototype.setupSubscriptions=function(){this.$ChatUnreadCount2.subscribe('threads-updated',function(j,k){var l=Object.keys(k).some(function(m){var n=c('MercuryIDs').getUserIDFromThreadID(m);if(!n)return false;var o=this.getUnreadCountForUID(n),p=this.$ChatUnreadCount4.get(n)||0;return o!==p;}.bind(this));if(l)c('ChatDispatcher').dispatch({type:c('ChatUnreadCountActionTypes').COUNT_UPDATED});}.bind(this));this.$ChatUnreadCount2.subscribe('unread-updated',function(){return c('ChatDispatcher').dispatch({type:c('ChatUnreadCountActionTypes').COUNT_UPDATED});});};var i=new (c('MercurySingletonProvider'))(h);f.exports=h;}),null);
__d('ChatSidebarComposeLink.react',['fbt','ChatOpenTab','ChatOpenTabEventLogger','FantaTabActions','Link.react','MercuryConfig','MercuryThreads','React','TooltipData'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('MercuryThreads').get();i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m){j.constructor.call(this,m);}l.prototype.render=function(){var m=h._("New Message");return (c('React').createElement(c('Link.react'),babelHelpers['extends']({className:this.props.className,href:'#',onClick:this.$ChatSidebarComposeLink1},c('TooltipData').propsFor(m,'below'))));};l.prototype.$ChatSidebarComposeLink1=function(m){if(c('MercuryConfig').FantaTabs){var n=k.createNewLocalThreadGenerateID();c('FantaTabActions').openTab(n);c('ChatOpenTabEventLogger').log('sidebar');}else c('ChatOpenTab').openEmptyTab(null,'sidebar');m.preventDefault();};f.exports=l;}),null);
__d('ChatSidebarSheetChatOffline.react',['fbt','Link.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){return (c('React').createElement('div',null,h._("{=Go online} to see who's available.",[h.param('=Go online',c('React').createElement(c('Link.react'),{className:'fbChatGoOnlineLink',onClick:this.props.onGoOnlineClick},h._("Turn on chat")))])));};function l(){i.apply(this,arguments);}l.propTypes={onGoOnlineClick:k.func.isRequired};f.exports=l;}),null);
__d('ChatSidebarSheetChatReconnectMsg.react',['fbt','ChannelConstants','Link.react','MessengerSpinner.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.isMessenger,o=m.msecs,p=c('React').createElement(c('Link.react'),{className:'fbChatReconnectLink',onClick:this.props.onManuallyConnectClick},h._("No Internet Connection"));if(o==null||false===navigator.onLine){return (n?p:c('React').createElement('div',null,h._("Unable to connect to chat. Check your Internet connection.")));}else if(o>c('ChannelConstants').WARNING_COUNTDOWN_THRESHOLD_MSEC){return (n?p:c('React').createElement('div',null,h._("Unable to connect to chat. {try-again-link}",[h.param('try-again-link',c('React').createElement(c('Link.react'),{className:'fbChatReconnectLink',onClick:this.props.onManuallyConnectClick},h._("Try again")))])));}else if(o>1000){return (n?p:c('React').createElement('div',null,h._("Unable to connect to chat. Reconnecting in {seconds}",[h.param('seconds',Math.floor(o/1000))])));}else return (n?c('React').createElement('div',null,c('React').createElement(c('MessengerSpinner.react'),{color:'grey'}),h._("Connecting...")):c('React').createElement('div',null,h._("Unable to connect to chat. Reconnecting...")));};function l(){i.apply(this,arguments);}l.propTypes={isMessenger:k.bool,msecs:k.number,onManuallyConnectClick:k.func};f.exports=l;}),null);
__d('ChatSidebarSheetChatShutdownMsg.react',['fbt','ChannelConstants','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.hint,o=m.isMessenger;switch(n){case c('ChannelConstants').HINT_AUTH:return (c('React').createElement('div',null,h._("Your session has timed out. Please log in.")));case c('ChannelConstants').HINT_MAINT:return (o?c('React').createElement('div',null,h._("Messenger is currently down for maintenance.")):c('React').createElement('div',null,h._("Facebook {Chat} is currently down for maintenance.",[h.param('Chat',h._("Chat"))])));case c('ChannelConstants').HINT_CONN:default:return (o?c('React').createElement('div',null,h._("Messenger is currently unavailable.")):c('React').createElement('div',null,h._("Facebook {Chat} is currently unavailable.",[h.param('Chat',h._("Chat"))])));}};function l(){i.apply(this,arguments);}l.propTypes={hint:k.string,isMessenger:k.bool};f.exports=l;}),null);
__d('ChatSidebarSheet.react',['fbt','Arbiter','ChannelConnection','ChatBehavior','ChatSidebarSheetChatOffline.react','ChatSidebarSheetChatReconnectMsg.react','ChatSidebarSheetChatShutdownMsg.react','ChatVisibility','CurrentEnvironment','CSS','JSLogger','MercurySyncConstants','PresencePrivacy','ReactComponentWithPureRenderMixin','React','SubscriptionsHandler','emptyFunction','joinClasses','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('JSLogger').create('sidebar_sheet'),j=c('React').PropTypes,k=c('React').createClass({displayName:'ChatSidebarSheet',mixins:[c('ReactComponentWithPureRenderMixin')],getInitialState:function l(){return {channelStatus:null,channelData:null,isConnected:!c('ChannelConnection').disconnected(),isOnline:c('ChatVisibility').isOnline(),notifiesUserMessages:c('ChatBehavior').notifiesUserMessages(),syncStateInvalid:false};},getDefaultProps:function l(){return {onUpdate:c('emptyFunction')};},_subscriptions:c('SubscriptionsHandler'),_showWarningTimeout:null,componentDidMount:function l(){this._subscriptions=new (c('SubscriptionsHandler'))();this._subscriptions.addSubscriptions(c('ChannelConnection').subscribe([c('ChannelConnection').CONNECTED,c('ChannelConnection').SHUTDOWN,c('ChannelConnection').RECONNECTING],this._handleConnectionChange),c('ChannelConnection').subscribe([c('ChannelConnection').MUTE_WARNING,c('ChannelConnection').UNMUTE_WARNING],this._calculateState),c('PresencePrivacy').subscribe('privacy-user-presence-changed',this._calculateState),c('ChatBehavior').subscribe(c('ChatBehavior').ON_CHANGED,this._calculateState),c('Arbiter').subscribe(c('MercurySyncConstants').ARBITER_EVENT_INVALID_STATE,function(){this.setState({syncStateInvalid:true});}.bind(this)));},componentWillUpdate:function l(){if(this._showWarningTimeout){clearTimeout(this._showWarningTimeout);this._showWarningTimeout=null;}},componentWillUnmount:function l(){this._subscriptions&&this._subscriptions.release();},render:function l(){var m=c('CurrentEnvironment').messengerdotcom,n=void 0,o=void 0;if(!this.state.isOnline&&!m){n='offline';o=this._renderOffline();}else if(!this.state.isConnected||this.state.syncStateInvalid){n='error';o=this._renderGeneralConnectionError(m);}else if(!this.state.notifiesUserMessages&&!m){n='notice';o=this._renderNotice();}if(this.state.channelStatus===c('ChannelConnection').RECONNECTING&&this.state.channelData<1000)n=c('joinClasses')(n,'reconnecting');return (c('React').createElement('div',{className:c('joinClasses')(this.props.className,n)},m?null:c('React').createElement('div',{className:'img'}),c('React').createElement('div',{className:'message'},o)));},_handleConnectionChange:function l(m,n){this.setState({channelStatus:m,channelData:n});this._calculateState();},_calculateState:function l(){this.setState({isConnected:!c('ChannelConnection').disconnected(),isOnline:c('ChatVisibility').isOnline(),notifiesUserMessages:c('ChatBehavior').notifiesUserMessages()});},_renderGeneralConnectionError:function l(m){if(this.state.channelStatus===c('ChannelConnection').SHUTDOWN||this.state.syncStateInvalid){return (c('React').createElement(c('ChatSidebarSheetChatShutdownMsg.react'),{hint:this.state.syncStateInvalid?undefined:this.state.channelData,isMessenger:m}));}else if(this.state.channelStatus===c('ChannelConnection').RECONNECTING){var n=this.state.channelData;if(n>1000)this._showWarningTimeout=c('setTimeoutAcrossTransitions')(this._handleConnectionChange.bind(this,c('ChannelConnection').RECONNECTING,n-1000),1000);return (c('React').createElement(c('ChatSidebarSheetChatReconnectMsg.react'),{isMessenger:m,msecs:n,onManuallyConnectClick:function o(){return c('ChannelConnection').reconnect();}}));}return null;},_renderOffline:function l(){return (c('React').createElement(c('ChatSidebarSheetChatOffline.react'),{onGoOnlineClick:function m(n){i.log('sidebar_go_online');c('ChatVisibility').goOnline();}}));},_renderNotice:function l(){return (c('React').createElement('div',null,h._("Alerts are off while you use another client to chat.")));}});f.exports=k;}),null);
__d('MessengerTypeaheadUtils',['fbt','ix','CurrentEnvironment','immutable','MercuryConfig','MercuryTypeaheadConstants','ReactDOM','SearchableEntry','WorkModeConfig','mapObject'],(function a(b,c,d,e,f,g,h,i){'use strict';var j;if(c.__markCompiled)c.__markCompiled();var k=c('immutable').OrderedMap,l=c('WorkModeConfig').is_work_user?[c('MercuryTypeaheadConstants').SEARCH_TYPE,c('MercuryTypeaheadConstants').FRIEND_TYPE,c('MercuryTypeaheadConstants').FB4C_TYPE,c('MercuryTypeaheadConstants').THREAD_TYPE,c('MercuryTypeaheadConstants').MEETING_ROOM_PAGE_TYPE,c('MercuryTypeaheadConstants').PAGE_TYPE,c('MercuryTypeaheadConstants').NON_FRIEND_TYPE]:[c('MercuryTypeaheadConstants').SEARCH_TYPE,c('MercuryTypeaheadConstants').FRIEND_TYPE,c('MercuryTypeaheadConstants').THREAD_TYPE,c('MercuryTypeaheadConstants').FB4C_TYPE,c('MercuryTypeaheadConstants').MEETING_ROOM_PAGE_TYPE,c('MercuryTypeaheadConstants').PAGE_TYPE,c('MercuryTypeaheadConstants').NON_FRIEND_TYPE],m=(j={},j[c('MercuryTypeaheadConstants').SEARCH_TYPE]={header:''},j[c('MercuryTypeaheadConstants').FRIEND_TYPE]={header:h._("Contacts")},j[c('MercuryTypeaheadConstants').FB4C_TYPE]={header:h._("Co-workers")},j[c('MercuryTypeaheadConstants').THREAD_TYPE]={header:h._("Group Conversations")},j[c('MercuryTypeaheadConstants').PAGE_TYPE]={header:h._("Businesses")},j[c('MercuryTypeaheadConstants').MEETING_ROOM_PAGE_TYPE]={header:h._("Meeting Rooms")},j[c('MercuryTypeaheadConstants').NON_FRIEND_TYPE]={header:h._("More People")},j),n={sortEntries:function o(p,q){var r=[],s=[],t=[],u=[],v=[],w=[],x=[];p.forEach(function(y){switch(y.getType()){case c('MercuryTypeaheadConstants').FRIEND_TYPE:s.push(y);break;case c('MercuryTypeaheadConstants').FB4C_TYPE:t.push(y);break;case c('MercuryTypeaheadConstants').THREAD_TYPE:u.push(y);break;case c('MercuryTypeaheadConstants').PAGE_TYPE:case c('MercuryTypeaheadConstants').COMMERCE_PAGE_TYPE:w.push(y);break;case c('MercuryTypeaheadConstants').NON_FRIEND_TYPE:v.push(y);break;case c('MercuryTypeaheadConstants').MEETING_ROOM_PAGE_TYPE:x.push(y);break;case c('MercuryTypeaheadConstants').SEARCH_TYPE:r.push(y);break;}});if(n._shouldHoistPages(q))return r.concat(w,s,t,u,x,v);return r.concat(s,t,u,x,w,v);},sortEntriesWithoutPages:function o(p){var q=[],r=[],s=[],t=[];p.forEach(function(u){switch(u.getType()){case c('MercuryTypeaheadConstants').FRIEND_TYPE:q.push(u);break;case c('MercuryTypeaheadConstants').FB4C_TYPE:r.push(u);break;case c('MercuryTypeaheadConstants').THREAD_TYPE:s.push(u);break;case c('MercuryTypeaheadConstants').NON_FRIEND_TYPE:t.push(u);break;}});return q.concat(r,s,t);},sortEntriesWithoutGroupsOrViewer:function o(p,q){var r=[],s=[],t=[];p.forEach(function(u){if(u.getUniqueID()===q)return;switch(u.getType()){case c('MercuryTypeaheadConstants').FRIEND_TYPE:r.push(u);break;case c('MercuryTypeaheadConstants').FB4C_TYPE:s.push(u);break;case c('MercuryTypeaheadConstants').NON_FRIEND_TYPE:t.push(u);break;}});return r.concat(s,t);},getEntryOrder:function o(p){var q=arguments.length<=1||arguments[1]===undefined?l:arguments[1];if(n._shouldHoistPages(p)){q=[].concat(q);q.splice(q.indexOf(c('MercuryTypeaheadConstants').PAGE_TYPE));q.unshift(c('MercuryTypeaheadConstants').PAGE_TYPE);}return q;},orderEntries:function o(p,q){var r=[];this.getEntryOrder(q).filter(function(s){return s!==c('MercuryTypeaheadConstants').SEARCH_TYPE;}).concat(c('MercuryTypeaheadConstants').SEARCH_TYPE).forEach(function(s){return r.push.apply(r,p.filter(function(t){return (this.areSectionsEqual(t.getType(),s));}.bind(this)));}.bind(this));return r;},buildListSections:function o(p,q,r){if(!p.length)return k();r=this.getEntryOrder(q,r);var s=c('mapObject')(m,function(t){return babelHelpers['extends']({},t,{entries:[]});});s[c('MercuryTypeaheadConstants').COMMERCE_PAGE_TYPE]=s[c('MercuryTypeaheadConstants').PAGE_TYPE];p.forEach(function(t){var u=t.getType();if(s[u])s[u].entries.push(t);});return k(r.filter(function(t){return s[t].entries.length;}).map(function(t){return [s[t].header,s[t].entries];}));},buildCustomSection:function o(p,q){var r;return r={},r[p]=q,r;},areSectionsEqual:function o(p,q){if(p===c('MercuryTypeaheadConstants').COMMERCE_PAGE_TYPE)return q===c('MercuryTypeaheadConstants').COMMERCE_PAGE_TYPE||q===c('MercuryTypeaheadConstants').PAGE_TYPE;return p===q;},scrollEntryIntoView:function o(p,q){var r=c('ReactDOM').findDOMNode(q),s=q.getScrollTop(),t=p.offsetTop-s,u=r.offsetHeight-p.offsetHeight;if(t>=u){q.scrollToPosition(s+t-u);}else if(t<0)q.scrollToPosition(s+t);},getMessageSearchEntry:function o(p){if(!c('MercuryConfig').SearchCrossConversations||!c('CurrentEnvironment').messengerdotcom||p.length<2)return null;return new (c('SearchableEntry'))({uniqueID:'__special_search_entry__',title:h._("Search Messages for \"{queryString}\"",[h.param('queryString',p)]),photo:i('/images/mercury/clients/messenger/search/SearchFieldIcon.png'),type:c('MercuryTypeaheadConstants').SEARCH_TYPE});},_shouldHoistPages:function o(p){if(!p)return false;return !!(c('MercuryConfig').HoistAgentsKeywords&&c('MercuryConfig').HoistAgentsKeywords.indexOf(p.toLowerCase().trim())!==-1);}};f.exports=n;}),null);
__d('MessengerSearchSource',['fbt','ix','ChatSearchSource','CurrentEnvironment','MercuryConfig','MercuryIDs','MercuryParticipants','MercuryParticipantTypes','MercurySingletonProvider','MercuryTypeaheadConstants','MessengerTypeaheadUtils','SearchableEntry','emptyFunction','requireWeak'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=50,m=c('MercuryConfig').SearchCrossConversations&&c('CurrentEnvironment').messengerdotcom;j=babelHelpers.inherits(n,c('ChatSearchSource'));k=j&&j.prototype;n.getForFBID=function(p){return o.getForFBID(p);};n.get=function(){return o.get();};function n(p){k.constructor.call(this,{queryRequests:[{uri:'/ajax/mercury/composer_query.php'}]});this.$MessengerSearchSource1=[];this.$MessengerSearchSource2=p;}n.prototype.bootstrapImpl=function(p){c('requireWeak')('OrderedFriendsList',function(r){return (r.getSearchableEntries(l,function(s){this.$MessengerSearchSource1=s;k.addLocalEntries.call(this,s);}.bind(this)));}.bind(this));var q=c('MercuryIDs').getParticipantIDFromUserID(this.$MessengerSearchSource2);c('MercuryParticipants').get(q,function(r){k.addLocalEntries.call(this,[new (c('SearchableEntry'))({uniqueID:r.fbid?r.fbid.toString():r.id,title:r.name,type:c('MercuryParticipantTypes').FRIEND,photo:r.big_image_src||r.image_src,uri:r.href,auxiliaryData:{isMessengerUser:r.is_messenger_user}})]);}.bind(this));k.bootstrapImpl.call(this,c('emptyFunction'));p();};n.prototype.searchImpl=function(p,q,r){r=r||{};if(p===''&&r.showDefaultEntries){q(this.$MessengerSearchSource1,p);var s=r&&r.onQueryFinished;s&&s(p);return;}r.threadLimit=c('MercuryConfig').MaxThreadResults;k.searchImpl.call(this,p,this.$MessengerSearchSource3(q,r),r);};n.prototype.$MessengerSearchSource3=function(p,q){return m&&q&&q.showThreadSearchEntry?function(r,s){var t=c('MessengerTypeaheadUtils').getMessageSearchEntry(s);if(t){p([t].concat(r),s);}else p(r,s);}:p;};var o=new (c('MercurySingletonProvider'))(n);f.exports=n;}),null);
__d('MessengerSearchTypeahead.react',['cx','fbt','ix','AbstractTypeahead.react','Bootloader','Image.react','MercuryIDs','MercuryThreadIDMap','MercuryThreads','MercuryTypeaheadConstants','MercuryVanityIDMap','MessengerActions','MessengerSearchSource','React','TypeaheadNavigation'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;if(c.__markCompiled)c.__markCompiled();var m=c('MercuryThreadIDMap').get(),n=c('MercuryThreads').get(),o=c('React').PropTypes,p=j('/images/mercury/clients/messenger/threadlist/InboxThreadDismiss.png'),q=100,r=null,s=null;k=babelHelpers.inherits(t,c('React').PureComponent);l=k&&k.prototype;function t(){var v,w;for(var x=arguments.length,y=Array(x),z=0;z<x;z++)y[z]=arguments[z];return w=(v=l.constructor).call.apply(v,[this].concat(y)),u.call(this),w;}t.prototype.componentWillMount=function(){var v=function x(y,z,aa){var ba=y.indexOf(z),ca=ba==-1?y.length-1:ba-1;aa(ca==-1?y[y.length-1]:y[ca]);},w=function x(y,z,aa){var ba=y.indexOf(z)+1;aa(ba==y.length?y[0]:y[ba]);};if(this.props.isFlipped){v=c('TypeaheadNavigation').moveDown;w=c('TypeaheadNavigation').moveUp;}this.$MessengerSearchTypeahead1=function(x){for(var y=arguments.length,z=Array(y>1?y-1:0),aa=1;aa<y;aa++)z[aa-1]=arguments[aa];return v.apply(undefined,[s.orderEntries(x,this.props.queryString)].concat(z));}.bind(this);this.$MessengerSearchTypeahead2=function(x){for(var y=arguments.length,z=Array(y>1?y-1:0),aa=1;aa<y;aa++)z[aa-1]=arguments[aa];return w.apply(undefined,[s.orderEntries(x,this.props.queryString)].concat(z));}.bind(this);};t.prototype.render=function(){var v=this.props.isFacebookChat?i._("Search"):i._("Search for people and groups");return (c('React').createElement('div',{className:"_3rh8"},c('React').createElement(c('AbstractTypeahead.react'),{autoHighlight:this.props.isFacebookChat,blurOnWindowBlur:false,className:"_5iwm"+(this.props.isFocused||!!this.props.queryString?' '+"_5iwn":'')+(' '+"_150g")+(this.props.hideResults?' '+"_1a03":''),disabled:this.props.hideResults,inputClassName:"_3rhb",navigation:{moveUp:this.$MessengerSearchTypeahead1,moveDown:this.$MessengerSearchTypeahead2},onBlur:this.props.onBlur,onChange:this.$MessengerSearchTypeahead3,onFocus:function(){var w;this.$MessengerSearchTypeahead4();(w=this.props).onFocus.apply(w,arguments);}.bind(this),onMouseOver:this.$MessengerSearchTypeahead4,onClick:this.$MessengerSearchTypeahead4,onSelectAttempt:this.$MessengerSearchTypeahead5,placeholder:v,presenter:{ViewRenderer:r,alwaysVisibleOnFocus:true,extraRendererProps:{className:"_11_d",hasHoverState:this.props.isFacebookChat,isLoading:this.state.isLoading,onScrollIntoView:this.props.onScrollIntoView,viewer:this.props.viewer},maxEntries:this.props.maxEntries||q,sortEntries:this.$MessengerSearchTypeahead6,useLayer:false},queryString:this.props.queryString,role:'search',searchSource:c('MessengerSearchSource').getForFBID(this.props.viewer),searchSourceOptions:{onQueryFinished:this.$MessengerSearchTypeahead7,onQueryStarted:this.$MessengerSearchTypeahead8,showDefaultEntries:!this.props.isFacebookChat,showThreadSearchEntry:!this.props.isFacebookChat&&!!this.props.queryString},selectOnTab:true,spellCheck:false,showEntriesOnFocus:!this.props.isFacebookChat}),c('React').createElement(c('Image.react'),{onMouseDown:this.props.onClear,className:(!this.props.queryString?"hidden_elem":'')+(' '+"_2xme"),src:p})));};t.propTypes={hideResults:o.bool,isFacebookChat:o.bool,isFlipped:o.bool,isFocused:o.bool,maxEntries:o.number,onBlur:o.func,onChange:o.func,onClear:o.func,onFocus:o.func,onSelect:o.func.isRequired,onScrollIntoView:o.func,queryString:o.string,viewer:o.string.isRequired};var u=function v(){this.state={isLoading:false,orderable:!!s};this.$MessengerSearchTypeahead3=function(){var w;this.setState({isLoaded:false});(w=this.props).onChange.apply(w,arguments);}.bind(this);this.$MessengerSearchTypeahead4=function(){if(!this.state.orderable)c('Bootloader').loadModules(["MessengerTypeaheadView.react","MessengerTypeaheadUtils"],function(w,x){r=w;s=x;this.setState({orderable:true});}.bind(this),'MessengerSearchTypeahead.react');}.bind(this);this.$MessengerSearchTypeahead8=function(w){if(w===this.props.queryString)this.setState({isLoading:true});}.bind(this);this.$MessengerSearchTypeahead7=function(w){if(w===this.props.queryString)this.setState({isLoading:false,isLoaded:true});}.bind(this);this.$MessengerSearchTypeahead6=function(w){return s?s.sortEntries(w,this.props.queryString):w;}.bind(this);this.$MessengerSearchTypeahead5=function(w){var x=w.getUniqueID(),y=w.getType(),z=w.getAuxiliaryData().alias;if(z)c('MercuryVanityIDMap').set(z,c('MercuryIDs').getParticipantIDFromUserID(x));if(y===c('MercuryTypeaheadConstants').SEARCH_TYPE){c('MessengerActions').changeQueryAll(this.props.queryString);}else if(y===c('MercuryTypeaheadConstants').THREAD_TYPE){m.getClientIDFromServerID(x,function(aa){this.props.onSelect(aa,y);}.bind(this));}else n.getThreadMeta(c('MercuryIDs').getThreadIDFromUserID(x),function(aa){this.props.onSelect(aa.thread_id,y);}.bind(this));}.bind(this);};f.exports=t;}),null);
__d('ChatTypeaheadWrapper.react',['cx','Arbiter','Bootloader','ChatConfig','ChatOpenTab','ChatOpenTabEventLogger','ChatSidebarComposeLink.react','ChatSidebarSections','ChatSidebarSheet.react','ChatTypeaheadConstants','FantaTabActions','MercuryConfig','MessengerSearchTypeahead.react','React','Run','emptyFunction','getActiveElement'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=40,l=c('ChatConfig').get('divebar_rounded_profile',false);function m(o){c('Arbiter').inform('sidebar/typeahead/active',o);}i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.state={height:0,value:'',isSearching:false,dropdownComponent:null},p;}n.prototype.componentDidMount=function(){if(this.props.isSidebar){c('Arbiter').subscribe('sidebar/resized',function(o,p){this.setState({height:p});}.bind(this));c('Run').onAfterLoad(function(){c('Bootloader').loadModules(["ChatSidebarDropdown.react","SidebarType","ChatSidebarActions"],function(o,p,q){this.setState({dropdownComponent:c('React').createElement(o,{sidebarType:p.SIDEBAR,onToggleSidebar:q.disable})});}.bind(this),'ChatTypeaheadWrapper.react');}.bind(this));}else c('Arbiter').subscribe('buddyList/resized',function(o,p){this.setState({height:p});}.bind(this));};n.prototype.componentWillUpdate=function(o,p){if(p.isSearching!==this.state.isSearching)m(p.isSearching);};n.prototype.render=function(){var o=this.state.height!=null?Math.floor((this.state.height-k*2)/k):null;return (c('React').createElement('div',{className:!l?"squareProfile":''},this.props.isFlipped?c('React').createElement(c('ChatSidebarSheet.react'),{className:'fbChatSidebarMessage'}):null,c('React').createElement(c('MessengerSearchTypeahead.react'),{isFacebookChat:true,isFlipped:this.props.isFlipped,isFocused:true,maxEntries:o,queryString:this.state.value,viewer:this.props.id,onBlur:function(){return this.setState({isSearching:false,value:''});}.bind(this),onChange:function(p){var q=p.target.value;this.setState({isSearching:q!=='',value:q});}.bind(this),onClear:c('emptyFunction'),onFocus:c('emptyFunction'),onScrollIntoView:c('emptyFunction'),onSelect:function p(q,r){c('getActiveElement')().blur();if(c('MercuryConfig').FantaTabs){if(r===c('ChatTypeaheadConstants').MEETING_ROOM_PAGE_TYPE){c('Bootloader').loadModules(["MercuryIDs","goURI"],function(s,t){var u=s.getUserIDFromThreadID(q);t('/'+u);},'ChatTypeaheadWrapper.react');}else{c('FantaTabActions').openTab(q,r);c('ChatOpenTabEventLogger').logByType(r,c('ChatSidebarSections').TYPEAHEAD,q);}}else c('ChatOpenTab').openTabByType(q,r,c('ChatSidebarSections').TYPEAHEAD);}}),this.props.isSidebar?c('React').createElement('div',{className:"_531b"},this.state.dropdownComponent,c('React').createElement(c('ChatSidebarComposeLink.react'),{className:"_3a-4 _5q85"})):null,this.props.isFlipped?null:c('React').createElement(c('ChatSidebarSheet.react'),{className:'fbChatSidebarMessage'})));};f.exports=n;}),null);
__d('ChatTypeaheadCore',['ChatTypeaheadWrapper.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={init:function i(j,k,l,m){c('ReactDOM').render(c('React').createElement(c('ChatTypeaheadWrapper.react'),{id:k,isSidebar:l,isFlipped:m}),j);}};f.exports=h;}),null);
__d('NotificationBeeperConst',['keyMirror'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={IDLE_DELAY:10000,ACTIVE_DELAY_LONG:4000,FADE_OUT_LENGTH:1500,BeepStates:c('keyMirror')({PENDING:true,RENDERED:true,READY_TO_HIDE:true,FADING_OUT:true})};f.exports=h;}),null);
__d('NotificationBeeperItemCloseButton.react',['cx','fbt','React','XUIAbstractGlyphButton.react'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.render=function(){'use strict';return (c('React').createElement(c('XUIAbstractGlyphButton.react'),babelHelpers['extends']({},this.props,{className:"_3soc",title:i._("Close")})));};function l(){'use strict';j.apply(this,arguments);}f.exports=l;}),null);
__d('NotificationInterpolator',['Badge.react','React'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){var k=null;if(j.entity.is_viewer_coworker===false||j.entity.is_multi_company_group===true)k=c('React').createElement(c('Badge.react'),{type:'work_non_coworker'});return c('React').createElement('span',{className:'fwb'},i,k);}f.exports=h;}),null);
__d('NotificationURI',['BusinessURI.brands','URI','isFacebookURI','VideoPermalinkURI'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={localize:function i(j){j=c('BusinessURI.brands')(j);if(!c('isFacebookURI')(j))return j.toString();var k=j.getSubdomain();return j.getUnqualifiedURI().getQualifiedURI().setSubdomain(k).toString();},snowliftable:function i(j){if(!j)return false;j=new (c('URI'))(j);var k=j.getQueryData();return c('isFacebookURI')(j)&&(c('VideoPermalinkURI').isValid(j)||'fbid' in k);},isVaultSetURI:function i(j){return this._areEquals(j,'/ajax/vault/sharer_preview.php');},isAlbumDraftRecoveryDialogURI:function i(j){return this._areEquals(j,'/ajax/photos/upload/overlay/');},_areEquals:function i(j,k){if(!j)return false;j=new (c('URI'))(j);return c('isFacebookURI')(j)&&j.getPath()===k;},_startsWith:function i(j,k){if(!j)return false;j=new (c('URI'))(j);return c('isFacebookURI')(j)&&j.getPath().startsWith(k);}};f.exports=h;}),null);
__d('NotificationBeeperItemContents.react',['cx','Animation','AsyncRequest','Bootloader','FBProfilePhotoShadow.react','Image.react','ImageBlock.react','NotificationBeeperItemCloseButton.react','NotificationInterpolator','NotificationURI','NotificationUserActions','React','ReactDOM','TextWithEntities.react','Timestamp.react'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(){var l,m;'use strict';for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.$NotificationBeeperItemContents1=function(){c('NotificationUserActions').markNotificationsAsRead([this.props.beep.notificationID]);}.bind(this),this.$NotificationBeeperItemContents2=function(q){this.$NotificationBeeperItemContents1();this.props.onHide();if(q.button===1||q.altKey||q.ctrlKey||q.metaKey||q.shiftKey)return;var r=this.props.beep;if(c('NotificationURI').isAlbumDraftRecoveryDialogURI(r.link)){new (c('AsyncRequest'))(r.link).send();q.preventDefault();}else if(r.photo&&c('NotificationURI').snowliftable(r.link)){c('Bootloader').loadModules(["PhotoSnowlift"],function(s){s.bootstrap(r.link,q.currentTarget);},'NotificationBeeperItemContents.react');q.preventDefault();}else if(r.ajaxifyLink){c('Bootloader').loadModules(["AsyncDialog"],function(s){s.bootstrap(r.ajaxifyLink,q.currentTarget,'dialog');},'NotificationBeeperItemContents.react');q.preventDefault();}}.bind(this),this.$NotificationBeeperItemContents3=function(){this.$NotificationBeeperItemContents1();this.props.onHide();}.bind(this),this.$NotificationBeeperItemContents4=function(){new (c('Animation'))(c('ReactDOM').findDOMNode(this.refs.inner)).from('opacity','0').to('opacity','1').duration(200).go();}.bind(this),m;}k.prototype.componentDidMount=function(){'use strict';this.props.onReadyToHide(this.props.beep.notificationID);};k.prototype.componentDidUpdate=function(l){'use strict';if(l.beep.beepID!==this.props.beep.beepID){this.$NotificationBeeperItemContents4();this.props.onReadyToHide(this.props.beep.notificationID);}};k.prototype.render=function(){'use strict';var l=this.props.beep,m=((l.actors[0]||{}).profile_picture||{}).uri,n=(l.icon||{}).uri;return (c('React').createElement('div',{ref:'inner',className:this.props.className},c('React').createElement(c('NotificationBeeperItemCloseButton.react'),{onClick:this.$NotificationBeeperItemContents3}),c('React').createElement('a',{href:l.link,onClick:this.$NotificationBeeperItemContents2,className:"_3soi"},c('React').createElement(c('ImageBlock.react'),{className:"_3soj",spacing:'medium'},c('React').createElement(c('FBProfilePhotoShadow.react'),{className:"_2yt7"},c('React').createElement(c('Image.react'),{src:m,className:"_3sok"+(!m?' '+"hidden_elem":'')})),c('React').createElement('div',{className:"_3sol"},c('React').createElement(c('TextWithEntities.react'),{renderEmoticons:true,renderEmoji:true,interpolator:c('NotificationInterpolator'),ranges:l.text.ranges,aggregatedranges:l.text.aggregated_ranges,text:l.text.text}),c('React').createElement(c('ImageBlock.react'),{className:"_3som"},c('React').createElement(c('Image.react'),{className:"_1x8t"+(!n?' '+"hidden_elem":''),src:n}),c('React').createElement(c('Timestamp.react'),{time:l.timestamp.time,text:l.timestamp.text,verbose:l.timestamp.verbose})))))));};f.exports=k;}),null);
__d('NotificationBeeperItem.react',['cx','Animation','BrowserSupport','NotificationBeeperConst','NotificationBeeperItemContents.react','NotificationBeeperItemRenderersList','React','ReactDOM','Style','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('NotificationBeeperConst').FADE_OUT_LENGTH;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={fadedIn:false,hidden:false},this.$NotificationBeeperItem2=function(){this.setState({hidden:true});}.bind(this),this.$NotificationBeeperItem3=function(r){if(r in c('NotificationBeeperItemRenderersList'))return c('NotificationBeeperItemRenderersList')[r];return c('NotificationBeeperItemContents.react');},n;}l.prototype.componentDidMount=function(){'use strict';var m;if(c('BrowserSupport').hasCSSAnimations()){m=this.setState.bind(this,{fadedIn:true},null);}else m=function(){new (c('Animation'))(c('ReactDOM').findDOMNode(this.refs.item)).from('top','-30px').from('opacity','0').to('top','0px').to('opacity','1').duration(200).ondone(this.setState.bind(this,{fadedIn:true},null)).go();}.bind(this);c('setTimeoutAcrossTransitions')(m,50);this.props.onInserted(this.props.beep);};l.prototype.componentWillUnmount=function(){'use strict';if(this.$NotificationBeeperItem1){this.$NotificationBeeperItem1.stop();this.$NotificationBeeperItem1=null;}};l.prototype.render=function(){'use strict';var m=this.props.beep,n=this.$NotificationBeeperItem3(m.beepRenderer);return c('React').createElement('li',{className:this.state.hidden?"hidden_elem":'',ref:'item','data-gt':m.tracking},c('React').createElement(n,{beep:m,className:"_3sod"+(this.state.fadedIn?' '+"_3soe":''),onHide:this.$NotificationBeeperItem2,onReadyToHide:this.props.onReadyToHide,onPreventHide:this.props.onPreventHide,ref:'itemContents'}));};l.prototype.componentDidUpdate=function(m,n,o){'use strict';if(this.props.fadingOut){if(!this.$NotificationBeeperItem1)this.$NotificationBeeperItem1=new (c('Animation'))(c('ReactDOM').findDOMNode(this.refs.item)).from('opacity','1').to('opacity','0').duration(k).ondone(this.$NotificationBeeperItem2).go();c('ReactDOM').findDOMNode(this.refs.item).style.transitionDuration='0ms';}else if(this.$NotificationBeeperItem1){this.$NotificationBeeperItem1.stop();this.$NotificationBeeperItem1=null;c('Style').set(c('ReactDOM').findDOMNode(this.refs.item),'opacity','1');}};f.exports=l;}),null);
__d('NotificationImpressions',['AsyncSignal','NotificationTokens','URI'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h='/ajax/notifications/impression.php';function i(j,k){var l={ref:k};c('NotificationTokens').untokenizeIDs(j).forEach(function(m,n){l['alert_ids['+n+']']=m;});new (c('AsyncSignal'))(new (c('URI'))(h).getQualifiedURI().toString(),l).send();}f.exports={log:i};}),null);
__d('NotificationPhotoThumbnail',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(j){if(!j.media||!j.style_list||!j.style_list.length)return null;switch(j.style_list[0]){case 'new_album':case 'album':case 'application':case 'photo':case 'video':case 'video_autoplay':case 'video_inline':return j.media.image;default:return null;}}var i={getThumbnail:function j(k,l,m){var n;if(k&&k.length){k.some(function(r){n=h(r);if(n)return true;return false;});if(n)return n;}if(m){var o=m.relevant_comments;if(o&&o.length){var p=o[0].attachments;if(p&&p.length){n=h(p[0]);if(n)return n;}}}if(l){var q=l.attachments;if(q&&q.length)return h(q[0]);}return null;}};f.exports=i;}),null);
__d('NotificationSound',['Sound'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=5000;c('Sound').init(['audio/mpeg']);function i(j){this._soundPath=j;this._lastPlayed=0;}Object.assign(i.prototype,{play:function j(k){if(!this._soundPath)return;var l=Date.now();if(l-this._lastPlayed<h)return;this._lastPlayed=l;c('Sound').playOnlyIfImmediate(this._soundPath,k);}});f.exports=i;}),null);
__d('NotificationBeeper.react',['cx','Arbiter','ChannelConstants','NotificationBeeperConst','NotificationBeeperItem.react','NotificationBeeperPinnedPostLoader','NotificationConstants','NotificationImpressions','NotificationPhotoThumbnail','NotificationSound','NotificationUpdates','NotificationURI','NotificationUserActions','NotifTestIDs','React','WorkFocusModeController','setTimeoutAcrossTransitions','shield'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('WorkFocusModeController').WorkFocusMode,j=c('NotificationBeeperConst').ACTIVE_DELAY_LONG,k=c('NotificationBeeperConst').BeepStates,l=c('NotificationBeeperConst').FADE_OUT_LENGTH,m=c('NotificationBeeperConst').IDLE_DELAY,n=c('NotificationBeeperPinnedPostLoader').payload,o='beeper',p=c('NotificationConstants').PayloadSourceType,q=p.LIVE_SEND,r=p.OTHER_APPLICATION,s=p.CLIENT,t=c('React').createClass({displayName:'NotificationBeeper',getInitialState:function u(){return {soundEnabled:this.props.soundEnabled,hovering:false,fading:false,beeps:{}};},componentWillMount:function u(){this.subscriptions=[c('NotificationUpdates').subscribe('update-notifications',function(v,w){if(w.payloadsource===q||w.payloadsource===r||w.payloadsource===s){var x=w.nodes;if(x&&x.length){if(i&&i.currentViewerInFocusMode())return;this._handleBeepChanges(this._convertNotifications(x));}}}.bind(this)),c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('notif_sound_pref_changed'),function(v,w){this.setState({soundEnabled:w.obj.enabled});}.bind(this))];c('Arbiter').inform('NotificationBeeper/mounted',null,c('Arbiter').BEHAVIOR_PERSISTENT);if(n)this._handleBeepChanges(this._convertNotifications(n.nodes));},componentWillUnmount:function u(){this.subscriptions.forEach(function(v){v.unsubscribe();});this.subscriptions=null;},_onMouseEnter:function u(){this._hideWait&&clearTimeout(this._hideWait);var v=[],w=this.state.beeps;Object.keys(w).forEach(function(x){if(w[x].state!=k.PENDING){v.push(x);}else w[x].state=k.RENDERED;});c('NotificationUserActions').markNotificationsAsSeen(v);this.setState({hovering:true,fading:false,beeps:w});},_onMouseLeave:function u(){this._waitToHide(j);this.setState({hovering:false});},_onInsertedItem:function u(v){if(!this.state.hovering)this._waitToHide();if(this.state.soundEnabled&&v.sound){if(!this._notifSound)this._notifSound=new (c('NotificationSound'))(this.props.soundPath);this._notifSound.play(v.beepID);}if(this.props.shouldLogImpressions)c('NotificationImpressions').log([v.notificationID],o);},_waitToHide:function u(v){this._hideWait&&clearTimeout(this._hideWait);this._hideWait=c('setTimeoutAcrossTransitions')(c('shield')(this._hide,this),v==null?m:v);},_onReadyToHide:function u(v,w){this.state.beeps[v].state=k.READY_TO_HIDE;if(!this._hideWait)this._waitToHide(w);},_onPreventHide:function u(v){this.state.beeps[v].state=k.RENDERED;},_hide:function u(){this._hideWait=null;var v=this.state.beeps;Object.keys(v).forEach(function(w){if(v[w].state==k.READY_TO_HIDE)v[w].state=k.FADING_OUT;});this.setState({fading:true});c('setTimeoutAcrossTransitions')(c('shield')(this._finishHide,this),l);},_finishHide:function u(){if(!this.state.fading)return;var v=this.state.beeps;Object.keys(v).forEach(function(w){if(v[w].state==k.FADING_OUT)delete v[w];});this.setState({fading:false,beeps:v});c('setTimeoutAcrossTransitions')(function(){var w=this.state.beeps;Object.keys(w).forEach(function(x){if(w[x].state==k.PENDING)w[x].state=k.RENDERED;});this.setState({beeps:w});}.bind(this));},_handleBeepChanges:function u(v){var w=this.state.fading?k.PENDING:k.RENDERED,x=this.state.beeps,y=false;Object.keys(v).reverse().forEach(function(z){var aa={state:w,data:v[z]};if(!x[z]||x[z].data.beepID!=aa.data.beepID){if(x[z]){y=true;if(aa.data.beepUpdatesOnTop)delete x[z];}x[z]=aa;}});if(y)this._waitToHide();this.forceUpdate();},render:function u(){var v=this.state.beeps,w=[];Object.keys(v).reverse().forEach(function(z){var aa=v[z];if(aa.state==k.PENDING)return;w.push(c('React').createElement(c('NotificationBeeperItem.react'),{key:z,fadingOut:this.state.fading&&aa.state==k.FADING_OUT,beep:aa.data,onInserted:this._onInsertedItem,onReadyToHide:this._onReadyToHide,onPreventHide:this._onPreventHide}));},this);var x=w.length>0,y=(!x?"hidden_elem":'')+(' '+"_50d1");return (c('React').createElement('ul',{ref:'container',className:y,'data-gt':this.props.tracking,'data-testid':c('NotifTestIDs').BEEPER_LIST,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},w));},_convertNotifications:function u(v){var w={};v.forEach(function(x){if(!x.showBeep||!x.alert_id)return;var y=x.alert_id,z=y+'-'+x.receivedTime,aa=c('NotificationPhotoThumbnail').getThumbnail(x.attachments,x.attached_story);w[y]={notificationID:y,notifID:x.id,beepID:z,beepRenderer:x.beepRenderer,rendererData:x.rendererData,beepUpdatesOnTop:x.beepUpdatesOnTop,actors:x.unaggregatedActors||x.actors,icon:x.icon,link:x.url?c('NotificationURI').localize(x.url):'#',url:x.url,ajaxifyLink:x.ajaxify_url,photo:aa,text:x.unaggregatedTitle||x.title,timestamp:x.timestamp,receivedTime:x.receivedTime,sound:!!x.sound,tracking:x.tracking};});return w;}});f.exports=t;}),null);
__d('NotificationBeeperContainer',['NotificationBeeper.react','React','ReactDOM'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={renderBeeper:function i(j,k){c('ReactDOM').render(c('React').createElement(c('NotificationBeeper.react'),j),k);}};f.exports=h;}),null);
__d('EXHPLeftNavController',['cx','csx','Arbiter','Bootloader','Event','Parent','UIPagelet','emptyFunction','requireWeak'],(function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=void 0;function k(){if(!j){j=true;c('Bootloader').loadModules(["LeftNavActions","BookmarkPopoverMenu.react","LeftNavDragController","LeftNavItemDraggableBehavior"],c('emptyFunction'),'EXHPLeftNavController');}}var l=void 0;function m(){if(!l){l=true;c('UIPagelet').loadFromEndpoint('ReactLeftNavPagelet','pagelet_navigation').setHandler(function(){l=false;if(p){p.remove();p=null;}});}}var n={},o={},p=void 0,q={init:function v(w){p=c('Event').listen(w,'click',function(x){var y=x.target,z=c('Parent').bySelector(y,"._1msp");if(z){var aa=c('Parent').byClass(z,'homeSideNav').id;r(z,aa);return;}var ba=c('Parent').byAttribute(y,'data-nav-item-id');if(!ba)return;var ca=ba.getAttribute('data-nav-item-id'),da=c('Parent').bySelector(y,"._26tg");if(da){s(da,ca);}else t(ba,ca);});},consumeDidHaveClick:function v(w){var x=n[w];delete n[w];return !!x;},consumeDidClickSeeAll:function v(w){var x=o[w];delete o[w];return !!x;}};function r(v,w){v.parentNode.insertBefore(u(),v);o[w]=true;k();m();}function s(v,w){v.parentNode.replaceChild(u(),v);n[w]=true;k();m();}function t(v,w){var x=v.querySelector('.countValue');x&&x.remove();if(v.getAttribute('data-type')==='type_explore_feed'){m();c('requireWeak')('LeftNavController',function(y){c('Arbiter').inform('LeftNavController/topicFeedClick',w);});}}function u(){var v=document.createElement('span');v.className="_2ita _55ym _55yn _55yo";return v;}f.exports=q;}),null);
__d('PageLiveInsightsItemContents.react',['BootloadOnRender.react','JSResource','LazyComponent.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){return (c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('PageLiveInsightsItemContentsImpl.react').__setRef('PageLiveInsightsItemContents.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),babelHelpers['extends']({},this.props,{ref:'itemContents'}))}));};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('SyncRequestAcceptedMessage.react',['fbt','cx','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){if(this.props.isSender){return (c('React').createElement('div',null,h._("{receiver} accepted your invite to play {app name}.",[h.param('receiver',c('React').createElement('span',{className:"_dg4"},this.props.receiverName)),h.param('app name',c('React').createElement('span',{className:"_dg5"},this.props.appName))])));}else return (c('React').createElement('div',null,h._("You accepted an invite from {sender} to play {app name}.",[h.param('sender',c('React').createElement('span',{className:"_dg4"},this.props.senderName)),h.param('app name',c('React').createElement('span',{className:"_dg5"},this.props.appName))])));};function m(){j.apply(this,arguments);}m.propTypes={appName:l.string.isRequired,isSender:l.bool.isRequired,receiverName:l.string.isRequired,senderName:l.string.isRequired};f.exports=m;}),null);
__d('SyncRequestCanceledMessage.react',['cx','fbt','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){if(this.props.isSender){return (c('React').createElement('div',null,i._("You canceled an invite to {receiver} to play {app name}.",[i.param('receiver',c('React').createElement('span',{className:"_dg4"},this.props.receiverName)),i.param('app name',c('React').createElement('span',{className:"_dg5"},this.props.appName))])));}else return (c('React').createElement('div',null,i._("{sender} canceled an invitation to play {app name}.",[i.param('sender',c('React').createElement('span',{className:"_dg4"},this.props.senderName)),i.param('app name',c('React').createElement('span',{className:"_dg5"},this.props.appName))])));};function m(){j.apply(this,arguments);}m.propTypes={appName:l.string.isRequired,isSender:l.bool.isRequired,receiverName:l.string.isRequired,senderName:l.string.isRequired};f.exports=m;}),null);
__d('SyncRequestExpiredMessage.react',['fbt','cx','React'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){'use strict';if(this.props.isSender){return (c('React').createElement('div',null,h._("{receiver} missed your invite to play {app name}.",[h.param('receiver',c('React').createElement('span',{className:"_dg4"},this.props.receiverName)),h.param('app name',c('React').createElement('span',{className:"_dg5"},this.props.appName))])));}else return (c('React').createElement('div',null,h._("You missed an invite from {sender} to play {app name}.",[h.param('sender',c('React').createElement('span',{className:"_dg4"},this.props.senderName)),h.param('app name',c('React').createElement('span',{className:"_dg5"},this.props.appName))])));};function m(){'use strict';j.apply(this,arguments);}m.propTypes={appName:l.string.isRequired,isSender:l.bool.isRequired,receiverName:l.string.isRequired,senderName:l.string.isRequired};f.exports=m;}),null);
__d('SyncRequestRejectedMessage.react',['cx','fbt','AsyncRequest','Link.react','React','URI'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;'use strict';for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$SyncRequestRejectedMessage1=function(){var s=new (c('URI'))('/games/block_app/'),t=new (c('AsyncRequest'))().setURI(s);t.setData({app_id:this.props.app.id,source:'sync_request'});t.send();}.bind(this),this.$SyncRequestRejectedMessage2=function(){var s=new (c('URI'))('/games/block_user/'),t=new (c('AsyncRequest'))().setURI(s);t.setData({app_id:this.props.app.id,blockee_uid:this.props.sender.id});t.send();}.bind(this),o;}m.prototype.render=function(){'use strict';if(this.props.isSender){return c('React').createElement('div',null,i._("{receiver} declined your invite to play {app_name}.",[i.param('receiver',c('React').createElement('span',{className:"_dg4"},this.props.receiver.name)),i.param('app_name',c('React').createElement('span',{className:"_dg5"},this.props.app.name))]));}else return c('React').createElement('div',null,i._("You declined an invite from {sender} to play {app_name}.",[i.param('sender',c('React').createElement('span',{className:"_dg4"},this.props.sender.name)),i.param('app_name',c('React').createElement('span',{className:"_dg5"},this.props.app.name))]),c('React').createElement('div',{className:"_13n7"},c('React').createElement('div',null,c('React').createElement(c('Link.react'),{onClick:this.$SyncRequestRejectedMessage1},i._("Block {app}",[i.param('app',this.props.app.name)]))),c('React').createElement('div',null,c('React').createElement(c('Link.react'),{onClick:this.$SyncRequestRejectedMessage2},i._("Block requests from {sender}",[i.param('sender',this.props.sender.name)])))));};m.propTypes={requestId:l.string.isRequired,app:l.object.isRequired,isSender:l.bool.isRequired,receiver:l.object.isRequired,sender:l.object.isRequired};f.exports=m;}),null);
__d('SyncRequestTimer.react',['fbt','React'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;function l(n){if(n){n=Math.ceil(n);var o=n%60;if(o<10)o='0'+o;var p=Math.floor(n/60);return p+':'+o;}else return "0:00";}i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;m.prototype.render=function(){'use strict';if(this.props.isSender){return (c('React').createElement('div',null,h._("({time_remaining} remaining)",[h.param('time_remaining',l(this.props.timeRemaining))])));}else return (c('React').createElement('div',null,h._("You have {time_remaining} to accept.",[h.param('time_remaining',l(this.props.timeRemaining))])));};function m(){'use strict';i.apply(this,arguments);}m.propTypes={timeRemaining:k.number.isRequired,isSender:k.bool.isRequired,receiverName:k.string.isRequired};f.exports=m;}),null);
__d('SyncRequestTitle.react',['fbt','cx','React'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){'use strict';if(this.props.isSender){return (c('React').createElement('div',null,h._("Waiting for {receiver} to accept your invite to play {app_name}.",[h.param('receiver',c('React').createElement('span',{className:"_dg4"},this.props.receiverName)),h.param('app_name',c('React').createElement('span',{className:"_dg5"},this.props.appName))])));}else return (c('React').createElement('div',null,h._("{sender} wants to play {app_name} with you, right now.",[h.param('sender',c('React').createElement('span',{className:"_dg4"},this.props.senderName)),h.param('app_name',c('React').createElement('span',{className:"_dg5"},this.props.appName))])));};function m(){'use strict';j.apply(this,arguments);}m.propTypes={appName:l.string.isRequired,isSender:l.bool.isRequired,receiverName:l.string.isRequired,senderName:l.string.isRequired};f.exports=m;}),null);
__d("XSyncRequestSubmitController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/platform\/games\/sync_requests\/submit\/",{request_id:{type:"Int",required:true},sender:{type:"Int",required:true},action:{type:"Int",required:true}});}),null);
__d('SyncRequest.react',['cx','fbt','Arbiter','AsyncRequest','ChannelConstants','React','SyncRequestStatusEnum','SyncRequestTitle.react','SyncRequestAcceptedMessage.react','SyncRequestRejectedMessage.react','SyncRequestExpiredMessage.react','SyncRequestCanceledMessage.react','SyncRequestTimer.react','XUIButton.react','XSyncRequestSubmitController','getObjectValues'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;'use strict';for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={buttonsDisabled:false,time:Date.now(),status:this.props.status,viewerIsSender:this.props.viewerId===this.props.sender.id},this.$SyncRequest1=function(){this.$SyncRequest4(c('SyncRequestStatusEnum').ACCEPTED);var s=window.open(this.props.app.uri);if(s)s.focus();}.bind(this),this.$SyncRequest2=function(){this.$SyncRequest4(c('SyncRequestStatusEnum').REJECTED);}.bind(this),this.$SyncRequest3=function(){this.$SyncRequest4(c('SyncRequestStatusEnum').CANCELED);}.bind(this),this.$SyncRequest4=function(s){this.setState({status:s,buttonsDisabled:true});var t=c('XSyncRequestSubmitController').getURIBuilder().setInt('request_id',this.props.requestId).setInt('sender',this.props.sender.id).setInt('action',s).getURI();new (c('AsyncRequest'))().setURI(t).setHandler(function(u){this.setState({status:s});}.bind(this)).setErrorHandler(function(u){this.setState({buttonsDisabled:false});}.bind(this)).send();}.bind(this),o;}m.prototype.componentWillMount=function(){'use strict';if(this.props.status===c('SyncRequestStatusEnum').PENDING){var n=c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('sync_request_updated'),function(q,r){r=r.obj;if(r.id.toString()!==this.props.requestId)return;this.setState({status:r.status});}.bind(this));this.setState({statusEvent:n});}var o=null;if(this.props.status===c('SyncRequestStatusEnum').PENDING){var p=function q(){this.setState({time_remaining:this.state.time_remaining-1});if(this.state.time_remaining<=0){clearInterval(this.state.counter);var r={counter:null,time_remaining:0};if(this.state.status===c('SyncRequestStatusEnum').PENDING)r.status=c('SyncRequestStatusEnum').EXPIRED;this.setState(r);}};o=setInterval(p.bind(this),1000);}this.setState({time_remaining:this.props.timeRemaining,counter:o});};m.prototype.componentWillUnmount=function(){'use strict';if(this.state.counter)clearInterval(this.state.counter);c('Arbiter').unsubscribe(this.state.statusEvent);};m.prototype.componentDidUpdate=function(n,o){'use strict';if(this.props.status!=c('SyncRequestStatusEnum').PENDING)this.state.status=this.props.status;if(this.props.onStatusUpdate)this.props.onStatusUpdate(this.state.status,o.status);};m.prototype.render=function(){'use strict';var n;switch(this.state.status){case c('SyncRequestStatusEnum').PENDING:var o;if(!this.state.viewerIsSender){o=[c('React').createElement(c('XUIButton.react'),{use:'confirm',onClick:this.$SyncRequest1,disabled:this.state.buttonsDisabled,label:i._("Accept")}),c('React').createElement(c('XUIButton.react'),{use:'default',onClick:this.$SyncRequest2,disabled:this.state.buttonsDisabled,label:i._("Decline")})];}else o=c('React').createElement(c('XUIButton.react'),{use:'default',onClick:this.$SyncRequest3,disabled:this.state.buttonsDisabled,label:i._("Cancel")});n=c('React').createElement('div',null,c('React').createElement('div',{className:"_372m"},c('React').createElement(c('SyncRequestTitle.react'),{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name})),c('React').createElement('div',{className:"_372n"},c('React').createElement(c('SyncRequestTimer.react'),{isSender:this.state.viewerIsSender,timeRemaining:this.state.time_remaining,receiverName:this.props.receiver.name})),c('React').createElement('div',{className:"_372o"},o));break;case c('SyncRequestStatusEnum').ACCEPTED:n=c('React').createElement('div',{className:"_372p mvs"},c('React').createElement(c('SyncRequestAcceptedMessage.react'),{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;case c('SyncRequestStatusEnum').REJECTED:n=c('React').createElement('div',{className:"_372p mvs"},c('React').createElement(c('SyncRequestRejectedMessage.react'),{requestId:this.props.requestId,app:this.props.app,isSender:this.state.viewerIsSender,receiver:this.props.receiver,sender:this.props.sender}));break;case c('SyncRequestStatusEnum').EXPIRED:n=c('React').createElement('div',{className:"_372p mvs"},c('React').createElement(c('SyncRequestExpiredMessage.react'),{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;case c('SyncRequestStatusEnum').CANCELED:n=c('React').createElement('div',{className:"_372p mvs"},c('React').createElement(c('SyncRequestCanceledMessage.react'),{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;default:throw new Error('The request status `%s` is unknown.',this.state.status);}return c('React').createElement('div',{className:"_372q"},n);};m.propTypes={app:l.object.isRequired,creationTime:l.number.isRequired,requestId:l.string.isRequired,receiver:l.object.isRequired,sender:l.object.isRequired,status:l.oneOf(c('getObjectValues')(c('SyncRequestStatusEnum'))).isRequired,timeout:l.number.isRequired,timeRemaining:l.number.isRequired,viewerId:l.number.isRequired,onStatusUpdate:l.func};f.exports=m;}),null);
__d('SidebarAppTickerResizer',['cx','Animation','Arbiter','AsyncRequest','ChatSidebarActions','ChatSidebarStore','ChatSidebarVisibility','CSS','debounce','Event','SidebarType','SimpleDrag','TickerController','$','queryThenMutateDOM'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=1e-07,j=1,k=85,l=171,m=165,n=300,o=46,p=90,q=82,r=150;function s(t,u,v,w,x){'use strict';this.$SidebarAppTickerResizer1=c('$')('pagelet_ticker');this.$SidebarAppTickerResizer2=c('$')('pagelet_canvas_nav_content');this.$SidebarAppTickerResizer3=this.$SidebarAppTickerResizer1.parentNode;this.$SidebarAppTickerResizer4=w;this.$SidebarAppTickerResizer5=x;var y=parseInt(v,10);if(!isNaN(y)){if(y>k)if(y!=this.$SidebarAppTickerResizer6())v=this.$SidebarAppTickerResizer6()+'px';this.$SidebarAppTickerResizer7(y);}this.$SidebarAppTickerResizer2.style.height=v;this.$SidebarAppTickerResizer8(t,u);if(v===null)c('Arbiter').subscribe('AppsDivebar/show-apps',this.$SidebarAppTickerResizer9.bind(this));if(!w){this.$SidebarAppTickerResizer10();c('CSS').hide(t);}c('Arbiter').subscribe('ChatSidebarDropdown/closeTicker',this.$SidebarAppTickerResizer10.bind(this));c('Arbiter').subscribe('ChatSidebarDropdown/openTicker',this.$SidebarAppTickerResizer11.bind(this));c('Arbiter').subscribe('sidebar/visibility',function(z,aa){if(aa)this.$SidebarAppTickerResizer12();}.bind(this));this.$SidebarAppTickerResizer13=c('debounce')(this.$SidebarAppTickerResizer9.bind(this),200);c('Event').listen(window,'resize',this.$SidebarAppTickerResizer13);c('Arbiter').inform('Ticker/resized');}s.prototype.$SidebarAppTickerResizer12=function(){'use strict';var t=Math.round(parseFloat(this.$SidebarAppTickerResizer1.style.height));if(t<=i)return;c('TickerController').show(this.$SidebarAppTickerResizer1);};s.prototype.$SidebarAppTickerResizer9=function(t){'use strict';c('queryThenMutateDOM')(function(){this.$SidebarAppTickerResizer14();}.bind(this),function(){var u=Math.round(parseFloat(this.$SidebarAppTickerResizer1.style.height));if(u>Math.round(this.$SidebarAppTickerResizer15())||this.$SidebarAppTickerResizer16&&this.$SidebarAppTickerResizer16>j){var v=this.$SidebarAppTickerResizer16/this.$SidebarAppTickerResizer17*100,w=this.$SidebarAppTickerResizer18(0,this.$SidebarAppTickerResizer15()-v);if(!(t&&t.type==='resize'))this.$SidebarAppTickerResizer19(w);c('ChatSidebarVisibility').shouldShowSidebar(null,function(x,y){c('ChatSidebarActions').show(x?c('SidebarType').SIDEBAR:c('SidebarType').BUDDYLIST);});}}.bind(this));};s.prototype.$SidebarAppTickerResizer15=function(){'use strict';if(!this.$SidebarAppTickerResizer4)return 0;if(c('ChatSidebarStore').getVisibleType()!==c('SidebarType').SIDEBAR)return p;return Math.min(p,(this.$SidebarAppTickerResizer17-this.$SidebarAppTickerResizer20-q)*100/this.$SidebarAppTickerResizer17);};s.prototype.$SidebarAppTickerResizer8=function(t,u){'use strict';var v=new (c('SimpleDrag'))(t);v.subscribe('start',this.$SidebarAppTickerResizer21.bind(this));v.subscribe(['update','end'],this.$SidebarAppTickerResizer22.bind(this));var w=new (c('SimpleDrag'))(u);w.subscribe('start',this.$SidebarAppTickerResizer21.bind(this));w.subscribe('update',this.$SidebarAppTickerResizer23.bind(this));w.subscribe('end',this.$SidebarAppTickerResizer24.bind(this));};s.prototype.$SidebarAppTickerResizer21=function(t,event){'use strict';this.$SidebarAppTickerResizer25=event.clientY;this.$SidebarAppTickerResizer14();this.$SidebarAppTickerResizer26();};s.prototype.$SidebarAppTickerResizer14=function(){'use strict';this.$SidebarAppTickerResizer20=this.$SidebarAppTickerResizer2.offsetTop;this.$SidebarAppTickerResizer27=this.$SidebarAppTickerResizer1.offsetHeight;this.$SidebarAppTickerResizer17=this.$SidebarAppTickerResizer3.offsetHeight;this.$SidebarAppTickerResizer16=this.$SidebarAppTickerResizer2.offsetHeight;this.$SidebarAppTickerResizer28=this.$SidebarAppTickerResizer16;};s.prototype.$SidebarAppTickerResizer26=function(){'use strict';c('CSS').addClass(this.$SidebarAppTickerResizer3,"_4vfq");};s.prototype.$SidebarAppTickerResizer29=function(){'use strict';c('CSS').removeClass(this.$SidebarAppTickerResizer3,"_4vfq");};s.prototype.$SidebarAppTickerResizer22=function(t,event){'use strict';var u=this.$SidebarAppTickerResizer16/this.$SidebarAppTickerResizer17*100,v=this.$SidebarAppTickerResizer18(event.clientY-this.$SidebarAppTickerResizer25,this.$SidebarAppTickerResizer15()-u);if(t=='end'){this.$SidebarAppTickerResizer29();this.$SidebarAppTickerResizer19(v);}c('ChatSidebarVisibility').shouldShowSidebar(null,function(w,x){c('ChatSidebarActions').show(w?c('SidebarType').SIDEBAR:c('SidebarType').BUDDYLIST);});};s.prototype.$SidebarAppTickerResizer23=function(t,event){'use strict';var u=-this.$SidebarAppTickerResizer16,v=this.$SidebarAppTickerResizer6()-this.$SidebarAppTickerResizer16,w=this.$SidebarAppTickerResizer30(event.clientY-this.$SidebarAppTickerResizer25,u,v);this.$SidebarAppTickerResizer18(-w,this.$SidebarAppTickerResizer15());this.$SidebarAppTickerResizer28=this.$SidebarAppTickerResizer16+w;this.$SidebarAppTickerResizer28=Math.max(j,this.$SidebarAppTickerResizer28);this.$SidebarAppTickerResizer2.style.height=this.$SidebarAppTickerResizer28+'px';};s.prototype.$SidebarAppTickerResizer24=function(t,event){'use strict';var u=this.$SidebarAppTickerResizer28,v=this.$SidebarAppTickerResizer31(this.$SidebarAppTickerResizer28);this.$SidebarAppTickerResizer7(v);var w=this.$SidebarAppTickerResizer18(this.$SidebarAppTickerResizer16-v,this.$SidebarAppTickerResizer15());if(this.$SidebarAppTickerResizer16!=v){this.$SidebarAppTickerResizer32(v);this.$SidebarAppTickerResizer19(w);}new (c('Animation'))(this.$SidebarAppTickerResizer2).from('height',u).to('height',v).duration(n).go();};s.prototype.$SidebarAppTickerResizer7=function(t){'use strict';if(!this.$SidebarAppTickerResizer5)return;var u="_3qrt",v=document.getElementsByClassName(u),w='';if(t==this.$SidebarAppTickerResizer33()){w='inline';}else w='';for(var x=0;x<v.length;x++)v[x].style.display=w;};s.prototype.$SidebarAppTickerResizer18=function(t,u){'use strict';var v=this.$SidebarAppTickerResizer27+t,w=v/this.$SidebarAppTickerResizer17*100;w=Math.max(i,Math.min(u,w));this.$SidebarAppTickerResizer1.style.height=w+'%';if(w!=i){c('CSS').removeClass(this.$SidebarAppTickerResizer1,'hidden_elem');this.$SidebarAppTickerResizer12();}return w;};s.prototype.$SidebarAppTickerResizer31=function(t){'use strict';var u=this.$SidebarAppTickerResizer33(),v=this.$SidebarAppTickerResizer6();return t<v-o?t<u-o?j:u:v;};s.prototype.$SidebarAppTickerResizer33=function(){'use strict';return k;};s.prototype.$SidebarAppTickerResizer6=function(){'use strict';if(this.$SidebarAppTickerResizer5){return m;}else return l;};s.prototype.$SidebarAppTickerResizer34=function(t){'use strict';var u=this.$SidebarAppTickerResizer6();return t<0?j:t>u?u:t;};s.prototype.$SidebarAppTickerResizer30=function(t,u,v){'use strict';return t<u?u:t>v?v:t;};s.prototype.$SidebarAppTickerResizer19=function(t){'use strict';new (c('AsyncRequest'))('/ajax/feed/ticker/resize').setData({height:''+t}).setMethod('POST').send();c('Arbiter').inform('Ticker/resized');};s.prototype.$SidebarAppTickerResizer32=function(t){'use strict';new (c('AsyncRequest'))('/ajax/feed/apps/resize').setData({height:''+t}).setMethod('POST').send();};s.prototype.$SidebarAppTickerResizer35=function(t){'use strict';var u=this.$SidebarAppTickerResizer27,v=this.$SidebarAppTickerResizer17*t/100;new (c('Animation'))(this.$SidebarAppTickerResizer1).from('height',u).to('height',v).duration(r).ondone(function(){this.$SidebarAppTickerResizer1.style.height=t+'%';this.$SidebarAppTickerResizer19(t===0?'0.0':t);c('ChatSidebarVisibility').shouldShowSidebar(null,function(w,x){c('ChatSidebarActions').show(w?c('SidebarType').SIDEBAR:c('SidebarType').BUDDYLIST);});}.bind(this)).go();};s.prototype.$SidebarAppTickerResizer10=function(){'use strict';this.$SidebarAppTickerResizer14();this.$SidebarAppTickerResizer35(0);};s.prototype.$SidebarAppTickerResizer11=function(){'use strict';this.$SidebarAppTickerResizer1.style.height='40px';c('TickerController').show(this.$SidebarAppTickerResizer1,function(){this.$SidebarAppTickerResizer14();var t=(this.$SidebarAppTickerResizer17-this.$SidebarAppTickerResizer20-q-this.$SidebarAppTickerResizer16)*50/this.$SidebarAppTickerResizer17;this.$SidebarAppTickerResizer35(t);}.bind(this));};f.exports=s;}),null);
__d("XQuickPromotionSimpleLoggingController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/qp\/action\/log\/",{qp_id:{type:"Int",required:true},qp_action:{type:"Enum",enumType:1},qp_instance_log_data:{type:"StringToStringMap",defaultValue:{}},qp_event:{type:"String"}});}),null);
__d('QPRenderer',['$','CSS','XQuickPromotionSimpleLoggingController','AsyncSignal'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=function m(n,event,o){var p=c('XQuickPromotionSimpleLoggingController').getURIBuilder().setInt('qp_id',n).setString('qp_event',event).setStringToStringMap('qp_instance_log_data',o).getURI();new (c('AsyncSignal'))(p,{}).send();},i=function m(n,o,p){var q=c('XQuickPromotionSimpleLoggingController').getURIBuilder().setInt('qp_id',n).setEnum('qp_action',o).setStringToStringMap('qp_instance_log_data',p).getURI();new (c('AsyncSignal'))(q,{}).send();},j=function m(n,o,p,q,r,s){l(n,p,c('$')(q),s,function(){if(r)c('CSS').hide(o);});},k=function m(n,o,p){o.show();h(n,'view',{});o.subscribe('cancel',function(){h(n,'dialog_cancel',{});});for(var q=0;q<p.length;q++){var r=p[q],s=c('$')(r.element_id);l(n,r.action,s,r.instance_log_data,function(){if(r.should_close)o.hide();});if(r.action=='primary')s.focus();}},l=function m(n,o,p,q,r){p.addEventListener('click',function(){var s=c('XQuickPromotionSimpleLoggingController').getURIBuilder().setInt('qp_id',n).setEnum('qp_action',o).setStringToStringMap('qp_instance_log_data',q).getURI();new (c('AsyncSignal'))(s,{}).send();r();});};g.setAction=j;g.setDialogActionsAndShow=k;g.logAction=i;g.logEvent=h;}),null);
__d('JewelQPLogging',['QPRenderer'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=false,i=null,j=false;function k(){if(j)return;if(h&&i){j=true;c('QPRenderer').logEvent(i.promotion_id,'view',i.instance_log_data?i.instance_log_data:{});}}var l={onJewelOpened:function m(){h=true;k();},updateQPLogData:function m(n){i=n;k();}};f.exports=l;}),null);
__d('RequestsJewelController',['invariant','Promise','Arbiter','AsyncRequest','AsyncSignal','CSS','DOM','DOMQuery','Event','JewelConstants','JewelQPLogging','MarauderLogger','Parent','RequestsJewelStore','ScrollableArea','ge','getElementPosition','getViewportDimensions','requireWeak','throttle'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=null;c('requireWeak')('FriendBrowserCheckboxController',function(o){return i=o;});var j=31,k=499,l=30,m=160;n.getInstance=function(){'use strict';return this.$RequestsJewelController11;};n.updateFromDOM=function(){'use strict';var o=this.getInstance();if(o)o.fromDom();};n.setupScroll=function(){'use strict';var o=this.getInstance();if(o)o.setupScroll();};n.setInitialHeight=function(){'use strict';var o=this.getInstance();if(o)o.updateHeight();};n.maybeLoadJewel=function(){'use strict';var o=this.getInstance();if(o)o.maybeLoadJewel();};n.create=function(o,p,q){'use strict';!!this.$RequestsJewelController11?h(0):void 0;return this.$RequestsJewelController11=new n(o,p,q);};function n(o,p,q){'use strict';this.$RequestsJewelController3=p;this.$RequestsJewelController2=q;this.$RequestsJewelController1=o;this.$RequestsJewelController5=-1;this.$RequestsJewelController6=-1;this.$RequestsJewelController10=c('Promise').resolve(true);this.$RequestsJewelController8=c('throttle').acrossTransitionsWithBlocking(function(){return this.$RequestsJewelController12({log_impressions:true});}.bind(this),5000);c('RequestsJewelStore').subscribe('addRequest',this.$RequestsJewelController13.bind(this));c('RequestsJewelStore').subscribe('addNotification',function(){return this.$RequestsJewelController14();}.bind(this));c('RequestsJewelStore').subscribe('removeOldRequest',this.$RequestsJewelController15.bind(this));c('RequestsJewelStore').setupListeners();this.setupScroll();this.$RequestsJewelController16();this.$RequestsJewelController17();this.$RequestsJewelController18();}n.prototype.fromDom=function(){'use strict';var o={};c('DOMQuery').scry(this.$RequestsJewelController1,'li.objectListItem').forEach(function(p){var q=p.getAttribute('id');if(q){var r=this.$RequestsJewelController19(q);if(r&&r.requester)o[r.requester]=r;}}.bind(this));c('RequestsJewelStore').addFriendRequests(o);this.$RequestsJewelController20();};n.prototype.maybeLoadJewel=function(){'use strict';if(this.$RequestsJewelController9){this.$RequestsJewelController9=false;this.openHandler();}};n.prototype.updateHeight=function(){'use strict';var o=this.$RequestsJewelController21();if(o)o.style.height=this.$RequestsJewelController22()+'px';};n.prototype.markSeen=function(){'use strict';this.$RequestsJewelController10.done(function(){var o=c('DOMQuery').scry(this.$RequestsJewelController1,'li[id]')[0];new (c('AsyncSignal'))('/ajax/gigaboxx/endpoint/UpdateLastSeenTime.php',{folder:this.$RequestsJewelController2,first_item:o.getAttribute('id')}).send();}.bind(this));};n.prototype.openHandler=function(){'use strict';c('Arbiter').inform('requestsJewel/opened');var o=c('ge')('fbRequestsJewelLoading'),p=this.$RequestsJewelController21();if(!o&&!p){this.$RequestsJewelController9=true;}else if(o){this.$RequestsJewelController8();}else{var q=c('RequestsJewelStore').getRequestListKeys();if(q.length>0)new (c('AsyncRequest'))().setAllowCrossPageTransition(true).setURI('/friends/requests/log_impressions').setData({ids:q.join(','),ref:'jewel'}).send();}p&&c('ScrollableArea').poke(p);c('JewelQPLogging').onJewelOpened();};n.prototype.closeHandler=function(){'use strict';c('Arbiter').inform('requestsJewel/closed');c('DOMQuery').scry(this.$RequestsJewelController1,'li.jewelItemNew').forEach(function(o){c('CSS').removeClass(o,'jewelItemNew');});};n.prototype.setupScroll=function(){'use strict';var o=this.$RequestsJewelController21();if(o){this.$RequestsJewelController7=this.$RequestsJewelController23();this.$RequestsJewelController4=0;c('ScrollableArea').getInstance(o).subscribe('scroll',this.$RequestsJewelController24.bind(this));this.$RequestsJewelController25();this.$RequestsJewelController26();}};n.prototype.$RequestsJewelController16=function(){'use strict';c('Event').listen(this.$RequestsJewelController1,'submit',function(o){var p=c('Parent').byClass(o.getTarget(),'objectListItem');if(p){c('CSS').removeClass(p,'jewelItemNew');c('CSS').addClass(p,'jewelItemResponded');}});};n.prototype.$RequestsJewelController17=function(){'use strict';c('Event').listen(window,'resize',c('throttle').acrossTransitions(function(){this.updateHeight();}.bind(this)));};n.prototype.$RequestsJewelController18=function(){'use strict';c('Arbiter').subscribe('pymk-x-out',function(o,p){var q=p.location;if(q==='pymk_jewel_first_page'||q==='pymk_jewel')this.$RequestsJewelController25();}.bind(this));};n.prototype.$RequestsJewelController27=function(o){'use strict';var p=parseInt(o,10);return !isNaN(p)?p:null;};n.prototype.$RequestsJewelController19=function(o){'use strict';var p=o.match(/^(\d+)_(\d+)/);if(!p)return null;return {requester:this.$RequestsJewelController27(p[1]),type:this.$RequestsJewelController27(p[2])};};n.prototype.$RequestsJewelController28=function(o,p){'use strict';if(o==null||p==null)return null;return o+'_'+p;};n.prototype.$RequestsJewelController21=function(){'use strict';return c('DOMQuery').scry(this.$RequestsJewelController1,'.uiScrollableArea')[0];};n.prototype.$RequestsJewelController23=function(){'use strict';return c('DOMQuery').scry(this.$RequestsJewelController1,'.uiScrollableAreaWrap')[0];};n.prototype.$RequestsJewelController24=function(){'use strict';var o=c('DOMQuery').scry(this.$RequestsJewelController7,'.uiMorePager').pop();if(o){var p=c('getElementPosition')(o).y;if(p>0)c('CSS').addClass(this.$RequestsJewelController21(),'contentAfter');var q=c('DOMQuery').find(o,'a');if(!q)return;var r=c('getElementPosition')(q).y;if(r===this.$RequestsJewelController4)return;var s=c('getElementPosition')(this.$RequestsJewelController7),t=s.y+s.height;if(r-300<t&&r>0){this.$RequestsJewelController4=r;var u=q.getAttribute('ajaxify');if(u){new (c('AsyncRequest'))(u).setRelativeTo(q).setStatusElement(c('Parent').byClass(q,'stat_elem')).send();}else if(i)i.getInstance('jewel').showMore();}}this.$RequestsJewelController25();this.$RequestsJewelController26();};n.prototype.$RequestsJewelController25=function(){'use strict';if(!this.$RequestsJewelController7)return;var o=c('getElementPosition')(this.$RequestsJewelController7),p=o.y+o.height,q=c('DOMQuery').scry(this.$RequestsJewelController1,'li.friendBrowserListUnit'),r=q.length-1;while(r>this.$RequestsJewelController5){var s=c('getElementPosition')(q[r]),t=s.y,u=t+s.height;if(t>0&&u<=p)break;r-=1;}var v=r;while(r>this.$RequestsJewelController5){var w=c('DOMQuery').find(q[r],'input.friendBrowserID'),x=parseInt(w.value,10);c('MarauderLogger').log('regular_pymk_imp',undefined,{pymk_id:x,pymk_location:'pymk_jewel'});r-=1;}this.$RequestsJewelController5=Math.max(this.$RequestsJewelController5,v);};n.prototype.$RequestsJewelController26=function(){'use strict';if(!this.$RequestsJewelController7)return;var o=c('getElementPosition')(this.$RequestsJewelController7),p=o.y+o.height,q=c('DOMQuery').scry(this.$RequestsJewelController1,'li.objectListItem'),r=q.length-1;while(r>this.$RequestsJewelController6){var s=c('getElementPosition')(q[r]),t=s.y,u=t+s.height;if(t>0&&u<=p)break;r-=1;}var v=r;while(r>this.$RequestsJewelController6){var w=q[r].getAttribute('id');w=w.substring(0,w.length-6);c('MarauderLogger').log('request_seen','friend_request_waterfall',{request_id:w,request_location:'requests_jewel'});r-=1;}this.$RequestsJewelController6=Math.max(this.$RequestsJewelController6,v);};n.prototype.$RequestsJewelController12=function(){var o=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];'use strict';this.$RequestsJewelController10=new (c('Promise'))(function(p,q){var r=!c('ge')('fbRequestsJewelLoading');new (c('AsyncRequest'))().setURI('/ajax/requests/loader/').setData(babelHelpers['extends']({},o,{reloadcontent:r})).setFinallyHandler(function(s){if(!s.getError()){p(true);}else q();}).send();});};n.prototype.$RequestsJewelController14=function(){'use strict';if(this.$RequestsJewelController3())return;this.$RequestsJewelController12();};n.prototype.$RequestsJewelController13=function(o,p){var q=p.shouldReplace,r=p.previousType;'use strict';if(!q&&(r||this.$RequestsJewelController3()))return;this.$RequestsJewelController12();};n.prototype.$RequestsJewelController15=function(o,p){var q=p.requester,r=p.type;'use strict';if(this.$RequestsJewelController3()||c('ge')('fbRequestsJewelLoading')!=null)return;var s=this.$RequestsJewelController28(q,r),t=s&&c('ge')(s);if(t){if(c('CSS').hasClass(t,'jewelItemNew'))c('RequestsJewelStore').decrementCount();if(!c('CSS').hasClass(t,'jewelItemResponded')){c('DOM').remove(t);c('RequestsJewelStore').removeRequest(q);this.$RequestsJewelController20();}}};n.prototype.$RequestsJewelController20=function(){'use strict';c('DOMQuery').scry(this.$RequestsJewelController1,'li.empty').forEach(function(o){c('CSS').conditionShow(o,c('RequestsJewelStore').getRequestCount()<=0);});};n.prototype.$RequestsJewelController22=function(){'use strict';return Math.min(Math.max(c('getViewportDimensions')().height-m,l),c('JewelConstants').FLYOUT_MAX_HEIGHT||k)+j;};n.$RequestsJewelController11=null;f.exports=n;}),null);
__d('ChatTimezoneWarning',['MercuryParticipants','MercuryViewer','MessengerBotIDs'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=1,i={updateUserTimezoneWarning:function j(k,l,m){c('MercuryParticipants').get(c('MercuryViewer').getID(),function(n){var o=n.employee,p=n.timezone,q=0;if(k.timezone_warning_dismiss_count!==undefined){var r=k.timezone_warning_dismiss_count;for(var s=Object.entries(r),t=Array.isArray(s),u=0,s=t?s:s[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var v;if(t){if(u>=s.length)break;v=s[u++];}else{u=s.next();if(u.done)break;v=u.value;}var w=v,x=w[0],y=w[1];if(x===n.fbid)q=Number(y);}}else return;if(o&&p&&q<h)c('MercuryParticipants').getMulti(k.participants,function(z){var aa={},ba=true;for(var ca in z){ba=ba&&z[ca].employee;var da=!!c('MessengerBotIDs')[z[ca].fbid];if(z[ca].timezone!==undefined&&z[ca].timezone!==null&&p!==z[ca].timezone&&!da){var ea=z[ca].fbid;aa[ea]=z[ca];}}if(Object.keys(aa).length>0&&ba){aa.self=n;l(aa);}else m();});});}};f.exports=i;}),null);
__d('ChatUserPersonalUserWarning',['MercuryIDs','MercuryParticipants','MercuryViewer','MercuryEmployeeDualityPreferences','WorkDualityDismissWarning'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=1,i={updateEmployeePersonalUserWarning:function j(k,l,m){c('MercuryParticipants').get(c('MercuryViewer').getID(),function(n){var o=n.employee,p=null;if(n.personal_id)p='fbid:'+n.personal_id;var q=p===n.id,r=0;if(k.work_user_warning_dismiss_count!==undefined){var s=k.work_user_warning_dismiss_count;for(var t=Object.entries(s),u=Array.isArray(t),v=0,t=u?t:t[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var w;if(u){if(v>=t.length)break;w=t[v++];}else{v=t.next();if(v.done)break;w=v.value;}var x=w,y=x[0],z=x[1];if(y===n.fbid)r=Number(z);}}else return;var aa=c('MercuryIDs').getUserIDFromThreadID(k.thread_id);if(!o||!q||!aa||k.participants.length>2||!c('MercuryEmployeeDualityPreferences').duality_warning_gk_check||r>=h){m();return;}c('MercuryParticipants').getMulti(k.participants,function(ba){var ca=false,da=null;for(var ea in ba)if(ba[ea].personal_id&&aa===ba[ea].personal_id&&ba[ea].work_id&&ba[ea].employee&&!c('WorkDualityDismissWarning').isWarningAcknowledged(k.thread_id)){ca=true;da=ea;}if(ca&&da!==null){l(n,ba[da]);}else m();});});}};f.exports=i;}),null);
__d('ChatUserWorkUserWarning',['MercuryIDs','MercuryParticipants','MercuryViewer','MercuryEmployeeDualityPreferences','WorkDualityDismissWarning'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=1,i={updateEmployeeWorkUserWarning:function j(k,l,m){c('MercuryParticipants').get(c('MercuryViewer').getID(),function(n){var o=n.employee,p=null;if(n.personal_id)p='fbid:'+n.personal_id;var q=p===n.id,r=0;if(k.work_user_warning_dismiss_count!==undefined){var s=k.work_user_warning_dismiss_count;for(var t=Object.entries(s),u=Array.isArray(t),v=0,t=u?t:t[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var w;if(u){if(v>=t.length)break;w=t[v++];}else{v=t.next();if(v.done)break;w=v.value;}var x=w,y=x[0],z=x[1];if(y===n.fbid)r=Number(z);}}else return;var aa=c('MercuryIDs').getUserIDFromThreadID(k.thread_id);if(!o||!q||!aa||k.participants.length>2||!c('MercuryEmployeeDualityPreferences').duality_warning_gk_check||r>=h){m();return;}c('MercuryParticipants').getMulti(k.participants,function(ba){var ca=false,da=null;for(var ea in ba)if(ba[ea].work_id&&aa===ba[ea].work_id.toString()&&ba[ea].personal_id&&c('WorkDualityDismissWarning').isThreadHijacked(k.thread_id)&&ba[ea].employee&&!ba[ea].is_friend){ca=true;da=ea;}if(ca&&da!==null){l(n,ba[da]);}else m();});});}};f.exports=i;}),null);
__d('ChatTabTypeaheadDataSource',['MercuryConfig','MercuryTypeaheadConstants','MercuryTypeaheadDataSource'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('MercuryTypeaheadDataSource'));i=h&&h.prototype;function j(k){'use strict';k=k||{};k.maxResults=c('MercuryTypeaheadConstants').COMPOSER_CHATTAB_MAX;i.constructor.call(this,k);this.$ChatTabTypeaheadDataSource1=true;}j.prototype.buildData=function(k){'use strict';var l=[],m=[],n=[],o=[],p=[],q=[];k.forEach(function(s){var t=i.getEntry.call(this,s);switch(t.render_type){case c('MercuryTypeaheadConstants').FRIEND_TYPE:l.push(s);break;case c('MercuryTypeaheadConstants').THREAD_TYPE:if(this.$ChatTabTypeaheadDataSource1)m.push(s);break;case c('MercuryTypeaheadConstants').NON_FRIEND_TYPE:n.push(s);break;case c('MercuryTypeaheadConstants').FB4C_TYPE:o.push(s);break;case c('MercuryTypeaheadConstants').PAGE_TYPE:if(this.$ChatTabTypeaheadDataSource1)if(c('MercuryConfig').LinkedAgents&&c('MercuryConfig').LinkedAgents.indexOf(s.toString())>-1){q.push(s);}else p.push(s);break;default:break;}}.bind(this),this);var r=q.concat(l,o,m,p,n);return i.buildData.call(this,r);};j.prototype.query=function(k,l,m,n){'use strict';return i.query.call(this,k,l,m,n);};j.prototype.respond=function(k,l,m){'use strict';return i.respond.call(this,k,l,m);};j.prototype.setShowThreads=function(k){'use strict';this.$ChatTabTypeaheadDataSource1=k;};f.exports=j;}),null);
__d('MNCommerceDialogContainer.react',['MNCommerceDialogStateStore','PureStoreBasedStateMixin','React'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').createClass({displayName:'MNCommerceDialogContainer',mixins:[c('PureStoreBasedStateMixin')(c('MNCommerceDialogStateStore'))],statics:{calculateState:function i(){var j=c('MNCommerceDialogStateStore').getDialogContainer();return {dialogContainer:j};}},render:function i(){var j=this.state.dialogContainer;if(!j)return null;return c('React').createElement(j,null);}});f.exports=h;}),null);
__d('MNCommerceDialogContainerMount',['MNCommerceDialogContainer.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={mount:function i(j){c('ReactDOM').render(c('React').createElement(c('MNCommerceDialogContainer.react'),null),j);}};f.exports=h;}),null);
__d('FBRTCConstants',['FBRTCStruct','keyMirror'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={OFFER:'offer',ANSWER:'answer',ICE_CANDIDATE:'ice_candidate',OK:'ok',PING:'ping',PING_ACK:'ping_ack',HANGUP:'hang_up',OTHER_DISMISS:'other_dismiss',MSG_ACK:'msg_ack',PRANSWER:'pranswer',ICERESTART_OFFER:'icerestart_offer',ICERESTART_ANSWER:'icerestart_answer',PCRESTART_OFFER:'pcrestart_offer',PCRESTART_ANSWER:'pcrestart_answer',SDP_UPDATE:'sdp_update',OFFER_ACK:'offer_ack',OFFER_NACK:'offer_nack',ANSWER_ACK:'answer_ack',SET_VIDEO:'set_video',VIDEO_REQUEST:'video_request',ACK:'ack'},i={AUDIO_ONLY:'audio_only',AUDIO_VIDEO:'audio_video',SCREEN_CONTENT:'screen'},j=c('keyMirror')({NO_VIDEO:null,LQ_VIDEO:null,SD_VIDEO:null,HD_VIDEO:null,CUSTOM_VIDEO:null}),k=new (c('FBRTCStruct'))([{IGNORE_CALL:'IgnoreCall'},{HANGUP_CALL:'HangupCall'},{IN_ANOTHER_CALL:'InAnotherCall'},{ACCEPT_AFTER_HANGUP:'CallEndAcceptAfterHangUp'},{NO_ANSWER_TIMEOUT:'NoAnswerTimeout'},{INCOMING_TIMEOUT:'IncomingTimeout'},{OTHER_INSTANCE_HANDLED:'OtherInstanceHandled'},{SIGNALING_MESSAGE_FAILED:'SignalingMessageFailed'},{CONNECTION_DROPPED:'ConnectionDropped'},{CLIENT_INTERRUPTED:'ClientInterrupted'},{WEBRTC_ERROR:'WebRTCError'},{CLIENT_ERROR:'ClientError'},{NO_PERMISSION:'NoPermission'},{OTHER_NOT_CAPABLE:'OtherNotCapable'},{NO_UI_ERROR:'NoUIShown'},{UNSUPPORTED_VERSION:'VersionUnsupported'},{CALLER_NOT_VISIBLE:'CallerNotVisible'},{CARRIER_BLOCKED:'CarrierBlocked'},{OTHER_CARRIER_BLOCKED:'OtherCarrierBlocked'}]),l={REMOTE_PEER_HANGUP:'CollabRemotePeerHangup',REMOTE_PEER_REJECT:'CollabRemotePeerReject',CLOSED_BY_MCU:'CollabClosedByMcu',CLOSED_AS_STALE:'CollabClosedAsStale',CALL_INITIALIZATION_FAILED:'CollabCallInitializationFailed',SIP_CONNECTION_INITIALIZATION_FAILED:'CollabSipConnectionInitializationFailed',LOST_MCU_CONNECTION:'CollabLostMcuConnection',MCU_NO_AUDIO_STREAM:'CollabMcuNoAudioStream',MCU_INVALID_STREAM_CONFIGURATION:'CollabMcuInvalidStreamConfiguration',UNKNOWN:'CollabUnknown'},m={TOGGLE_SELF_VIEW:5,SUBMIT_STAR_RATING:6,SUBMIT_FEEDBACK:7,START_CALL:9,OPEN_SCREEN_IN_NEW:10},n={ONE_HOUR:'1hour',UNTIL_EIGHT_AM:'8am',ALWAYS:'always'},o=c('keyMirror')({VIDEO:null,AUDIO:null,SCREEN_SHARE:null}),p={MULTIWAY:'multiway',P2P:'p2p'},q={PayloadType:h,StreamType:i,VideoQuality:j,CallEndReason:k,CollabCallEndSubreason:l,UIEventType:m,CallBlockingConstants:n,IncomingCallDialogTypes:o,SignalingProtocol:p,endCallReasonFromString:function r(s){return k.strNames.indexOf(s);},callEndReasonString:function r(s){if(s<0||s>k.strNames.length)return 'Unknown';return k.strNames[s];},fullCallEndReasonString:function r(s,t){return this.callEndReasonString(s)+'_'+(t?'remote':'local');}};f.exports=q;}),null);
__d('FBRTCIceStatsParser',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=null;i.getInstance=function(){'use strict';if(!h)h=new i();return h;};function i(){'use strict';}i.prototype.extractIceInfo=function(j){'use strict';var k=[],l=j.split("\r\n");for(var m=0;m<l.length;m++){var n=l[m];if(this.$FBRTCIceStatsParser1(n))k.push({gen:this.$FBRTCIceStatsParser2(n),type:this.$FBRTCIceStatsParser3(n)});}return k;};i.prototype.$FBRTCIceStatsParser1=function(j){'use strict';return j.indexOf('candidate:')>-1;};i.prototype.$FBRTCIceStatsParser2=function(j){'use strict';var k=0,l=j.match(/generation (\d+)/);if(l)k=parseInt(l[1],10);return k;};i.prototype.$FBRTCIceStatsParser3=function(j){'use strict';var k=j.match(/typ (host|relay|srflx|prflx)/);if(k){return k[1];}else return 'unknown';};f.exports=i;}),null);
__d('FBRTCCallSummary',['FBRTCConstants','FBRTCIceStatsParser','FBRTCLogger','UserAgentData','performanceNow'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=5*60*1000,i={CALL_STARTED:'started',POPUP_OPENED:'opened',SENT_OFFER:'s_o',RECV_OFFER:'r_o',SENT_OFFER_ACK:'s_oack',RECV_OFFER_ACK:'r_oack',SENT_RETRIED_OFFER:'s_o2',RECV_RETRIED_OFFER:'r_o2',SENT_RETRIED_OFFER_ACK:'s_oack2',RECV_RETRIED_OFFER_ACK:'r_oack2',SENT_PRANSWER:'s_pr',RECV_PRANSWER:'r_pr',NETWORK_READY:'network_ready',SENT_ANSWER:'s_a',RECV_ANSWER:'r_a',SENT_ANSWER_ACK:'s_aack',RECV_ANSWER_ACK:'r_aack',SENT_RETRIED_ANSWER:'s_a2',RECV_RETRIED_ANSWER:'r_a2',SENT_RETRIED_ANSWER_ACK:'s_aack2',RECV_RETRIED_ANSWER_ACK:'r_aack2',SENT_OK:'s_ok',RECV_OK:'r_ok',CALL_CONNECTED:'connected',CALL_ENDED:'ended'};j.CURRENT_SUMMARY_VERSION=19;function j(k){'use strict';this.peerID=k.peerID;this.callID=k.callID;this.$FBRTCCallSummary1=k.isCaller;this.$FBRTCCallSummary2=new Date().valueOf();this.$FBRTCCallSummary3=null;this.$FBRTCCallSummary4={};this.$FBRTCCallSummary5=null;this.$FBRTCCallSummary6=null;this.$FBRTCCallSummary7=null;this.$FBRTCCallSummary8=null;this.$FBRTCCallSummary9=null;this.$FBRTCCallSummary10=null;this.$FBRTCCallSummary11={};this.$FBRTCCallSummary12={};this.$FBRTCCallSummary13={};this.$FBRTCCallSummary14={};this.$FBRTCCallSummary15={};this.$FBRTCCallSummary16={};this.$FBRTCCallSummary17=c('performanceNow')();this.$FBRTCCallSummary18=0;this.$FBRTCCallSummary19={};this.$FBRTCCallSummary20=this.$FBRTCCallSummary17;this.$FBRTCCallSummary21=0;this.$FBRTCCallSummary22={};this.addExtraInfo(c('FBRTCLogger').Key.DEVICE_INFO,this.$FBRTCCallSummary23());this.$FBRTCCallSummary24();this.$FBRTCCallSummary25=c('FBRTCIceStatsParser').getInstance();this.$FBRTCCallSummary26=c('FBRTCLogger').getInstance();}j.prototype.toJsonString=function(){'use strict';this.$FBRTCCallSummary9=new Date().valueOf();return JSON.stringify({version:j.CURRENT_SUMMARY_VERSION,peerID:this.peerID,callID:this.callID,isCaller:this.$FBRTCCallSummary1,callType:this.$FBRTCCallSummary27,conferenceName:this.$FBRTCCallSummary28,serverInfoData:this.$FBRTCCallSummary29,localVideoDuration:this.$FBRTCCallSummary30,remoteVideoDuration:this.$FBRTCCallSummary31,startTime:this.$FBRTCCallSummary2,trigger:this.$FBRTCCallSummary3,signalingTime:this.$FBRTCCallSummary4,endCallReason:this.$FBRTCCallSummary5,endCallSubreason:this.$FBRTCCallSummary6,isRemoteEnded:this.$FBRTCCallSummary7,lastUpdatedTime:this.$FBRTCCallSummary8,lastSerializedTime:this.$FBRTCCallSummary9,unsetOnRetrieve:this.$FBRTCCallSummary10,openCount:this.$FBRTCCallSummary21,extraInfo:this.$FBRTCCallSummary22,pcStats:this.$FBRTCCallSummary11,captureStats:this.$FBRTCCallSummary12,gen0IceSentCount:this.$FBRTCCallSummary13,gen0IceReceivedCount:this.$FBRTCCallSummary14,iceSentCount:this.$FBRTCCallSummary15,iceReceivedCount:this.$FBRTCCallSummary16,newSignalingTime:this.$FBRTCCallSummary19,accumulatedCallTime:this.$FBRTCCallSummary32()});};j.fromJsonString=function(k){'use strict';var l;try{l=JSON.parse(k);}catch(m){return null;}if(l.version!==j.CURRENT_SUMMARY_VERSION)return null;if(!l.hasOwnProperty('peerID')||!l.hasOwnProperty('callID')||!l.hasOwnProperty('isCaller')||!l.hasOwnProperty('startTime')||!l.hasOwnProperty('trigger')||!l.hasOwnProperty('signalingTime')||!l.hasOwnProperty('endCallReason')||!l.hasOwnProperty('isRemoteEnded')||!l.hasOwnProperty('lastUpdatedTime')||!l.hasOwnProperty('lastSerializedTime'))return null;var n=new j({peerID:l.peerID,callID:l.callID,isCaller:l.isCaller});n.$FBRTCCallSummary2=l.startTime;n.$FBRTCCallSummary3=l.trigger;n.$FBRTCCallSummary4=l.signalingTime;n.$FBRTCCallSummary5=l.endCallReason;n.$FBRTCCallSummary6=l.endCallSubreason;n.$FBRTCCallSummary7=l.isRemoteEnded;n.$FBRTCCallSummary8=l.lastUpdatedTime;n.$FBRTCCallSummary9=l.lastSerializedTime;if(l.callType)n.$FBRTCCallSummary27=l.callType;if(l.conferenceName)n.$FBRTCCallSummary28=l.conferenceName;if(l.serverInfoData)n.$FBRTCCallSummary29=l.serverInfoData;if(l.localVideoDuration)n.$FBRTCCallSummary30=l.localVideoDuration;if(l.remoteVideoDuration)n.$FBRTCCallSummary31=l.remoteVideoDuration;if(l.unsetOnRetrieve)n.$FBRTCCallSummary10=l.unsetOnRetrieve;if(l.openCount)n.$FBRTCCallSummary21=l.openCount;if(l.extraInfo)n.$FBRTCCallSummary22=l.extraInfo;if(l.pcStats)n.$FBRTCCallSummary11=l.pcStats;if(l.captureStats)n.$FBRTCCallSummary12=l.captureStats;if(l.gen0IceSentCount)n.$FBRTCCallSummary13=l.gen0IceSentCount;if(l.gen0IceReceivedCount)n.$FBRTCCallSummary14=l.gen0IceReceivedCount;if(l.iceSentCount)n.$FBRTCCallSummary15=l.iceSentCount;if(l.iceReceivedCount)n.$FBRTCCallSummary16=l.iceReceivedCount;if(l.newSignalingTime)n.$FBRTCCallSummary19=l.newSignalingTime;if(l.accumulatedCallTime)n.$FBRTCCallSummary18=l.accumulatedCallTime;return n;};j.restoreOrInitialize=function(k,l,m,n,o){'use strict';var p=k.retrieveCallSummary(l,m);if(!p){p=new j({peerID:l,callID:m,isCaller:n});if(o){p.onFullMessageReceived({msg:o});p.onOfferAckSent(o);}else p.onCallStarted(c('FBRTCLogger').Trigger.UNKNOWN);c('FBRTCLogger').getInstance().logError(l,m,'Missing call summary from storage');}else if(p.$FBRTCCallSummary10){p.$FBRTCCallSummary5=null;p.$FBRTCCallSummary6=null;p.$FBRTCCallSummary7=null;delete p.$FBRTCCallSummary4[i.CALL_ENDED];delete p.$FBRTCCallSummary19[i.CALL_ENDED];p.$FBRTCCallSummary10=null;}return p;};j.logSavedSummaries=function(k){'use strict';var l=k.getLoggableSummaries(),m=l.length;if(m<=0)return;var n=c('FBRTCLogger').getInstance(),o=[];for(var p=0;p<m;p++){var q=l[p];n.logEndCallSummary(q);o.push({peerID:q.peerID,callID:q.callID});}k.removeCallSummaries(o);n.logToConsole('Logged pending summaries: '+m);};j.prototype.save=function(k){'use strict';var l=c('performanceNow')(),m=l-this.$FBRTCCallSummary20;if(m>h){this.$FBRTCCallSummary26.logInfo(this.peerID,this.callID,'Summary too old: '+m);return;}k.storeCallSummary(this.peerID,this.callID,this);this.$FBRTCCallSummary20=l;};j.prototype.getLastUpdatedTime=function(){'use strict';return this.$FBRTCCallSummary8;};j.prototype.setLastUpdatedTime=function(k){'use strict';this.$FBRTCCallSummary8=k;};j.prototype.getExtraInfo=function(){'use strict';return this.$FBRTCCallSummary22;};j.prototype.addExtraInfo=function(k,l){'use strict';this.$FBRTCCallSummary22[k]=l;this.$FBRTCCallSummary24();};j.prototype.onCallStarted=function(k){'use strict';this.$FBRTCCallSummary3=k;this.$FBRTCCallSummary33(i.CALL_STARTED);this.$FBRTCCallSummary24();};j.prototype.onPopupOpened=function(){'use strict';this.$FBRTCCallSummary33(i.POPUP_OPENED);this.$FBRTCCallSummary21++;this.$FBRTCCallSummary24();};j.prototype.setPcStats=function(k){'use strict';this.$FBRTCCallSummary11=k;this.$FBRTCCallSummary24();};j.prototype.setVideoCaptureStats=function(k,l){'use strict';this.$FBRTCCallSummary12={w:k,h:l};this.$FBRTCCallSummary24();};j.prototype.setCallType=function(k){'use strict';this.$FBRTCCallSummary27=k;this.$FBRTCCallSummary24();};j.prototype.setVideoDurations=function(k,l){'use strict';this.$FBRTCCallSummary30=k;this.$FBRTCCallSummary31=l;this.$FBRTCCallSummary24();};j.prototype.setConferenceName=function(k){'use strict';this.$FBRTCCallSummary28=k;this.$FBRTCCallSummary24();};j.prototype.setServerInfoData=function(k){'use strict';this.$FBRTCCallSummary29=k;this.$FBRTCCallSummary24();};j.prototype.onOfferAckSent=function(k){'use strict';this.onMessageSent({type:c('FBRTCConstants').PayloadType.OFFER_ACK,flag:k.flag});};j.prototype.onMessageSent=function(k){'use strict';var l=k.flag===1;switch(k.type){case c('FBRTCConstants').PayloadType.OFFER:this.$FBRTCCallSummary34(l,i.SENT_OFFER,i.SENT_RETRIED_OFFER);this.$FBRTCCallSummary35(k,this.$FBRTCCallSummary13,this.$FBRTCCallSummary15);break;case c('FBRTCConstants').PayloadType.ANSWER:this.$FBRTCCallSummary34(l,i.SENT_ANSWER,i.SENT_RETRIED_ANSWER);this.$FBRTCCallSummary35(k,this.$FBRTCCallSummary13,this.$FBRTCCallSummary15);break;case c('FBRTCConstants').PayloadType.OK:this.$FBRTCCallSummary33(i.SENT_OK);break;case c('FBRTCConstants').PayloadType.PRANSWER:this.$FBRTCCallSummary33(i.SENT_PRANSWER);break;case c('FBRTCConstants').PayloadType.OFFER_ACK:this.$FBRTCCallSummary34(l,i.SENT_OFFER_ACK,i.SENT_RETRIED_OFFER_ACK);break;case c('FBRTCConstants').PayloadType.ANSWER_ACK:this.$FBRTCCallSummary34(l,i.SENT_ANSWER_ACK,i.SENT_RETRIED_ANSWER_ACK);break;case c('FBRTCConstants').PayloadType.ICE_CANDIDATE:this.$FBRTCCallSummary35(k,this.$FBRTCCallSummary13,this.$FBRTCCallSummary15);break;default:}this.$FBRTCCallSummary24();};j.prototype.$FBRTCCallSummary35=function(k,l,m){'use strict';var n=null,o=null,p=this.$FBRTCCallSummary25.extractIceInfo(k.sdp);for(var q=0;q<p.length;q++){n=p[q].gen;o=p[q].type;if(n===0)this.$FBRTCCallSummary36(l,o);this.$FBRTCCallSummary36(m,o);}};j.prototype.$FBRTCCallSummary36=function(k,l){'use strict';if(!k[l]){k[l]=1;}else k[l]=k[l]+1;};j.prototype.$FBRTCCallSummary37=function(k){'use strict';if(k.isFromMobile())this.addExtraInfo(c('FBRTCLogger').Key.PEER_IS_MOBILE,'1');};j.prototype.onFullMessageReceived=function(k){'use strict';var l=k.msg,m=l.flag===1;switch(l.type){case c('FBRTCConstants').PayloadType.OFFER:this.$FBRTCCallSummary37(k);this.$FBRTCCallSummary34(m,i.RECV_OFFER,i.RECV_RETRIED_OFFER);this.$FBRTCCallSummary35(l,this.$FBRTCCallSummary14,this.$FBRTCCallSummary16);break;case c('FBRTCConstants').PayloadType.ANSWER:this.$FBRTCCallSummary37(k);this.$FBRTCCallSummary34(m,i.RECV_ANSWER,i.RECV_RETRIED_ANSWER);this.$FBRTCCallSummary35(l,this.$FBRTCCallSummary14,this.$FBRTCCallSummary16);break;case c('FBRTCConstants').PayloadType.OK:this.$FBRTCCallSummary33(i.RECV_OK);break;case c('FBRTCConstants').PayloadType.PRANSWER:this.$FBRTCCallSummary33(i.RECV_PRANSWER);break;case c('FBRTCConstants').PayloadType.OFFER_ACK:this.$FBRTCCallSummary34(m,i.RECV_OFFER_ACK,i.RECV_RETRIED_OFFER_ACK);break;case c('FBRTCConstants').PayloadType.ANSWER_ACK:this.$FBRTCCallSummary34(m,i.RECV_ANSWER_ACK,i.RECV_RETRIED_ANSWER_ACK);break;case c('FBRTCConstants').PayloadType.ICE_CANDIDATE:this.$FBRTCCallSummary35(l,this.$FBRTCCallSummary14,this.$FBRTCCallSummary16);break;default:}this.$FBRTCCallSummary24();};j.prototype.onMsgAckReceived=function(k,l){'use strict';var m=k.msg.flag===1;if(l){this.$FBRTCCallSummary34(m,i.RECV_OFFER_ACK,i.RECV_RETRIED_OFFER_ACK);}else this.$FBRTCCallSummary34(m,i.RECV_ANSWER_ACK,i.RECV_RETRIED_ANSWER_ACK);};j.prototype.onCallConnected=function(){'use strict';this.$FBRTCCallSummary33(i.NETWORK_READY);this.$FBRTCCallSummary33(i.CALL_CONNECTED);this.$FBRTCCallSummary24();};j.prototype.onCallEnded=function(k,l,m,n){'use strict';this.$FBRTCCallSummary10=m;this.$FBRTCCallSummary5=k;this.$FBRTCCallSummary6=n;this.$FBRTCCallSummary7=l;this.$FBRTCCallSummary33(i.CALL_ENDED);this.$FBRTCCallSummary24();};j.prototype.toString=function(){'use strict';var k={};k.core_metrics=this.$FBRTCCallSummary38();k.time_series=null;return JSON.stringify(k);};j.prototype.$FBRTCCallSummary38=function(){'use strict';var k={};k.ver=j.CURRENT_SUMMARY_VERSION;k.caller=this.$FBRTCCallSummary1;k.call_type=this.$FBRTCCallSummary27;k.conf_name=this.$FBRTCCallSummary28;k.serv_info=this.$FBRTCCallSummary29;k.conn=this.$FBRTCCallSummary39();k.peer_id=this.peerID;k.has_video=true;k.open_count=this.$FBRTCCallSummary21;k.signaling=this.$FBRTCCallSummary40();k.sender=this.$FBRTCCallSummary41();k.receiver=this.$FBRTCCallSummary42();k.end=this.$FBRTCCallSummary43();k.video=this.$FBRTCCallSummary44();return k;};j.prototype.$FBRTCCallSummary39=function(){'use strict';var k={dtls:1};if(this.$FBRTCCallSummary11.sender&&this.$FBRTCCallSummary11.sender.rtt)k.rtt=this.$FBRTCCallSummary11.sender.rtt;return k;};j.prototype.$FBRTCCallSummary40=function(){'use strict';var k={};if(this.$FBRTCCallSummary3)k.trigger=this.$FBRTCCallSummary3;k.start_time=this.$FBRTCCallSummary2;k.time_from_start=this.$FBRTCCallSummary4;var l=this.$FBRTCCallSummary4[i.CALL_CONNECTED],m=this.$FBRTCCallSummary4[i.CALL_ENDED];if(l){if(!m)if(this.$FBRTCCallSummary9){m=this.$FBRTCCallSummary9-this.$FBRTCCallSummary2;}else m=this.$FBRTCCallSummary45();var n=m-l;if(n>0)k.duration=n;}k.new_time_from_start=this.$FBRTCCallSummary19;l=this.$FBRTCCallSummary19[i.CALL_CONNECTED];m=this.$FBRTCCallSummary19[i.CALL_ENDED];if(l){if(!m)if(this.$FBRTCCallSummary18>0){m=this.$FBRTCCallSummary18;}else m=this.$FBRTCCallSummary32();n=m-l;if(n>0)k.new_duration=n;}return k;};j.prototype.$FBRTCCallSummary41=function(){'use strict';var k={};if(this.$FBRTCCallSummary13)k.ice_g0=this.$FBRTCCallSummary13;if(this.$FBRTCCallSummary15)k.ice=this.$FBRTCCallSummary15;if(this.$FBRTCCallSummary11.sender)Object.assign(k,this.$FBRTCCallSummary11.sender);return k;};j.prototype.$FBRTCCallSummary42=function(){'use strict';var k={};if(this.$FBRTCCallSummary14)k.ice_g0=this.$FBRTCCallSummary14;if(this.$FBRTCCallSummary16)k.ice=this.$FBRTCCallSummary16;return k;};j.prototype.$FBRTCCallSummary43=function(){'use strict';var k={};if(this.$FBRTCCallSummary5!==null){k.end_call_reason_string=c('FBRTCConstants').callEndReasonString(this.$FBRTCCallSummary5);if(this.$FBRTCCallSummary6!==null)k.end_call_subreason_string=this.$FBRTCCallSummary6;k.remote_ended=this.$FBRTCCallSummary7;}if(this.$FBRTCCallSummary11.end)Object.assign(k,this.$FBRTCCallSummary11.end);return k;};j.prototype.$FBRTCCallSummary44=function(){'use strict';var k={capture:{}};if(this.$FBRTCCallSummary11.video&&this.$FBRTCCallSummary11.video.sender)Object.assign(k,this.$FBRTCCallSummary11.video.sender);if(this.$FBRTCCallSummary12)Object.assign(k.capture,this.$FBRTCCallSummary12);return {sender:k,ld:this.$FBRTCCallSummary30,rd:this.$FBRTCCallSummary31};};j.prototype.$FBRTCCallSummary45=function(){'use strict';return new Date().valueOf()-this.$FBRTCCallSummary2;};j.prototype.$FBRTCCallSummary32=function(){'use strict';var k=c('performanceNow')()-this.$FBRTCCallSummary17;return Math.floor(this.$FBRTCCallSummary18+k);};j.prototype.$FBRTCCallSummary33=function(k){'use strict';if(this.$FBRTCCallSummary4[k])return;this.$FBRTCCallSummary4[k]=this.$FBRTCCallSummary45();this.$FBRTCCallSummary19[k]=this.$FBRTCCallSummary32();};j.prototype.$FBRTCCallSummary34=function(k,l,m){'use strict';if(k){this.$FBRTCCallSummary33(m);}else this.$FBRTCCallSummary33(l);};j.prototype.$FBRTCCallSummary24=function(){'use strict';this.$FBRTCCallSummary8=new Date().valueOf();};j.prototype.$FBRTCCallSummary23=function(){'use strict';return {device:c('UserAgentData').deviceName,os:c('UserAgentData').platformName,os_version:c('UserAgentData').platformFullVersion,browser:c('UserAgentData').browserName,browser_version:c('UserAgentData').browserFullVersion,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth};};f.exports=j;}),null);
__d('FBRTCCallSummaryStore',['CacheStorage','FBRTCCallSummary','FBRTCLogger','areEqual'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h='localstorage',i='RTC_CALL_SUMMARY_',j='summary',k=2000,l=3,m=3*60*1000,n=null;o.getInstance=function(){'use strict';if(!n)n=new o();return n;};function o(){'use strict';this.$FBRTCCallSummaryStore1=new (c('CacheStorage'))(h,i);this.$FBRTCCallSummaryStore2=c('FBRTCLogger').getInstance();}o.prototype.storeCallSummary=function(p,q,r){'use strict';var s=this;this.$FBRTCCallSummaryStore3(function(t){if(!t[p])t[p]={};var u=t[p][q];if(u){var v=s.$FBRTCCallSummaryStore4(u);if(v&&v.getLastUpdatedTime()>r.getLastUpdatedTime()){s.$FBRTCCallSummaryStore2.logToConsole('Outdated summaries');return null;}}t[p][q]=s.$FBRTCCallSummaryStore5(r);return t;},s.$FBRTCCallSummaryStore2.logError.bind(s.$FBRTCCallSummaryStore2,p,q));};o.prototype.retrieveCallSummary=function(p,q){'use strict';var r=this.$FBRTCCallSummaryStore6(),s=null;if(r[p])s=r[p][q];if(s){return this.$FBRTCCallSummaryStore4(s);}else return null;};o.prototype.removeCallSummary=function(p,q){'use strict';this.removeCallSummaries([{peerID:p,callID:q}]);};o.prototype.removeCallSummaries=function(p){'use strict';var q=this;this.$FBRTCCallSummaryStore3(function(r){var s=p.length;for(var t=0;t<s;t++){var u=p[t].peerID,v=p[t].callID;if(r[u]&&r[u][v]){delete r[u][v];if(q.$FBRTCCallSummaryStore7(r[u]))delete r[u];}}return r;},q.$FBRTCCallSummaryStore2.logError.bind(q.$FBRTCCallSummaryStore2,null,null));};o.prototype.getLoggableSummaries=function(){'use strict';var p=this.$FBRTCCallSummaryStore6(),q=[];for(var r in p)if(p.hasOwnProperty(r))for(var s in p[r])if(p[r].hasOwnProperty(s)){var t=this.$FBRTCCallSummaryStore4(p[r][s],m);if(t)q.push(t);}return q;};o.prototype.$FBRTCCallSummaryStore7=function(p){'use strict';for(var q in p)if(p.hasOwnProperty(q))return false;return true;};o.prototype.$FBRTCCallSummaryStore5=function(p){'use strict';var q={__t:Date.now(),__d:p.toJsonString()};return q;};o.prototype.$FBRTCCallSummaryStore4=function(p,q){'use strict';if(p)if(!q||Date.now()-p.__t>=q)return c('FBRTCCallSummary').fromJsonString(p.__d);return null;};o.prototype.$FBRTCCallSummaryStore6=function(){'use strict';var p=this.$FBRTCCallSummaryStore1.get(j)||{};return p;};o.prototype.$FBRTCCallSummaryStore3=function(p,q,r,s){'use strict';if(r===undefined||r===null)r=l;var t=this.$FBRTCCallSummaryStore6(),u=this.$FBRTCCallSummaryStore6(),v=p(t);if(v===null)return;var w=this.$FBRTCCallSummaryStore6();if(c('areEqual')(u,w)){this.$FBRTCCallSummaryStore1.set(j,v);this.$FBRTCCallSummaryStore2.logToConsole('Updated summaries');}else if(r>0){q('Retry lock');if(s){var x=this;setTimeout(function(){x.$FBRTCCallSummaryStore3(p,q,r-1,true);},k);}else this.$FBRTCCallSummaryStore3(p,q,r-1,true);}else q('Failed to lock');};f.exports=o;}),null);
__d('FBRTCCallSummaryUploader',['Banzai','FBRTCCallSummary','FBRTCCallSummaryStore'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={init:function i(){var j=c('FBRTCCallSummaryStore').getInstance();c('Banzai').subscribe(c('Banzai').SEND,function(){c('FBRTCCallSummary').logSavedSummaries(j);});}};f.exports=h;}),null);
__d('NotificationJewelReminderLoader',['JSResource'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports={init:function h(i){c('JSResource')('NotificationJewelReminder').__setRef('NotificationJewelReminderLoader').load().done(function(j){new j(i);});}};}),null);
__d('P2PDialogStore',['EventEmitter','P2PActionConstants','P2PDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=void 0,k={};h=babelHelpers.inherits(l,c('EventEmitter'));i=h&&h.prototype;function l(){i.constructor.call(this);j=c('P2PDispatcher').register(this.onEventDispatched.bind(this));k={dialogClass:null,dialogProps:null};}l.prototype.getState=function(){return k;};l.prototype.onEventDispatched=function(m){var n=m.type,o=m.data;switch(n){case c('P2PActionConstants').DIALOG_SHOWN:k.dialogClass=o.dialogClass;k.dialogProps=o.dialogProps;this.emit('change');break;case c('P2PActionConstants').DIALOG_CLOSED:k.dialogClass=null;k.dialogProps=null;this.emit('change');break;}};f.exports=new l();}),null);
__d('P2PDialogContainer.react',['P2PDialogStore','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.state=c('P2PDialogStore').getState(),this.onDialogStoreChange=function(){this.setState(c('P2PDialogStore').getState());}.bind(this),l;}j.prototype.componentDidMount=function(){this.dialogStoreSub=c('P2PDialogStore').addListener('change',this.onDialogStoreChange);};j.prototype.componentWillUnmount=function(){if(this.dialogStoreSub){this.dialogStoreSub.remove();this.dialogStoreSub=null;}};j.prototype.render=function(){if(!this.state.dialogClass)return null;var k=this.state.dialogClass;return c('React').createElement(k,babelHelpers['extends']({},this.state.dialogProps,{key:'dialog'}));};f.exports=j;}),null);
__d('P2PDialogContainerMount',['P2PDialogContainer.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={mount:function i(j){c('ReactDOM').render(c('React').createElement(c('P2PDialogContainer.react'),null),j);}};f.exports=h;}),null);
__d('PagesPlatformActionConstants',[],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={BOOKING_REQUEST_ACCEPT_ERROR:'booking_request_accept_error',BOOKING_REQUEST_ACCEPT_INITIATED:'booking_request_accept_initiated',BOOKING_REQUEST_ACCEPTED:'booking_request_accepted',BOOKING_REQUEST_CREATED:'booking_request_created',BOOKING_REQUEST_DECLINE_ERROR:'booking_request_decline_error',BOOKING_REQUEST_DECLINE_INITIATED:'booking_request_decline_initiated',BOOKING_REQUEST_DECLINED:'booking_request_declined',BOOKING_REQUEST_RESCHEDULE_INITIATED:'booking_request_reschedule_initiated',BOOKING_REQUEST_RESCHEULED:'booking_request_reschedule',DIALOG_CLOSED:'dialog_closed',DIALOG_SHOWN:'dialog_shown',NEW_TIME_CHOSEN:'new_time_chosen'};f.exports=h;}),null);
__d('PagesPlatformRequestDispatcher',['Dispatcher_DEPRECATED'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=new (c('Dispatcher_DEPRECATED'))();}),null);
__d('PagesPlatformDialogStore',['EventEmitter','PagesPlatformActionConstants','PagesPlatformRequestDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j={};h=babelHelpers.inherits(k,c('EventEmitter'));i=h&&h.prototype;function k(){i.constructor.call(this);c('PagesPlatformRequestDispatcher').register(this.onEventDispatched.bind(this));j={dialogClass:null,dialogProps:null};}k.prototype.getState=function(){return j;};k.prototype.onEventDispatched=function(l){var m=l.type,n=l.data;switch(m){case c('PagesPlatformActionConstants').DIALOG_SHOWN:j.dialogClass=n.dialogClass;j.dialogProps=n.dialogProps;this.emit('change');break;case c('PagesPlatformActionConstants').DIALOG_CLOSED:j.dialogClass=null;j.dialogProps=null;this.emit('change');break;}};f.exports=new k();}),null);
__d('PagesPlatformDialogContainer.react',['PagesPlatformDialogStore','PureStoreBasedStateMixin','React'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').createClass({displayName:'PagesPlatformDialogContainer',mixins:[c('PureStoreBasedStateMixin')(c('PagesPlatformDialogStore'))],statics:{calculateState:function i(){return c('PagesPlatformDialogStore').getState();}},render:function i(){if(!this.state.dialogClass)return null;var j=this.state.dialogClass;return c('React').createElement(j,babelHelpers['extends']({},this.state.dialogProps,{key:'dialog'}));}});f.exports=h;}),null);
__d('PagesPlatformDialogContainerMount',['PagesPlatformDialogContainer.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={mount:function i(j){c('ReactDOM').render(c('React').createElement(c('PagesPlatformDialogContainer.react'),null),j);}};f.exports=h;}),null);
__d('SyncRequestNotificationBeeperItemContents.react',['cx','Animation','Image.react','ImageBlock.react','NotificationBeeperItemCloseButton.react','NotificationUserActions','React','ReactDOM','SyncRequest.react','SyncRequestStatusEnum'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(){var l,m;'use strict';for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.$SyncRequestNotificationBeeperItemContents1=function(){c('NotificationUserActions').markNotificationsAsRead([this.props.beep.notificationID]);this.props.onHide();}.bind(this),this.$SyncRequestNotificationBeeperItemContents2=function(){this.$SyncRequestNotificationBeeperItemContents1();this.props.onHide();}.bind(this),this.$SyncRequestNotificationBeeperItemContents3=function(){new (c('Animation'))(c('ReactDOM').findDOMNode(this.refs.inner)).from('opacity','0').to('opacity','1').duration(200).go();}.bind(this),this.onRequestStatusUpdate=function(q,r){if(q!=c('SyncRequestStatusEnum').PENDING&&r==c('SyncRequestStatusEnum').PENDING)this.props.onReadyToHide(this.props.beep.notificationID);}.bind(this),m;}k.prototype.componentDidMount=function(){'use strict';if(this.props.beep.rendererData.status!=c('SyncRequestStatusEnum').PENDING)this.props.onReadyToHide(this.props.beep.notificationID);};k.prototype.componentDidUpdate=function(l){'use strict';if(this.props.beep.rendererData.status!=c('SyncRequestStatusEnum').PENDING&&l.beep.rendererData.status==c('SyncRequestStatusEnum').PENDING)this.props.onReadyToHide(this.props.beep.notificationID);};k.prototype.render=function(){'use strict';var l=this.props.beep,m=l.rendererData;return (c('React').createElement('div',{ref:'inner',className:this.props.className},c('React').createElement(c('NotificationBeeperItemCloseButton.react'),{onClick:this.$SyncRequestNotificationBeeperItemContents2}),c('React').createElement(c('ImageBlock.react'),{className:"_3soj"},c('React').createElement(c('Image.react'),{src:l.actors[0].profile_picture.uri,className:"_3sok"}),c('React').createElement('div',{className:"_3sol"},c('React').createElement(c('SyncRequest.react'),{app:m.app,creationTime:m.creation_time,requestId:m.id.toString(),receiver:m.receiver,sender:m.sender,status:m.status,timeout:m.timeout,timeRemaining:m.time_remaining,viewerId:m.receiver.id,onStatusUpdate:this.onRequestStatusUpdate})))));};f.exports=k;}),null);
__d('LiveMessageReceiver',['Arbiter','ChannelConstants','emptyFunction','shield'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){this.eventName=i;this.subs=null;this.handler=c('emptyFunction');this.shutdownHandler=null;this.registered=false;this.appId=1;}Object.assign(h,{getAppMessageType:function i(j,k){return 'live_message/'+j+':'+k;},route:function i(j){var k=function l(m){var n=h.getAppMessageType(j.app_id,j.event_name);c('Arbiter').inform(n,m,c('Arbiter').BEHAVIOR_PERSISTENT);};k(j.response);}});Object.assign(h.prototype,{setAppId:function i(j){this.appId=j;return this;},setHandler:function i(j){this.handler=j;this._dirty();return this;},setRestartHandler:c('emptyFunction'),setShutdownHandler:function i(j){this.shutdownHandler=c('shield')(j);this._dirty();return this;},_dirty:function i(){if(this.registered){this.unregister();this.register();}},register:function i(){var j=function(l,m){return this.handler(m);}.bind(this),k=h.getAppMessageType(this.appId,this.eventName);this.subs={};this.subs.main=c('Arbiter').subscribe(k,j);if(this.shutdownHandler)this.subs.shut=c('Arbiter').subscribe(c('ChannelConstants').ON_SHUTDOWN,this.shutdownHandler);this.registered=true;return this;},unregister:function i(){if(!this.subs)return this;for(var j in this.subs)if(this.subs[j])this.subs[j].unsubscribe();this.subs=null;this.registered=false;return this;}});f.exports=h;}),null);
__d('initLiveMessageReceiver',['Arbiter','ChannelConstants','LiveMessageReceiver'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('app_msg'),function(h,i){c('LiveMessageReceiver').route(i.obj);});}),null);